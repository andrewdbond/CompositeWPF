[
  {
    "Id": "540987",
    "ThreadId": "239698",
    "Html": "\r\n<p>Hello:</p>\r\n<p>I am trying to accomplish what seems to have been accomplised before, in previous versions of PRISM. I am simply trying to bind the header(template) of a tabItem Control of tabControl to a public property of a module. For some reason I am not able to get\r\n this to work. here is some code....</p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre> &lt;sdk:TabControl Grid.Row=<span style=\"color:#a31515\">&quot;1&quot;</span>\r\n                        x:Name=<span style=\"color:#a31515\">&quot;MyTabs&quot;</span>\r\n                        regions:RegionManager.RegionName=<span style=\"color:#a31515\">&quot;ModuleRegion&quot;</span>&gt;\r\n            &lt;regions:TabControlRegionAdapter.ItemContainerStyle&gt;\r\n                &lt;Style TargetType=<span style=\"color:#a31515\">&quot;sdk:TabItem&quot;</span>\r\n                       BasedOn=<span style=\"color:#a31515\">&quot;{StaticResource BaseTabItem}&quot;</span>&gt;\r\n                    &lt;Setter Property=<span style=\"color:#a31515\">&quot;HeaderTemplate&quot;</span>&gt;\r\n                        &lt;Setter.Value&gt;\r\n                            &lt;DataTemplate&gt;\r\n                                &lt;TextBlock Text=<span style=\"color:#a31515\">&quot;{Binding TabCaption}&quot;</span> /&gt;\r\n                            &lt;/DataTemplate&gt;\r\n                        &lt;/Setter.Value&gt;\r\n                    &lt;/Setter&gt;                   \r\n                &lt;/Style&gt;\r\n            &lt;/regions:TabControlRegionAdapter.ItemContainerStyle&gt;           \r\n        &lt;/sdk:TabControl&gt;\r\n</pre>\r\n<pre>This is how I initialize the ModuleA.</pre>\r\n<pre><div style=\"color:black; background-color:white\"><pre> <span style=\"color:blue\">public</span> <span style=\"color:blue\">class</span> Module : IModule\r\n    {\r\n        IRegionManager regionManager;\r\n        IUnityContainer container;\r\n\r\n        <span style=\"color:blue\">public</span> Module(IRegionManager _regionManger, IUnityContainer _container)\r\n        {\r\n            <span style=\"color:blue\">this</span>.regionManager = _regionManger;\r\n            <span style=\"color:blue\">this</span>.container = _container;\r\n        }\r\n        <span style=\"color:blue\">#region</span> IModule Members\r\n\r\n        <span style=\"color:blue\">public</span> <span style=\"color:blue\">void</span> Initialize()\r\n        {\r\n            regionManager.RegisterViewWithRegion(<span style=\"color:#a31515\">&quot;ModuleRegion&quot;</span>, <span style=\"color:blue\">typeof</span>(ModelAView));\r\n        }\r\n\r\n        <span style=\"color:blue\">#endregion</span>\r\n    }\r\n</pre>\r\n</div>\r\n</pre>\r\n<pre>In the ViewModel of my ModuleA View I have defined a publc properyt named TabCaption.</pre>\r\n<pre><div style=\"color:black; background-color:white\"><pre> <span style=\"color:blue\">public</span> <span style=\"color:blue\">string</span> TabCaption\r\n        {\r\n            <span style=\"color:blue\">get</span> { <span style=\"color:blue\">return</span> <span style=\"color:#a31515\">&quot;tolga&quot;</span>; }\r\n        }\r\n</pre>\r\n</div>\r\n</pre>\r\n<pre>This is how I load my module into the catalog.</pre>\r\n<pre><div style=\"color:black; background-color:white\"><pre> <span style=\"color:blue\">public</span> <span style=\"color:blue\">class</span> Bootstrapper : UnityBootstrapper\r\n    {\r\n        <span style=\"color:blue\">protected</span> <span style=\"color:blue\">override</span> DependencyObject CreateShell()\r\n        {\r\n            Shell shell = Container.Resolve&lt;Shell&gt;();\r\n            Application.Current.RootVisual = shell;\r\n            <span style=\"color:blue\">return</span> shell;\r\n        }\r\n        \r\n        <span style=\"color:blue\">protected</span> <span style=\"color:blue\">override</span> IModuleCatalog CreateModuleCatalog()\r\n        {\r\n            ModuleCatalog catalog = <span style=\"color:blue\">new</span> ModuleCatalog();\r\n            catalog.AddModule(<span style=\"color:blue\">typeof</span>(ModuleA.Module));\r\n            <span style=\"color:blue\">return</span> catalog;\r\n        }      \r\n    }\r\n</pre>\r\n<pre>Any help is greatly appreciated</pre>\r\n<pre>Thanks,</pre>\r\n<pre>--tolga</pre>\r\n</div>\r\n</pre>\r\n</div>\r\n",
    "PostedDate": "2010-12-27T15:43:02.643-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "540989",
    "ThreadId": "239698",
    "Html": "\r\n<p>I found it....</p>\r\n<p>in my view's code-behind. I had to change it to this...</p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre> <span style=\"color:blue\">public</span> ModelAView(ModelAViewModel _viewModel)\r\n        {\r\n            InitializeComponent();\r\n            <span style=\"color:blue\">this</span>.DataContext = _viewModel;\r\n\r\n        }\r\n</pre>\r\n</div>\r\n<p>&nbsp;</p>\r\n<p>instead of</p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre><span style=\"color:blue\">public</span> ModelAView(ModelAViewModel _viewModel)\r\n        {\r\n            InitializeComponent();\r\n            <span style=\"color:blue\">this</span>.Loaded &#43;= (s, e) =&gt;\r\n            {\r\n                <span style=\"color:blue\">this</span>.DataContext = _viewModel;\r\n            };\r\n\r\n        }\r\n</pre>\r\n</div>\r\n",
    "PostedDate": "2010-12-27T15:55:01.293-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "541187",
    "ThreadId": "239698",
    "Html": "\r\n<p>Hi Tolga,<br>\r\n<br>\r\nThanks for sharing your insight with the rest of the community, as other users might benefit from knowing this.</p>\r\n<p>Miguel Bronzovic<br>\r\n<a href=\"http://blogs.southworks.net/mbronzovic\">http://blogs.southworks.net/mbronzovic</a></p>\r\n<p><br>\r\n<br>\r\n</p>\r\n",
    "PostedDate": "2010-12-28T06:22:11.683-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "554353",
    "ThreadId": "239698",
    "Html": "\r\n<p>Hi Tolga,</p>\r\n<p>&nbsp;</p>\r\n<p>Many Thanks for posting such a great question and the solution. I am also stuck with this.<br>\r\nAnd I still couldn't make it work til a minute ago. I have been so desperate that I blamed MEF and changed the test app to Unity from MEF. :)</p>\r\n<p>Inside my Module I have the following:</p>\r\n<pre><span>public</span>&nbsp;<span>void</span>&nbsp;Initialize()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_regionManager.RegisterViewWithRegion(<span>Constants</span>.MainRegion,&nbsp;()&nbsp;=&gt;&nbsp;_container.Resolve&lt;<span>ContactView</span>&gt;());<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</pre>\r\n<p>Maybe because the View is created first and the viewmodel is added at runtime (Loaded), the tab doesnt see the property yet? &nbsp;But the INotifyPropertyChanged should have really reported this later nonetheless. Unless the Header of a tab can't be changed\r\n once set.</p>\r\n<p>You won't believe it but by by reversing your response, I got it working. This works for me but not if I use the Loaded event.&nbsp;</p>\r\n<pre><span>public</span> ContactView(ContactViewModel _viewModel)\r\n        {\r\n            InitializeComponent();\r\n            <span>this</span>.DataContext = _viewModel;\r\n\r\n        }</pre>\r\n<p>Can a PRISM pro explain why this is happening?</p>\r\n<p>Many Thanks,</p>\r\n",
    "PostedDate": "2011-01-24T05:40:42.25-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "721994",
    "ThreadId": "239698",
    "Html": "<p>Hi,</p>\r\n<p>Thanks for sharing this post. It helps.</p>\r\n<p>I faced the same problem in TabControl and it&nbsp;got solved&nbsp;after below changes done in my view.&nbsp;</p>\r\n<p>I was not able to bind&nbsp;tabItem&nbsp;to public property.</p>\r\n<p>﻿﻿﻿﻿﻿<span style=\"color: blue;\">public</span> MainView(MainViewModel viewModel)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; InitializeComponent();<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color: blue;\">this</span>.DataContext = viewModel;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>\r\n<p><br />Thanks</p>\r\n<p>- Divyesh</p>\r\n<p>&nbsp;</p>",
    "PostedDate": "2012-01-07T18:46:30.127-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "802074",
    "ThreadId": "239698",
    "Html": "<p>I think this is caused by a fix for a bug in SL 3.&nbsp;<br />Although changing the prism libs my self is&nbsp;</p>\r\n<p>if you change (in&nbsp;TabControlRegionSyncBehavior.cs)&nbsp;:</p>\r\n<pre><span>&nbsp;</span><div style=\"color: black; background-color: white;\"><pre><span style=\"color: blue;\">protected</span> <span style=\"color: blue;\">virtual</span> TabItem PrepareContainerForItem( <span style=\"color: blue;\">object</span> item, DependencyObject parent )\r\n{\r\n\tTabItem container = item <span style=\"color: blue;\">as</span> TabItem;\r\n\t<span style=\"color: blue;\">if</span> ( container == <span style=\"color: blue;\">null</span> )\r\n\t{\r\n\t\t<span style=\"color: blue;\">object</span> dataContext = GetDataContext( item );\r\n\t\tcontainer = <span style=\"color: blue;\">new</span> TabItem( );\r\n\t\tcontainer.Content = item;\r\n\t\tcontainer.Style = TabControlRegionAdapter.GetItemContainerStyle( parent );\r\n\t\tcontainer.DataContext = dataContext; <span style=\"color: green;\">// To run with SL 2</span>\r\n\t\tcontainer.Header = dataContext; <span style=\"color: green;\">// To run with SL 3</span>\r\n\t\tcontainer.SetValue( IsGeneratedProperty, <span style=\"color: blue;\">true</span> );\r\n\t}\r\n\t<span style=\"color: blue;\">return</span> container;\r\n}\r\n</pre>\r\n</div>\r\n</pre>\r\n<p>To: (removing the line \"container.Header = dataContext; // To run with SL 3\" )</p>\r\n<p>&nbsp;</p>\r\n<div style=\"color: black; background-color: white;\">\r\n<pre style=\"color: black;\"><span style=\"color: blue;\">protected</span> <span style=\"color: blue;\">virtual</span> TabItem PrepareContainerForItem( <span style=\"color: blue;\">object</span> item, DependencyObject parent )\r\n{\r\n\tTabItem container = item <span style=\"color: blue;\">as</span> TabItem;\r\n\t<span style=\"color: blue;\">if</span> ( container == <span style=\"color: blue;\">null</span> )\r\n\t{\r\n\t\t<span style=\"color: blue;\">object</span> dataContext = GetDataContext( item );\r\n\t\tcontainer = <span style=\"color: blue;\">new</span> TabItem( );\r\n\t\tcontainer.Content = item;\r\n\t\tcontainer.Style = TabControlRegionAdapter.GetItemContainerStyle( parent );\r\n\t\tcontainer.DataContext = dataContext; <span style=\"color: green;\">// To run with SL 2</span>\r\n\t\t<span style=\"color: green;\">//container.Header = dataContext; // To run with SL 3</span>\r\n\t\tcontainer.SetValue( IsGeneratedProperty, <span style=\"color: blue;\">true</span> );\r\n\t}\r\n\t<span style=\"color: blue;\">return</span> container;\r\n}</pre>\r\n<pre>Now it works correctly. In my case I use data binding in the TabItem style (in Silverlight 5):</pre>\r\n<pre style=\"color: black;\"><div style=\"color: black; background-color: white;\"><pre><span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">Style</span> <span style=\"color: red;\">x:Key</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">CustomTabItemStyle</span><span style=\"color: black;\">\" </span><span style=\"color: red;\">TargetType</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">sdk:TabItem</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">&gt;</span>\r\n\t<span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">Setter</span> <span style=\"color: red;\">Property</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">Header</span><span style=\"color: black;\">\" </span><span style=\"color: red;\">Value</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">{Binding Path=HeaderInfo}</span><span style=\"color: black;\">\"</span> <span style=\"color: blue;\">/&gt;</span>\r\n<span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">Style</span><span style=\"color: blue;\">&gt;</span>\r\n</pre>\r\n</div>\r\n<br /></pre>\r\n</div>\r\n<p>&nbsp;</p>",
    "PostedDate": "2012-02-27T08:22:47.263-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]