[
  {
    "Id": "576453",
    "ThreadId": "248662",
    "Html": "\r\n<p>Hi,</p>\r\n<p>I have a UserControl which consists of a region name &quot;MainSearchGridPreviewPane&quot;, which serve as &quot;container&quot; to receives view injected by other modules.</p>\r\n<p>I need to open that UserControl multiple times in a TabControl, and I expect it to show in different tabs, this part work well without region added.</p>\r\n<p>Refer to this <a href=\"http://msdn.microsoft.com/en-us/library/ff921162%28PandP.20%29.aspx\" target=\"_blank\">\r\narticle</a>, I try to use the <strong>Scoped Region</strong> since I think multiple region with same name will be call later, I've added the region into XAML file, and have the code below when UserControl loaded:</p>\r\n<p><span style=\"text-decoration:underline\"><strong>XAML in UserControl</strong></span></p>\r\n<p></p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre><span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">ItemsControl</span> <span style=\"color:red\">Grid.ColumnSpan</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">6</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">Grid.Row</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">4</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">Margin</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">37,9,30,12</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">Name</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">PreviewPane</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">Regions:RegionManager.RegionName</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">MainSearchGridPreviewPane</span><span style=\"color:black\">&quot;</span> <span style=\"color:blue\">/&gt;</span>\r\n</pre>\r\n</div>\r\n<p></p>\r\n<p><span style=\"text-decoration:underline\"><strong>Code in ViewModel</strong></span></p>\r\n<p><span style=\"color:blue\">private</span> <span style=\"color:blue\">void</span> ViewLoaded(EventParameters eventParameters)</p>\r\n<pre>        {<br>            <span style=\"color:green\">// View injection</span><br>            <span style=\"color:blue\">var</span> searchBarView = _container.ResolveViewAndViewModel&lt;NormalSearchView, NormalSearchViewModel&gt;();<br>            IRegion previewPaneRegion = <span style=\"color:blue\">this</span>._regionManager.Regions[<span style=\"color:#a31515\">&quot;MainSearchGridPreviewPane&quot;</span>];<br><br>            IRegionManager previewPaneRegionManager = previewPaneRegion.Add(searchBarView, <span style=\"color:blue\">null</span>, <span style=\"color:blue\">true</span>);<br>            <span style=\"color:green\">//previewPaneRegion.Activate(searchBarView);</span><br>        }<br></pre>\r\n<p>The UserControl able to show without error at first time, however when I try to open the same UserControl second time at second tab, I got the error message below:</p>\r\n<div style=\"font-family:courier\">\r\n<p>&nbsp;</p>\r\n<p>Microsoft.Practices.Prism.Regions.UpdateRegionsException was unhandled by user code<br>\r\n&nbsp; Message=An exception occurred while trying to create region objects. <br>\r\n&nbsp;&nbsp;&nbsp; - The most likely causing exception was: 'System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---&gt; System.ArgumentException:\r\n<strong>Region with the given name is already registered: MainSearchGridPreviewPane</strong><br>\r\n&nbsp;&nbsp; at Microsoft.Practices.Prism.Regions.RegionManager.RegionCollection.Add(IRegion region)<br>\r\n&nbsp;&nbsp; at Microsoft.Practices.Prism.Regions.Behaviors.RegionManagerRegistrationBehavior.TryRegisterRegion()<br>\r\n&nbsp;&nbsp; at Microsoft.Practices.Prism.Regions.Behaviors.RegionManagerRegistrationBehavior.OnUpdatingRegions(Object sender, EventArgs e)<br>\r\n&nbsp;&nbsp; --- End of inner exception stack trace ---<br>\r\n&nbsp;&nbsp; at System.RuntimeMethodHandle._InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, SignatureStruct&amp; sig, MethodAttributes methodAttributes, RuntimeType typeOwner)<br>\r\n&nbsp;&nbsp; at System.RuntimeMethodHandle.InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, Signature sig, MethodAttributes methodAttributes, RuntimeType typeOwner)<br>\r\n&nbsp;&nbsp; at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks)<br>\r\n&nbsp;&nbsp; at System.Delegate.DynamicInvokeImpl(Object[] args)<br>\r\n&nbsp;&nbsp; at System.Delegate.DynamicInvoke(Object[] args)<br>\r\n&nbsp;&nbsp; at Microsoft.Practices.Prism.Events.WeakDelegatesManager.Raise(Object[] args)<br>\r\n&nbsp;&nbsp; at Microsoft.Practices.Prism.Regions.RegionManager.UpdateRegions()'.<br>\r\n&nbsp;&nbsp;&nbsp; But also check the InnerExceptions for more detail or call .GetRootException().</p>\r\n</div>\r\n<p>&nbsp;</p>\r\n<p>Any idea for that? Please tell me if my concept of region is wrong because I still new to MVVM/Prism.</p>\r\n<p>&nbsp;</p>\r\n<p>Thanks in advance.</p>\r\n",
    "PostedDate": "2011-03-06T20:21:58.867-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "576467",
    "ThreadId": "248662",
    "Html": "<p>I've found the reason, it is because the UserControl is inject into another region call \"WorkRegion\", which have the code to inject the view (UserControl in this case) into WorkRegion.</p>\r\n<p>I just modified the view injection code for WorkRegion to generated a scoped region when the view (The UserControl) is injected into tab, then the error disappear!</p>\r\n<p>&nbsp;</p>\r\n<p>But now I need to think about the retrieval of scoped region across modules...</p>\r\n<p>&nbsp;</p>\r\n<p>Thanks everybody for spending time on this thread. :)</p>",
    "PostedDate": "2011-03-06T22:06:06.873-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "577832",
    "ThreadId": "248662",
    "Html": "<p>Hi,</p>\r\n<p>Thank you for sharing your insight with the rest of the community, as other users might benefit from reading this in case a similar issue arises.</p>\r\n<p>Guido Leandro Maliandi<br /> <a href=\"http://blogs.southworks.net/gmaliandi\">http://blogs.southworks.net/gmaliandi</a></p>",
    "PostedDate": "2011-03-09T08:29:42.38-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]