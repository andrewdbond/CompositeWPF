[
  {
    "Id": "904279",
    "ThreadId": "393142",
    "Html": "\r\n<p>The region information I expect to find in the RegionManager instance is not there.</p>\r\n<p>My Shell defines two regions: LeftRegion and RightRegion.</p>\r\n<p>In LeftRegion I inject a view that shows a DataGrid with Customers. I define an event CustomerSelectedEvent that when fired, the event handler injects a view CustomerSummaryView that in turns defines a third region named DetailsRegion.</p>\r\n<p>DetailsRegion has two views registered: CustomerDetailsView and CustomerOrdersView.</p>\r\n<p>I'm trying to navigate from CustomerDetailsView to CustomerOrdersView&nbsp;and viceversa.</p>\r\n<p><strong>The problem is that RegionManager doesn't have the information of the DetailsRegion where the current view is in!.</strong></p>\r\n<p>Here's the project layout:</p>\r\n<p><img src=\"http://s18.postimage.org/5ree44dxl/Sin_t_tulo.jpg\" alt=\"\" width=\"237\" height=\"661\"></p>\r\n<p>Here's ModuleCatalog.xaml:</p>\r\n<div style=\"background-color:white; color:black\">\r\n<pre><span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Modularity</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">ModuleCatalog</span> <span style=\"color:red\">xmlns</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">http://schemas.microsoft.com/winfx/2006/xaml/presentation</span><span style=\"color:black\">&quot;</span>\r\n                          <span style=\"color:red\">xmlns:x</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">http://schemas.microsoft.com/winfx/2006/xaml</span><span style=\"color:black\">&quot;</span>\r\n                          <span style=\"color:red\">xmlns:sys</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">clr-namespace:System;assembly=mscorlib</span><span style=\"color:black\">&quot;</span>\r\n                          <span style=\"color:red\">xmlns:Modularity</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">clr-namespace:Microsoft.Practices.Prism.Modularity;assembly=Microsoft.Practices.Prism</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">&gt;</span>\r\n    <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Modularity</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">ModuleInfoGroup</span><span style=\"color:blue\">&gt;</span>\r\n        &lt;Modularity:ModuleInfo Ref=&quot;CustomersModule.xap&quot;\r\n                           ModuleName=&quot;CustomersModule&quot;\r\n                           ModuleType=&quot;CustomersModule.CustomersModule, CustomersModule, \r\n                                        Version=1.0.0.0, Culture=neutral,\r\n                PublicKeyToken=null&quot;&gt;\r\n        <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">Modularity</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">ModuleInfo</span><span style=\"color:blue\">&gt;</span>\r\n        &lt;Modularity:ModuleInfo Ref=&quot;CustomersDataModule.xap&quot;\r\n                           ModuleName=&quot;CustomersDataModule&quot;\r\n                           ModuleType=&quot;CustomersDataModule.CustomersDataModule, \r\n                               CustomersDataModule, Version=1.0.0.0, Culture=neutral,\r\n                PublicKeyToken=null&quot;&gt;\r\n            <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Modularity</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">ModuleInfo.DependsOn</span><span style=\"color:blue\">&gt;</span>\r\n                <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">sys</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">String</span><span style=\"color:blue\">&gt;</span>CustomersModule<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">sys</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">String</span><span style=\"color:blue\">&gt;</span>\r\n            <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">Modularity</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">ModuleInfo.DependsOn</span><span style=\"color:blue\">&gt;</span>\r\n        <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">Modularity</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">ModuleInfo</span><span style=\"color:blue\">&gt;</span>\r\n    <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">Modularity</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">ModuleInfoGroup</span><span style=\"color:blue\">&gt;</span>\r\n<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">Modularity</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">ModuleCatalog</span><span style=\"color:blue\">&gt;</span>\r\n</pre>\r\n</div>\r\n<p>Here's the Shell.xaml:</p>\r\n<div style=\"background-color:white; color:black\">\r\n<pre>   <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Grid</span> <span style=\"color:red\">x:Name</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">LayoutRoot</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">Background</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">White</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">&gt;</span>\r\n      <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Grid.RowDefinitions</span><span style=\"color:blue\">&gt;</span>\r\n         <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">RowDefinition</span> <span style=\"color:red\">Height</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">50</span><span style=\"color:black\">&quot;</span> <span style=\"color:blue\">/&gt;</span>\r\n         <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">RowDefinition</span> <span style=\"color:blue\">/&gt;</span>\r\n      <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">Grid.RowDefinitions</span><span style=\"color:blue\">&gt;</span>\r\n      <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Grid.ColumnDefinitions</span><span style=\"color:blue\">&gt;</span>\r\n         <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">ColumnDefinition</span> <span style=\"color:red\">Width</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">500</span><span style=\"color:black\">&quot;</span> <span style=\"color:blue\">/&gt;</span>\r\n         <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">ColumnDefinition</span> <span style=\"color:red\">Width</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">3*</span><span style=\"color:black\">&quot;</span> <span style=\"color:blue\">/&gt;</span>\r\n      <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">Grid.ColumnDefinitions</span><span style=\"color:blue\">&gt;</span>\r\n      <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">TextBlock</span> <span style=\"color:red\">Text</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">My Prism Solution</span><span style=\"color:black\">&quot;</span>\r\n         <span style=\"color:red\">FontSize</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">36</span><span style=\"color:black\">&quot;</span>\r\n         <span style=\"color:red\">TextAlignment</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Left</span><span style=\"color:black\">&quot;</span>\r\n         <span style=\"color:red\">HorizontalAlignment</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Center</span><span style=\"color:black\">&quot;</span>\r\n         <span style=\"color:red\">Grid.ColumnSpan</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">2</span><span style=\"color:black\">&quot;</span> <span style=\"color:blue\">/&gt;</span>\r\n\r\n      <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Border</span> <span style=\"color:red\">Grid.Column</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">0</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">Grid.Row</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">1</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">&gt;</span>\r\n         <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">ContentControl</span> <span style=\"color:red\">x:Name</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">LeftRegion</span><span style=\"color:black\">&quot;</span>\r\n               <span style=\"color:red\">prism:RegionManager.RegionName</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">LeftRegion</span><span style=\"color:black\">&quot;</span>\r\n               <span style=\"color:red\">VerticalContentAlignment</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Stretch</span><span style=\"color:black\">&quot;</span>\r\n               <span style=\"color:red\">HorizontalContentAlignment</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Stretch</span><span style=\"color:black\">&quot;</span> <span style=\"color:blue\">/&gt;</span>\r\n      <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">Border</span><span style=\"color:blue\">&gt;</span>\r\n\r\n      <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Border</span> <span style=\"color:red\">Grid.Column</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">1</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">Grid.Row</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">1</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">&gt;</span>\r\n         <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">ContentControl</span> <span style=\"color:red\">x:Name</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">RightRegion</span><span style=\"color:black\">&quot;</span>\r\n               <span style=\"color:red\">prism:RegionManager.RegionName</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">RightRegion</span><span style=\"color:black\">&quot;</span>\r\n               <span style=\"color:red\">VerticalContentAlignment</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Stretch</span><span style=\"color:black\">&quot;</span>\r\n               <span style=\"color:red\">HorizontalContentAlignment</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Stretch</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">&gt;</span>\r\n         <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">ContentControl</span><span style=\"color:blue\">&gt;</span>\r\n      <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">Border</span><span style=\"color:blue\">&gt;</span>\r\n   <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">Grid</span><span style=\"color:blue\">&gt;</span>\r\n</pre>\r\n</div>\r\n<p>Here's CustomersDataModule:</p>\r\n<div style=\"background-color:white; color:black\">\r\n<pre><span style=\"color:blue\">public</span> <span style=\"color:blue\">class</span> CustomersDataModule : IModule {\r\n   <span style=\"color:blue\">private</span> <span style=\"color:blue\">readonly</span> IUnityContainer container;\r\n   <span style=\"color:blue\">private</span> <span style=\"color:blue\">readonly</span> IRegionManager regionManager;\r\n   <span style=\"color:blue\">private</span> <span style=\"color:blue\">readonly</span> IEventAggregator eventAggregator;\r\n\r\n   <span style=\"color:blue\">public</span> CustomersDataModule(IUnityContainer container, IRegionManager regionManager, \r\n                                    IEventAggregator eventAggregator) {\r\n      <span style=\"color:blue\">this</span>.container = container;\r\n      <span style=\"color:blue\">this</span>.regionManager = regionManager;\r\n      <span style=\"color:blue\">this</span>.eventAggregator = eventAggregator;\r\n   }\r\n\r\n   <span style=\"color:blue\">public</span> <span style=\"color:blue\">void</span> Initialize() {\r\n\r\n      <span style=\"color:blue\">this</span>.eventAggregator.GetEvent&lt;CustomerSelectedEvent&gt;().Subscribe(<span style=\"color:blue\">this</span>.CustomerSelected, <span style=\"color:blue\">true</span>);\r\n\r\n      <span style=\"color:green\">// Register two Views in DetailsRegion</span>\r\n      <span style=\"color:blue\">this</span>.regionManager.RegisterViewWithRegion(<span style=\"color:#a31515\">&quot;DetailsRegion&quot;</span>,\r\n                                                   () =&gt; <span style=\"color:blue\">this</span>.container.Resolve&lt;CustomerDetailsView&gt;());\r\n      <span style=\"color:blue\">this</span>.regionManager.RegisterViewWithRegion(<span style=\"color:#a31515\">&quot;DetailsRegion&quot;</span>,\r\n                                                   () =&gt; <span style=\"color:blue\">this</span>.container.Resolve&lt;CustomerOrdersView&gt;());\r\n   }\r\n\r\n   <span style=\"color:blue\">private</span> <span style=\"color:blue\">void</span> CustomerSelected(Customer currCustomer) {\r\n      <span style=\"color:blue\">if</span> (currCustomer == <span style=\"color:blue\">null</span>)\r\n            <span style=\"color:blue\">return</span>;\r\n\r\n      IRegion rightRegion = <span style=\"color:blue\">this</span>.regionManager.Regions[<span style=\"color:#a31515\">&quot;RightRegion&quot;</span>];\r\n      <span style=\"color:blue\">if</span> (rightRegion == <span style=\"color:blue\">null</span>)\r\n            <span style=\"color:blue\">return</span>;\r\n\r\n      <span style=\"color:green\">// Inject CustomerSummaryView in RightRegion, CustomerSummaryView will define DetailsRegion</span>\r\n      CustomerSummaryView view = rightRegion.GetView(<span style=\"color:#a31515\">&quot;CustomerSummaryView&quot;</span>) <span style=\"color:blue\">as</span> CustomerSummaryView;\r\n      <span style=\"color:blue\">if</span> (view == <span style=\"color:blue\">null</span>) {\r\n            view = <span style=\"color:blue\">this</span>.container.Resolve&lt;CustomerSummaryView&gt;();\r\n\r\n            rightRegion.Add(view, <span style=\"color:#a31515\">&quot;CustomerSummaryView&quot;</span>, <span style=\"color:blue\">true</span>);\r\n      }\r\n      <span style=\"color:blue\">else</span> {\r\n            rightRegion.Activate(view);\r\n      }\r\n\r\n      CustomerSummaryViewModel viewModel = view.DataContext <span style=\"color:blue\">as</span> CustomerSummaryViewModel;\r\n      <span style=\"color:blue\">if</span> (viewModel != <span style=\"color:blue\">null</span>) {\r\n            viewModel.CurrentCustomer = currCustomer;\r\n      }\r\n   }\r\n}\r\n</pre>\r\n</div>\r\n<p>Here's CustomerSummaryView:</p>\r\n<div style=\"background-color:white; color:black\">\r\n<pre>   <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Grid</span> <span style=\"color:red\">x:Name</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">LayoutRoot</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">&gt;</span>\r\n      <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Grid.ColumnDefinitions</span><span style=\"color:blue\">&gt;</span>\r\n         <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">ColumnDefinition</span> <span style=\"color:red\">Width</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">*</span><span style=\"color:black\">&quot;</span> <span style=\"color:blue\">/&gt;</span>\r\n      <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">Grid.ColumnDefinitions</span><span style=\"color:blue\">&gt;</span>\r\n      <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Grid.RowDefinitions</span><span style=\"color:blue\">&gt;</span>\r\n         <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">RowDefinition</span> <span style=\"color:red\">Height</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Auto</span><span style=\"color:black\">&quot;</span> <span style=\"color:blue\">/&gt;</span>\r\n         <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">RowDefinition</span> <span style=\"color:red\">Height</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">85*</span><span style=\"color:black\">&quot;</span> <span style=\"color:blue\">/&gt;</span>\r\n      <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">Grid.RowDefinitions</span><span style=\"color:blue\">&gt;</span>\r\n\r\n      <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">TextBlock</span> <span style=\"color:red\">Grid.Row</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">0</span><span style=\"color:black\">&quot;</span>\r\n                  <span style=\"color:red\">Text</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Customer Summary View</span><span style=\"color:black\">&quot;</span>\r\n                  <span style=\"color:red\">TextWrapping</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Wrap</span><span style=\"color:black\">&quot;</span>\r\n                  <span style=\"color:red\">FontSize</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">18</span><span style=\"color:black\">&quot;</span>\r\n                  <span style=\"color:red\">Margin</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">8</span><span style=\"color:black\">&quot;</span> <span style=\"color:blue\">/&gt;</span>\r\n      <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Button</span> <span style=\"color:red\">Content</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Change View</span><span style=\"color:black\">&quot;</span> \r\n               <span style=\"color:red\">Command</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">{Binding ChangeView}</span><span style=\"color:black\">&quot;</span>\r\n               <span style=\"color:red\">Height</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">23</span><span style=\"color:black\">&quot;</span> \r\n               <span style=\"color:red\">HorizontalAlignment</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Left</span><span style=\"color:black\">&quot;</span> \r\n               <span style=\"color:red\">Margin</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">276,12,0,0</span><span style=\"color:black\">&quot;</span>\r\n               <span style=\"color:red\">Name</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">btnChangeView</span><span style=\"color:black\">&quot;</span> \r\n               <span style=\"color:red\">VerticalAlignment</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Top</span><span style=\"color:black\">&quot;</span> \r\n               <span style=\"color:red\">Width</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">82</span><span style=\"color:black\">&quot;</span> <span style=\"color:blue\">/&gt;</span>\r\n      <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Border</span> <span style=\"color:red\">Grid.Column</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">0</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">Grid.Row</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">1</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">&gt;</span>\r\n         <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">ContentControl</span> <span style=\"color:red\">x:Name</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">DetailsRegion</span><span style=\"color:black\">&quot;</span>\r\n               <span style=\"color:red\">prism:RegionManager.RegionName</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">DetailsRegion</span><span style=\"color:black\">&quot;</span>\r\n               <span style=\"color:red\">prism:RegionManager.RegionContext</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">{Binding CurrentCustomer}</span><span style=\"color:black\">&quot;</span>\r\n               <span style=\"color:red\">VerticalContentAlignment</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Stretch</span><span style=\"color:black\">&quot;</span>\r\n               <span style=\"color:red\">HorizontalContentAlignment</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Stretch</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">&gt;</span>\r\n         <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">ContentControl</span><span style=\"color:blue\">&gt;</span>\r\n      <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">Border</span><span style=\"color:blue\">&gt;</span>\r\n<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">Grid</span><span style=\"color:blue\">&gt;</span>\r\n</pre>\r\n</div>\r\n<p>CustomerSummaryViewModel.cs</p>\r\n<div style=\"background-color:white; color:black\">\r\n<pre><span style=\"color:blue\">public</span> <span style=\"color:blue\">class</span> CustomerSummaryViewModel : INotifyPropertyChanged, IConfirmNavigationRequest {\r\n\r\n   IRegionManager _regionManager;\r\n   <span style=\"color:blue\">string</span> _nextView = <span style=\"color:#a31515\">&quot;CustomerDetailsView&quot;</span>;\r\n\r\n   <span style=\"color:blue\">public</span> CustomerSummaryViewModel(IRegionManager regionManager) {\r\n      ChangeView = <span style=\"color:blue\">new</span> DelegateCommand(OnChangeView, CanChangeView);\r\n\r\n      <span style=\"color:blue\">this</span>._regionManager = regionManager;\r\n   }\r\n\r\n   <span style=\"color:blue\">public</span> DelegateCommand ChangeView {\r\n      <span style=\"color:blue\">get</span>;\r\n      <span style=\"color:blue\">private</span> <span style=\"color:blue\">set</span>;\r\n   }\r\n\r\n   <span style=\"color:blue\">private</span> <span style=\"color:blue\">bool</span> CanChangeView() {\r\n      <span style=\"color:blue\">return</span> <span style=\"color:blue\">true</span>;\r\n   }\r\n\r\n   <span style=\"color:blue\">private</span> <span style=\"color:blue\">void</span> OnChangeView() {\r\n\r\n   <strong><span style=\"color:green\">// At this point DetailsRegion should already be created, but it isn't. WHY?</span>\r\n</strong>\r\n      _regionManager.RequestNavigate\r\n      (\r\n            <span style=\"color:#a31515\">&quot;DetailsRegion&quot;</span>,\r\n            <span style=\"color:blue\">new</span> Uri(_nextView, UriKind.Relative),\r\n            PostNavigationCallback\r\n      );\r\n\r\n      <span style=\"color:blue\">switch</span> (_nextView) {\r\n            <span style=\"color:blue\">case</span> <span style=\"color:#a31515\">&quot;CustomerDetailsView&quot;</span>:\r\n               _nextView = <span style=\"color:#a31515\">&quot;CustomerOrdersView&quot;</span>;\r\n               <span style=\"color:blue\">break</span>;\r\n\r\n            <span style=\"color:blue\">case</span> <span style=\"color:#a31515\">&quot;CustomerOrdersView&quot;</span>:\r\n               _nextView = <span style=\"color:#a31515\">&quot;CustomerDetailsView&quot;</span>;\r\n               <span style=\"color:blue\">break</span>;\r\n      }\r\n   }\r\n\r\n   <span style=\"color:green\">// If we don't want to use any method, we use &quot;a =&gt; { }&quot; instead of PostNavigationCallback</span>\r\n   <span style=\"color:blue\">void</span> PostNavigationCallback(NavigationResult navigationResult) {\r\n      <span style=\"color:blue\">if</span> (navigationResult.Result == <span style=\"color:blue\">true</span>)\r\n            MessageBox.Show(<span style=\"color:#a31515\">&quot;Navigation Successful&quot;</span>);\r\n      <span style=\"color:blue\">else</span>\r\n            MessageBox.Show(<span style=\"color:#a31515\">&quot;Navigation Failed&quot;</span>);\r\n   }\r\n\r\n   <span style=\"color:blue\">private</span> Customer currentCustomer;\r\n\r\n   <span style=\"color:blue\">public</span> Customer CurrentCustomer {\r\n      <span style=\"color:blue\">get</span> {\r\n            <span style=\"color:blue\">return</span> <span style=\"color:blue\">this</span>.currentCustomer;\r\n      }\r\n      <span style=\"color:blue\">set</span> {\r\n            <span style=\"color:blue\">this</span>.currentCustomer = value;\r\n            <span style=\"color:blue\">this</span>.NotifyPropertyChanged(<span style=\"color:#a31515\">&quot;CurrentCustomer&quot;</span>);\r\n      }\r\n   }\r\n\r\n   <span style=\"color:blue\">#region</span> INotifyPropertyChanged Members\r\n\r\n   <span style=\"color:blue\">public</span> <span style=\"color:blue\">event</span> PropertyChangedEventHandler PropertyChanged;\r\n\r\n   <span style=\"color:blue\">private</span> <span style=\"color:blue\">void</span> NotifyPropertyChanged(<span style=\"color:blue\">string</span> propertyName) {\r\n      <span style=\"color:blue\">if</span> (<span style=\"color:blue\">this</span>.PropertyChanged != <span style=\"color:blue\">null</span>) {\r\n            <span style=\"color:blue\">this</span>.PropertyChanged(<span style=\"color:blue\">this</span>, <span style=\"color:blue\">new</span> PropertyChangedEventArgs(propertyName));\r\n      }\r\n   }\r\n\r\n   <span style=\"color:blue\">#endregion</span>\r\n\r\n   <span style=\"color:blue\">#region</span> IConfirmNavigationRequest Members\r\n\r\n   <span style=\"color:blue\">public</span> <span style=\"color:blue\">void</span> ConfirmNavigationRequest(NavigationContext navigationContext, Action&lt;<span style=\"color:blue\">bool</span>&gt; continuationCallback) {\r\n      <span style=\"color:blue\">throw</span> <span style=\"color:blue\">new</span> NotImplementedException();\r\n   }\r\n\r\n   <span style=\"color:blue\">#endregion</span>\r\n\r\n   <span style=\"color:blue\">#region</span> INavigationAware Members\r\n\r\n   <span style=\"color:blue\">public</span> <span style=\"color:blue\">bool</span> IsNavigationTarget(NavigationContext navigationContext) {\r\n      <span style=\"color:blue\">return</span> <span style=\"color:blue\">true</span>;\r\n   }\r\n\r\n   <span style=\"color:blue\">public</span> <span style=\"color:blue\">void</span> OnNavigatedFrom(NavigationContext navigationContext) {\r\n      MessageBox.Show(<span style=\"color:#a31515\">&quot;We are within CustomerSummaryViewModel&quot;</span>);\r\n   }\r\n\r\n   <span style=\"color:blue\">public</span> <span style=\"color:blue\">void</span> OnNavigatedTo(NavigationContext navigationContext) {\r\n      MessageBox.Show(<span style=\"color:#a31515\">&quot;We are within CustomerSummaryViewModel&quot;</span>);\r\n   }\r\n\r\n   <span style=\"color:blue\">#endregion</span>\r\n}\r\n</pre>\r\n</div>\r\n<p>When executing OnChangeView, RegionManager doesn't have any information about DetailsRegion, that's why the RequestNavigate fails.</p>\r\n<p>Here's the entire project:</p>\r\n<p><a href=\"https://skydrive.live.com/#cid=228822BB183339A9&id=228822BB183339A9%21234\">https://skydrive.live.com/#cid=228822BB183339A9&amp;id=228822BB183339A9%21234</a></p>\r\n<p>Silverlight 5 and Prism 4.1.</p>\r\n<p>Rafael</p>\r\n",
    "PostedDate": "2012-08-26T15:01:22.607-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "904632",
    "ThreadId": "393142",
    "Html": "<p>Hi Rafael,</p>\r\n<p>So far, I found that the cause of this problem could be that your \"<em>CustomerSummaryView</em>\" was added as a scoped region, and in the <strong>OnChangeView </strong>method, the main <strong>RegionManager </strong>is used to perform the request of the navigation. Hence, the \"<em>DetailsRegion</em>\" will not be present in this <strong>RegionManager </strong>when the navigation is performed, causing it to fail.</p>\r\n<p>To avoid this, for example you could try removing the <strong>createRegionManagerScope </strong>parameter when adding the <strong>\"</strong><em>CustomerSummaryView</em><strong>\" </strong>in your \"<em>CustomerDataModule</em>\".</p>\r\n<p>I hope you find this useful,</p>\r\n<p>Agustin Adami<a href=\"http://blogs.southworks.net/aadami\"><br /> http://blogs.southworks.net/aadami</a></p>",
    "PostedDate": "2012-08-27T08:09:23.33-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "904713",
    "ThreadId": "393142",
    "Html": "<p>Thank you very much Agustin!!!!</p>",
    "PostedDate": "2012-08-27T11:33:16.373-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]