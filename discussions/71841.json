[
  {
    "Id": "245149",
    "ThreadId": "71841",
    "Html": "<p>Hi,</p>\r\n<p>I've got some fade-in/fade-out animations that are triggered when a view is removed and added to a region. The initial fade-in works fine, but a fade-in after a fade-out is clipped. &nbsp;The animation timeline is set to 500 ms. &nbsp;This problem doesn't happen when I boost the timeline to a value closer to 1000ms. &nbsp;By 'clipped', I mean that the last part of the fade-in animation might appear (say 20ms out of 500 ms) or it just doesn't appear to be an animated fade-in. &nbsp;</p>\r\n<p>First, a 'leave' animation is triggered and the following&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">this.VisibilityService.LeaveViewAnimation(screen.View, () =&gt;</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mainRegion.Deactivate(screen.View);</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mainRegion.Remove(screen.View);</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; IScreen newScreen = EnsureScreenExists(args.ScreenKey, args.ScreenSubject, args.RegionName);</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ShowScreen(args.ScreenKey, args.RegionName);</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; });</div>\r\n<p>\r\n<p><span style=\"color:#0000ff\">this.VisibilityService.LeaveViewAnimation(screen.View, () =&gt;</span></p>\r\n<p><span style=\"color:#0000ff\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p>\r\n<p><span style=\"color:#0000ff\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mainRegion.Deactivate(screen.View);</span></p>\r\n<p><span style=\"color:#0000ff\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mainRegion.Remove(screen.View);</span></p>\r\n<p><span style=\"color:#0000ff\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; IScreen newScreen = EnsureScreenExists(args.ScreenKey, args.ScreenSubject, args.RegionName);</span></p>\r\n<p><span style=\"color:#0000ff\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ShowScreen(args.ScreenKey, args.RegionName);</span></p>\r\n<p><span style=\"color:#0000ff\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; });</span></p>\r\n<p>\r\n<p><span style=\"color:#0000ff\">public void LeaveViewAnimation(UserControl view, Action onLeaveComplete)</span></p>\r\n<p><span style=\"color:#0000ff\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;{</span></p>\r\n<p><span style=\"color:#0000ff\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;this.LeaveViewVisibilityStoryboard = new Storyboard();</span></p>\r\n<p><span style=\"color:#0000ff\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;this.LeaveViewVisibilityStoryboard.Completed += new EventHandler((sender, e) =&gt; onLeaveComplete());</span></p>\r\n<p><span style=\"color:#0000ff\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;PerformAnimation(view, this.LeaveViewVisibilityStoryboard, 500);</span></p>\r\n<p><span style=\"color:#0000ff\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;this.LeaveViewVisibilityStoryboard.Completed -= new EventHandler((sender, e) =&gt; onLeaveComplete());</span></p>\r\n<p><span style=\"color:#0000ff\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;}</span></p>\r\n</p>\r\n<p><span style=\"color:#0000ff\"><span style=\"color:#000000\">Second, the new view is inserted and activated</span></span></p>\r\n<p><span style=\"color:#0000ff\"><span style=\"color:#000000\">\r\n<p><span style=\"color:#0000ff\">targetRegion.Add(screen.View);</span></p>\r\n<p><span style=\"color:#0000ff\">targetRegion.Activate(screen.View);</span></p>\r\n<p>&nbsp;</p>\r\n<p><span style=\"color:#000000\">Third, a entry animation begins</span></p>\r\n<p><span style=\"color:#0000ff\"><span style=\"color:#0000ff\">this.EnterViewVisibilityStoryboard.Begin();</span></span></p>\r\n<p>&nbsp;</p>\r\n<p><span style=\"color:#0000ff\"><span style=\"color:#000000\">I've left out some intermediary code for the setup of the animations. &nbsp;</span></span></p>\r\n<p>Is the problem related to the timing of view loading events???</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></span></p>\r\n</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>",
    "PostedDate": "2009-10-13T10:00:46.3-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]