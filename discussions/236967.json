[
  {
    "Id": "530479",
    "ThreadId": "236967",
    "Html": "\r\n<p>Hi,</p>\r\n<p>I have a Shell page that has a ContentControl with a Region marked on it call MainRegion. I load a module into the region using RequestNavigate. All this is done through MEF. The module accepts a parameter which I pass as&nbsp; UriQuery and it is picked\r\n up correctly by the view model &#65279;(which implements INavigationAware) of the view being loaded.</p>\r\n<p>The view model looks something like this</p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre><div style=\"color:black; background-color:white\"><pre>[Export(<span style=\"color:blue\">typeof</span>(IViewModel))]\r\n[RegionMemberLifetime(KeepAlive = <span style=\"color:blue\">false</span>)]\r\n<span style=\"color:blue\">public</span> <span style=\"color:blue\">class</span> ViewModel : IViewModel, INavigationAware\r\n{\r\n<span style=\"color:blue\">public</span> <span style=\"color:blue\">void</span> OnNavigatedTo(NavigationContext navigationContext)\r\n        {\r\n            Id = Convert.ToInt32(navigationContext.Parameters[<span style=\"color:#a31515\">&quot;Id&quot;</span>]);\r\n        }\r\n\r\n        <span style=\"color:blue\">public</span> <span style=\"color:blue\">bool</span> IsNavigationTarget(NavigationContext navigationContext)\r\n        {\r\n            <span style=\"color:blue\">return</span> <span style=\"color:blue\">true</span>;\r\n        }\r\n\r\n        <span style=\"color:blue\">public</span> <span style=\"color:blue\">void</span> OnNavigatedFrom(NavigationContext navigationContext)\r\n        {\r\n        }\r\n}\r\n\r\n</pre>\r\n</div>\r\n</pre>\r\n</div>\r\n<p>And the view looks like this</p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre>[Export(<span style=\"color:#a31515\">&quot;MyView&quot;</span>)]\r\n[PartCreationPolicy(CreationPolicy.NonShared)] <span style=\"color:green\">// want the view to be created each time</span>\r\n<span style=\"color:blue\">public</span> <span style=\"color:blue\">class</span> MyView : UserControl\r\n{\r\n     <span style=\"color:blue\">public</span> MyView()\r\n     {\r\n          InitializeComponent();\r\n     }\r\n\r\n     [Import]\r\n     <span style=\"color:blue\">public</span> IViewModel Model\r\n     {\r\n         <span style=\"color:blue\">get</span> { <span style=\"color:blue\">return</span> (IViewModel)DataContext; }\r\n         <span style=\"color:blue\">set</span> { DataContext = value; }\r\n     }\r\n}\r\n</pre>\r\n</div>\r\n<p>It all&nbsp;works fine so far. Now when I click on a link&nbsp;in my view which simply calls the HtmlPage.Window.Navigate to the same module with a different parameter, the MyView doesnt seem to get recreated. It just goes into the OnNavigated event in the\r\n ViewModel and repopulates the data in it with the new Id passed.</p>\r\n<p>I noticed that in the RegionManager, the current MyView was in the ActiveViews list. I thought when we set KeepAlive false in a SingleActiveRegion (ContentControlRegionAdapter)&nbsp;it will deactivate the view and remove it from the region as well. But it\r\n doesnt seem to do that.</p>\r\n<p>Has anyone faced this issue before ? I'm kind of stuck at the moment.</p>\r\n<p>As a workaround I'm having to do this in the OnNavigatedFrom</p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre><span style=\"color:blue\">public</span> <span style=\"color:blue\">void</span> OnNavigatedFrom(NavigationContext navigationContext)\r\n{\r\n     <span style=\"color:blue\">var</span> mainRegion = _regionManager.Regions[<span style=\"color:#a31515\">&quot;MainRegion&quot;</span>];\r\n     mainRegion.Deactivate(mainRegion.ActiveViews.SingleOrDefault());\r\n}\r\n\r\n</pre>\r\n</div>\r\n<p>By doing this the MyViwe gets recreated each time I navigate to it.</p>\r\n",
    "PostedDate": "2010-12-02T21:57:12.183-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "530780",
    "ThreadId": "236967",
    "Html": "\r\n<p>Hi,</p>\r\n<p>The behavior you are reporting is by design. Based on my understanding, you are trying to create a new instance of your view every time you navigate into it<span style=\"color:#1f497d\">.</span> Setting the\r\n<a href=\"http://msdn.microsoft.com/en-us/library/microsoft.practices.prism.regions.iregionmemberlifetime.keepalive%28PandP.38%29.aspx\">\r\nKeepAlive</a> property to <em>false</em> will result in the view being removed once deactivated, but will not remove the view by itself. Therefore, it is ok to deactivate your active view in the\r\n<strong>OnNavigatedFrom </strong>method. For more information about this region behavior, you can check\r\n<a href=\"http://msdn.microsoft.com/en-us/library/microsoft.practices.prism.regions.behaviors.regionmemberlifetimebehavior%28PandP.38%29.aspx\">\r\nthis article</a> from the Prism MSDN documentation.</p>\r\n<p>Also, take into account that you cannot load modules, but rather views into regions. You can find more information about this<span style=\"color:#1f497d\">\r\n</span>in<span style=\"color:#1f497d\"> <a href=\"View.aspx?ThreadId=236854\">this thread</a></span>.</p>\r\n<p>Guido Leandro Maliandi <br>\r\n<a href=\"http://blogs.southworks.net/gmaliandi\">http://blogs.southworks.net/gmaliandi</a></p>\r\n",
    "PostedDate": "2010-12-03T10:05:13.59-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "531089",
    "ThreadId": "236967",
    "Html": "\r\n<p>Hi Guido,</p>\r\n<p>Thanks for the response. That helps. Of course when I referred to loading a module in region I meant loading a view in the Module.</p>\r\n<p>I'm going to take the path of deactivating the view when navigating to it again as I need that behavior.</p>\r\n",
    "PostedDate": "2010-12-04T04:56:42.63-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "811282",
    "ThreadId": "236967",
    "Html": "<p>Hi Guido,</p>\r\n<p>Sorry to open up this thread again. As per the above discussion we went with view deactivation from the OnNavigatedFrom of the view model. This however results in the Loaded event&nbsp;of the view to be called again after the OnNavigatedFrom,&nbsp;and results in intermediate errors with region creation, i.e. the region with the given name already exists in the region collection. Of course this doesnt happen each time, but does happen quite often.</p>\r\n<p>By&nbsp;commenting out the deactivation bit, we dont get that error anymore. However we lose the behavior we wanted, i.e. recreation of view and viewmodel everytime. Now we are planning to resort to resetting values in the viewmodel each time we get into it&nbsp;consequtively for different parameters.</p>\r\n<p>We have a sample app reproducing this issue, but I cannot upload it from my workplace. Will try and get something for you guys to check soon.</p>\r\n<p>Thanks.</p>",
    "PostedDate": "2012-03-16T01:27:59.327-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]