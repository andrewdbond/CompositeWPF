[
  {
    "Id": "1338494",
    "ThreadId": "576688",
    "Html": "Hi!\r<br />\n<br />\nI am trying to use MahApps metro with my wpf prism application but i have issues creating custom region adapter for Flyouts... I have created custom adapter for StackPanel which works fine if it is loaded in grid of the shell but MahApps metro uses this for loading flyouts<br />\n<pre><code>&lt;Controls:MetroWindow.Flyouts&gt;\n        &lt;Controls:FlyoutsControl x:Name=&quot;flyoutsControl&quot;&gt;\n            &lt;Controls:Flyout Header=&quot;Accented&quot;\n                                Position=&quot;Right&quot;\n                                Theme=&quot;Accent&quot; &gt;\n                &lt;StackPanel cal:RegionManager.RegionName=&quot;StackPanelRegion&quot; /&gt;\n            &lt;/Controls:Flyout&gt;\n&lt;/Controls:MetroWindow.Flyouts&gt;</code></pre>\n\nfor the testing purposes i use code behind and i call the flyout like this<br />\n<pre><code>private void ShowAccent(object sender, RoutedEventArgs e)\n        {\n            this.ToggleFlyout(0);      \n        }</code></pre>\n\nand i call the view that i want to navigate to in the flyout like this<br />\n<pre><code>private void Button_Click(object sender, EventArgs e)\n        {\n            IRegionManager regionManager = ServiceLocator.Current.GetInstance&lt;IRegionManager&gt;();\n\n            if (regionManager == null) throw new ArgumentNullException(&quot;regionManager&quot;);\n\n            regionManager.RequestNavigate(RegionNames.StackPanelRegion,\n                               new Uri(&quot;Test3&quot;, UriKind.Relative));\n        }</code></pre>\n\nI tried loading the wiew on ,odule load but than i get null region exception. If i load it with button click and put break point, there are no errors but also no StackPanelRegion in regionManager...\r<br />\n<br />\nthis is my custom adapter<br />\n<pre><code>public class StackPanelRegionAdapter : RegionAdapterBase&lt;StackPanel&gt;\n    {\n        public StackPanelRegionAdapter(IRegionBehaviorFactory factory)\n            : base(factory)\n        {\n        }\n        protected override void Adapt(IRegion region, StackPanel regionTarget)\n        {\n            region.ActiveViews.CollectionChanged += (s, e) =&gt;\n            {\n                if(e.Action == NotifyCollectionChangedAction.Add)\n                {\n                    foreach(FrameworkElement element in e.NewItems)\n                    {\n                        regionTarget.Children.Add(element);\n                    }\n                }\n            };\n        }\n\n        protected override IRegion CreateRegion()\n        {\n            return new AllActiveRegion();\n        }\n    }</code></pre>\n\nand my bootstrapper mapping<br />\n<pre><code>protected override RegionAdapterMappings ConfigureRegionAdapterMappings()\n        {\n            RegionAdapterMappings mappings = base.ConfigureRegionAdapterMappings();\n            mappings.RegisterMapping(typeof(StackPanel), Container.Resolve&lt;StackPanelRegionAdapter&gt;());\n            return mappings;\n        }</code></pre>\n\nI know adapter works because if i put it inside of the shell grid, region is registered and view is displayed...<br />\n",
    "PostedDate": "2015-01-02T03:33:06.673-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]