[
  {
    "Id": "166467",
    "ThreadId": "49738",
    "Html": "Hello,<br>\r\n<br>\r\nI am not able to replace the initial view I have in a XBAP application<br>\r\nI've used HelloWorld.Desktop sample. <br>\r\nHere are the changes that I made:<br>\r\n<ul>\r\n    <li>I added another module, which is the same as HelloWorldModule, I simply changed the text it displays.</li>\r\n    <li>I added the module in the Bootstrapper GetModuleCatalog. My new module is added second after the original one</li>\r\n    <li>In HelloWorld.Desktop App.xaml I added StartupUri=&quot;Window1.xaml&quot; to the attributes of Application</li>\r\n    <li>In Window.xaml I changed the Window element to a Page. I also changed the ItemsControl to ContentControl</li>\r\n    <li>In Window.xaml.cs I changed the parent class to be Page (and not Window)</li>\r\n    <li>I added a way to switch the views</li>\r\n    <li><span style=\"font-size:13px;color:#0000ff\">\r\n    <p>private</p>\r\n    </span>\r\n    <p><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#0000ff\">void</span><span style=\"font-size:13px\"> TextBlock_MouseRightButtonUp(</span><span style=\"font-size:13px;color:#0000ff\">object</span><span style=\"font-size:13px\"> sender, </span><span style=\"font-size:13px;color:#2b91af\">MouseButtonEventArgs</span><span style=\"font-size:13px\"> e)\r\n    <p>&nbsp;</p>\r\n    <p>{</p>\r\n    <p>&nbsp;</p>\r\n    </span></p>\r\n    <p><span style=\"font-size:13px;color:#2b91af\">IRegion</span><span style=\"font-size:13px\"> mainRegion = </span><span style=\"font-size:13px;color:#0000ff\">this</span><span style=\"font-size:13px\">.regionManager.Regions[</span><span style=\"font-size:13px;color:#a31515\">&quot;MainRegion&quot;</span><span style=\"font-size:13px\">];\r\n    <p>&nbsp;</p>\r\n    <p>&nbsp;</p>\r\n    </span></p>\r\n    <p><span style=\"font-size:13px;color:#0000ff\">object</span><span style=\"font-size:13px\"> selectorView = mainRegion.Views.ElementAt(1);\r\n    <p>&nbsp;</p>\r\n    <p>mainRegion.Activate(selectorView);</p>\r\n    <p>}</p>\r\n    </span></p>\r\n    </li>\r\n    <li><span style=\"font-size:13px\">\r\n    <p>I removed the line shell.Show(); in the Bootstrapper.cs</p>\r\n    </span></li>\r\n</ul>\r\n<span style=\"font-size:13px\">\r\n<p>So, if the shell is a Window and shell.Show exists than switching the views works. However, the xbap scenario that I need it doesn't.<br>\r\n<br>\r\nI clearly need some help to make it work.<br>\r\n<br>\r\nThanks,<br>\r\nmihael</p>\r\n</span>\r\n<p> </p>\r\n",
    "PostedDate": "2009-03-10T08:58:14.08-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "166635",
    "ThreadId": "49738",
    "Html": "<p style=\"margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm\"><span style=\"font-family:calibri\">Hi Mihael,</span><span> </span></p><p style=\"margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm\"><span style=\"font-family:calibri\"> </span></p><p style=\"margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm\"><span style=\"font-family:calibri\">[Updated] The workaroundsuggested here might not work in all scenarios. To address this problem pleasetake a look at the following post below or at the blog&lt;o:p&gt;<span style=\"color:rgb(48, 51, 45);font-family:'segoe ui';font-size:13px\"><span style=\"font-size:10pt;font-family:symbol;font:normal normal normal 7pt/normal 'times new roman'\">   </span><span style=\"font-size:11pt;font-family:calibri, sans-serif\"><a href=\"http://blogs.southworks.net/matiasb/2009/03/11/using-cal-with-xbap-applications/\" title=\"Permanent Link to Using CAL with XBAP Applications\" style=\"text-decoration:underline;color:rgb(62, 98, 166)\"><span></span></a><a href=\"http://blogs.southworks.net/matiasb/2009/03/11/using-cal-with-xbap-applications/\" title=\"Permanent Link to Using CAL with XBAP Applications\" style=\"text-decoration:underline;color:rgb(62, 98, 166)\">Migrating Composite Application Guidance (Prism-v2) to XBAP.</a></span></span>&lt;/o:p&gt;</span></p><p style=\"margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm\"><span style=\"color:rgb(48, 51, 45);font-family:calibri;font-size:15px\"><br></span></p><p style=\"margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm\"><span style=\"font-family:calibri\">We were able to reproduce the error you mentioned and we found a possible workaround. Take into account that this is just a workaround and it's not a recommended  best practice, since the CALs source code is being modified. We tested it with your scenario but it might not work on some other situations. To implement the workaround follow these steps:</span></p><p style=\"margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:36pt\"><span><span style=\"font-family:calibri\">1.</span><span style=\"font:normal normal normal 7pt/normal 'times new roman'\">       </span></span><span style=\"font-family:calibri\">In the <strong>Microsoft.Practices.Composite.Presentation.Regions.ContentControlRegionAdapter</strong> class declare a private instance variable of ContentControl type named RegionTarget:</span></p><p style=\"margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm\"><span style=\"font-family:calibri\">                               </span><span style=\"font-family:'courier new';font-size:10pt\">private ContentControl RegionTarget;</span></p><p style=\"margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:36pt\"><span><span style=\"font-family:calibri\">2.</span><span style=\"font:normal normal normal 7pt/normal 'times new roman'\">       </span></span><span style=\"font-family:calibri\">Inside the <strong>Adapt</strong> method set the private variable RegionTarget to the regionTarget parameter:</span></p><p style=\"margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:69.6pt\"><span style=\"font-family:'courier new';font-size:10pt\">this.RegionTarget = regionTarget</span><span style=\"font-family:calibri;font-size:10pt\">;</span></p><p style=\"margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:36pt\"><span><span style=\"font-family:calibri\">3.</span><span style=\"font:normal normal normal 7pt/normal 'times new roman'\">       </span></span><span style=\"font-family:calibri\">In the delagate for the <strong>CollectionChanged</strong> event, replace the line: </span></p><p style=\"margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:69.6pt\"><span style=\"font-family:'courier new';font-size:10pt\">regionTarget.Content = region.ActiveViews.FirstOrDefault();</span></p><p style=\"margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:34.2pt\"><span style=\"font-family:calibri\">for the following one: </span></p><p style=\"margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:69.6pt\"><span style=\"font-family:'courier new';font-size:10pt\">this.RegionTarget.Content = region.ActiveViews.FirstOrDefault();</span></p><p style=\"margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:69.6pt\"><span style=\"font-family:'courier new';font-size:10pt\"> </span></p><p style=\"margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:0cm\"><span style=\"font-family:calibri\">The <strong>Adapt</strong> method's outcome should be similar to the following: </span></p><p style=\"margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:69.6pt\"><span style=\"font-family:'courier new';font-size:10pt\">this.RegionTarget = regionTarget;           </span></p><p style=\"margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:-1.2pt\"><span style=\"font-family:'courier new';font-size:10pt\">            region.ActiveViews.CollectionChanged += delegate</span></p><p style=\"margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:-1.2pt\"><span style=\"font-family:'courier new';font-size:10pt\">            {</span></p><p style=\"margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:-1.2pt\"><span style=\"font-family:'courier new';font-size:10pt\">                this.RegionTarget.Content = region.ActiveViews.FirstOrDefault();           </span></p><p style=\"margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:-1.2pt\"><span style=\"font-family:'courier new';font-size:10pt\">            </span><span style=\"font-family:'courier new';font-size:10pt\">};</span></p><p style=\"margin-top:0cm;margin-right:0cm;margin-bottom:0pt;margin-left:-0.6pt\"><span style=\"font-family:calibri\"> </span></p><span style=\"font-family:calibri, sans-serif;font-size:11pt\">Matias Bonaventura <br><a href=\"http://blogs.southworks.net/matiasb\"><span style=\"color:rgb(0, 0, 255)\">http://blogs.southworks.net/matiasb</span></a></span>",
    "PostedDate": "2009-03-10T15:16:16.29-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "166910",
    "ThreadId": "49738",
    "Html": "It worked in the real application as well.<br>\r\nThanks Matias.<br>\r\nMihael\r\n",
    "PostedDate": "2009-03-11T08:31:07.47-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "167439",
    "ThreadId": "49738",
    "Html": "<p><span style=\"font-size:15px;font-family:calibri\"></span></p>\r\n<p style=\"margin:0cm 0cm 0pt\"><span lang=EN-US style=\"font-size:11pt;font-family:calibri, sans-serif\">Thanks, I'm glad it worked out.</span></p>\r\n<p style=\"margin:0cm 0cm 0pt\"><span lang=EN-US style=\"font-size:11pt;font-family:calibri, sans-serif\">After testing and researching a bit more on this issue I realized that even though the previous solution works for the scenario you have, the core problem was not being addressed.</span></p>\r\n<p style=\"margin:0cm 0cm 0pt\"><span lang=EN-US style=\"font-size:11pt;font-family:calibri, sans-serif\">Although modifying the <strong>ContentControlRegionAdapter </strong>solves<strong> </strong>the issue, the real problem is that you are creating 2 instances of the <strong>Shell</strong> page (one is being created on the bootstrapper and another is being created by the WPF framework when you specify the <strong>starupUri</strong>).</span></p>\r\n<p style=\"margin:0cm 0cm 0pt\"><span lang=EN-US style=\"font-size:11pt;font-family:calibri, sans-serif\"> </span></p>\r\n<p style=\"margin:0cm 0cm 0pt\"><span lang=EN-US style=\"font-size:11pt;font-family:calibri, sans-serif\">To overcome this, there is a better solution that is less intrusive (you don't need tochange CAL's code) and that will prevent other errors you might have in the future. You might find<span style=\"color:#1f497d\"> </span><span style=\"color:#000000\">useful the following post in <a href=\"http://blogs.southworks.net/matiasb/\">my blog</a> that </span>explains this with more detail:</span></p>\r\n<p style=\"margin-left:24.45pt;text-indent:-18pt\"><span style=\"font-size:10pt;font-family:symbol\">·<span style=\"font:7pt 'times new roman'\">        </span></span><span style=\"font-size:11pt;font-family:calibri, sans-serif\"><a href=\"http://blogs.southworks.net/matiasb/2009/03/11/using-cal-with-xbap-applications/\" title=\"Permanent Link to Using CAL with XBAP Applications\"><span></span></a><a href=\"http://blogs.southworks.net/matiasb/2009/03/11/using-cal-with-xbap-applications/\" title=\"Permanent Link to Using CAL with XBAP Applications\">Migrating Composite Application Guidance (Prism-v2) to XBAP</a></span></p>\r\n<p style=\"margin:0cm 0cm 0pt\"><span lang=EN-US style=\"font-size:11pt;font-family:calibri, sans-serif\"> </span></p>\r\n<p style=\"margin:0cm 0cm 0pt\"><span lang=EN-US style=\"font-size:11pt;font-family:calibri, sans-serif\">Hope it helps!</span></p>\r\n<p style=\"margin:0cm 0cm 0pt\"><span style=\"font-size:11pt;font-family:calibri, sans-serif\"></span></p>\r\n<p style=\"margin:0cm 0cm 0pt\"><span style=\"font-size:11pt;font-family:calibri, sans-serif\">Matias Bonaventura <br>\r\n</span><span lang=EN-US style=\"font-size:11pt;font-family:calibri, sans-serif\"><a href=\"http://blogs.southworks.net/matiasb\"><span lang=ES-AR>http://blogs.southworks.net/matiasb</span></a></span></p>\r\n<p><span style=\"font-size:11pt;color:#1f497d\"> </span></p>\r\n<p><span style=\"font-size:11pt;color:#1f497d\"> </span></p>\r\n<p> </p>\r\n",
    "PostedDate": "2009-03-12T09:37:00.943-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]