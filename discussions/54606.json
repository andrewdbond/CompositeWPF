[
  {
    "Id": "184110",
    "ThreadId": "54606",
    "Html": "<p>I have recently changed a delegate command's type from object to Guid.  Now when my applications starts up this block of code errors out:<br>\r\n<br>\r\n<span style=\"font-size:13px\">\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">bool</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">ICommand</span><span style=\"font-size:13px\">.CanExecute(</span><span style=\"font-size:13px;color:#0000ff\">object</span><span style=\"font-size:13px\"> parameter)\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">return</span><span style=\"font-size:13px\"> CanExecute((T)parameter);\r\n<p>&nbsp;</p>\r\n<p>}<br>\r\n<br>\r\nThe excetion is this:  Object reference not set to an instance of an object.<br>\r\n<br>\r\nMy problem is that I have no idea where in my code this problem is occurring.  The call stack shows only two lines the line for the call to CanExecute and   [External Code].<br>\r\n<br>\r\nI have reviewed all my xaml to make sure that all instances of a command reference to the Guid typed DelegateCommand also have a CommandParameter binding to a non null Guid.<br>\r\n<br>\r\nCan anybody suggest anything that will help root cause this issue?  If anyone can explain when this code is called and what would call it so I can add some breakpoints it would help.<br>\r\n<br>\r\nThanks!<br>\r\nStewart</p>\r\n</span></p>\r\n",
    "PostedDate": "2009-04-27T09:00:12.903-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "184142",
    "ThreadId": "54606",
    "Html": "OK.  I figured out the issue and learned a few things in the process that I thought I would share.<br>\r\n<br>\r\n1. <strong>Pay Attention to When You Initialize Your View</strong> - I am using the MVVM pattern for constructing my views.  My ViewModel is taking IView as a parameter in the constructor.  My Views constructor is empty and has one line of code &quot;<span style=\"font-size:13px\">InitializeComponent();&quot;.  This caused all of my data binding in the XAML to happen before my ViewModel was constructed (the unity container was instantiating the view and calling it's constructor before the view model).  To fix this I moved the InitializeComponent(); line of code to the setter property of the ViewModel for the view.  It looks like this:<br>\r\n<br>\r\n<span style=\"font-size:13px\">\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px;color:#0000ff\">public</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">IKeyNavigatorViewModel</span><span style=\"font-size:13px\"> Model<br>\r\n{<br>\r\n    </span><span style=\"font-size:13px;color:#0000ff\">set<br>\r\n    </span><span style=\"font-size:13px\">{    <br>\r\n        </span><span style=\"font-size:13px;color:#0000ff\">this</span><span style=\"font-size:13px\">.model = </span><span style=\"font-size:13px;color:#0000ff\">value</span><span style=\"font-size:13px\">;<br>\r\n        </span><span style=\"font-size:13px;color:#0000ff\">this</span><span style=\"font-size:13px\">.DataContext = </span><span style=\"font-size:13px;color:#0000ff\">value</span><span style=\"font-size:13px\">;<br>\r\n        InitializeComponent();<br>\r\n    }<br>\r\n}<br>\r\n<br>\r\nAfter this change my XAML binding wasn't occuring until after the ViewModel was constructed and the data context for the view had been set.  Unfortunately, I was still getting the error above.  So my next point:<br>\r\n<br>\r\n2.  <strong>Set Your CommandParameter Attributes Fist</strong> - Turns out I was defining my CommandParameter attribute after my Command attribute in the XAML.  Like so:<br>\r\n<br>\r\n<span style=\"font-size:13px;color:#a31515\"><span style=\"font-size:13px;color:#a31515\">\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span>\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px;color:#0000ff\">&lt;</span><span style=\"font-size:13px;color:#a31515\">Button</span><span style=\"font-size:13px;color:#ff0000\"> Canvas.Left</span><span style=\"font-size:13px;color:#0000ff\">=&quot;142&quot;</span><span style=\"font-size:13px;color:#ff0000\"> Canvas.Top</span><span style=\"font-size:13px;color:#0000ff\">=&quot;323.492&quot; <br>\r\n</span><span style=\"font-size:13px;color:#ff0000\">Command</span><span style=\"font-size:13px;color:#0000ff\">=&quot;{</span><span style=\"font-size:13px;color:#a31515\">Binding</span><span style=\"font-size:13px;color:#ff0000\"> NavigateBusinessContextCommand</span><span style=\"font-size:13px;color:#0000ff\">}&quot; </span><span style=\"font-size:13px;color:#ff0000\"><br>\r\nCommandParameter</span><span style=\"font-size:13px;color:#0000ff\">=&quot;{</span><span style=\"font-size:13px;color:#a31515\">Binding</span><span style=\"font-size:13px;color:#ff0000\"> BusinessContextEnvironmentId</span><span style=\"font-size:13px;color:#0000ff\">}&quot; </span><span style=\"font-size:13px;color:#ff0000\"><br>\r\nCursor</span><span style=\"font-size:13px;color:#0000ff\">=&quot;Hand&quot;</span><span style=\"font-size:13px;color:#ff0000\"> Height</span><span style=\"font-size:13px;color:#0000ff\">=&quot;25&quot;</span><span style=\"font-size:13px;color:#ff0000\"> Opacity</span><span style=\"font-size:13px;color:#0000ff\">=&quot;0&quot;</span><span style=\"font-size:13px;color:#ff0000\"> Panel.ZIndex</span><span style=\"font-size:13px;color:#0000ff\">=&quot;2&quot; </span><span style=\"font-size:13px;color:#ff0000\">Width</span><span style=\"font-size:13px;color:#0000ff\"><span style=\"font-size:13px;color:#0000ff\">=&quot;80&quot; /&gt;\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p>The CanExecute method above is called when the Command attribute is binding; before the CommandParameter is set.  I finally fixed the issue by swapping the order to this:<br>\r\n<br>\r\n<span style=\"font-size:13px;color:#0000ff\">&lt;</span><span style=\"font-size:13px;color:#a31515\">Button</span><span style=\"font-size:13px;color:#ff0000\"> Canvas.Left</span><span style=\"font-size:13px;color:#0000ff\">=&quot;142&quot;</span><span style=\"font-size:13px;color:#ff0000\"> Canvas.Top</span><span style=\"font-size:13px;color:#0000ff\">=&quot;323.492&quot; <br>\r\n</span><span style=\"font-size:13px;color:#ff0000\">CommandParameter</span><span style=\"font-size:13px;color:#0000ff\">=&quot;{</span><span style=\"font-size:13px;color:#a31515\">Binding</span><span style=\"font-size:13px;color:#ff0000\"> BusinessContextEnvironmentId</span><span style=\"font-size:13px;color:#0000ff\">}&quot; </span><span style=\"font-size:13px;color:#ff0000\"><br>\r\n<span style=\"color:#ff0000\">Command</span><span style=\"font-size:13px;color:#0000ff\">=&quot;{</span><span style=\"font-size:13px;color:#a31515\">Binding</span><span style=\"font-size:13px;color:#ff0000\"> NavigateBusinessContextCommand</span><span style=\"font-size:13px;color:#0000ff\">}&quot; </span><span style=\"font-size:13px;color:#ff0000\"><br>\r\n</span>Cursor</span><span style=\"font-size:13px;color:#0000ff\">=&quot;Hand&quot;</span><span style=\"font-size:13px;color:#ff0000\"> Height</span><span style=\"font-size:13px;color:#0000ff\">=&quot;25&quot;</span><span style=\"font-size:13px;color:#ff0000\"> Opacity</span><span style=\"font-size:13px;color:#0000ff\">=&quot;0&quot;</span><span style=\"font-size:13px;color:#ff0000\"> Panel.ZIndex</span><span style=\"font-size:13px;color:#0000ff\">=&quot;2&quot; </span><span style=\"font-size:13px;color:#ff0000\">Width</span><span style=\"font-size:13px;color:#0000ff\"><span style=\"font-size:13px;color:#0000ff\">=&quot;80&quot; /&gt;\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p>&nbsp;</p>\r\n<p>Hope this heps!<br>\r\nStewart</p>\r\n</span></p>\r\n</span>\r\n",
    "PostedDate": "2009-04-27T10:03:49.237-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]