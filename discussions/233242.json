[
  {
    "Id": "516188",
    "ThreadId": "233242",
    "Html": "\r\n<p>Very strange and I'm not sure what is going on. &nbsp;I have a <span style=\"font-size:11pt\">\r\ncolleague and I've downloaded his code from source safe. &nbsp;His code runs, mine does not.</span></p>\r\n<p><span style=\"font-size:11pt\">The area in question:</span></p>\r\n<p><span style=\"font-size:11pt\">foreach (Region r in regionManager.Regions)<span>\r\n</span></span></p>\r\n<p><span style=\"font-size:11pt\"><span>&nbsp;</span><span style=\"white-space:pre\">\r\n</span>Debug.WriteLine(r.Name);<span> </span></span></p>\r\n<p><span style=\"font-size:11pt\">Type myType = typeof(MWSMain);&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;\r\n</span></p>\r\n<p><span style=\"font-size:11pt\"><strong>&nbsp;regionManager.RegisterViewWithRegion(&quot;mainRegion&quot;, typeof(MWSMain));</strong></span></p>\r\n<p><span style=\"font-size:medium\"><span style=\"font-size:15px\">On bolded line this is the error:</span></span></p>\r\n<p><span style=\"font-size:medium\"><span style=\"font-size:15px\">System.Collections.Generic.KeyNotFoundException crossed a native/managed boundary&nbsp;&nbsp;Message=The given key was not present in the dictionary.&nbsp;&nbsp;StackTrace:&nbsp;&nbsp; &nbsp; &nbsp;\r\n at System.ThrowHelper.ThrowKeyNotFoundException()&nbsp;&nbsp; &nbsp; &nbsp; at System.Collections.Generic.Dictionary`2.get_Item(TKey key)&nbsp;&nbsp;InnerException:&nbsp;</span></span></p>\r\n<p><span style=\"font-size:medium\"><span style=\"font-size:15px\">The keys are there, as the two lines above execute as expected.</span></span></p>\r\n<p><span style=\"font-size:medium\"><span style=\"font-size:15px\">the part that concerns me is the native/managed boundry.</span></span></p>\r\n<p>&nbsp;</p>\r\n<p><span style=\"font-size:medium\"><span style=\"font-size:15px\">Any help would be wonderful</span></span></p>\r\n",
    "PostedDate": "2010-11-02T16:13:26.81-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "516593",
    "ThreadId": "233242",
    "Html": "\r\n<p>Hi,</p>\r\n<p>Based on my understanding, in your box when you try to register a view in the MainRegion you are receiving an KeyNotFoundException. More specifically it occurs when calling the\r\n<strong>RegisterViewWithRegion</strong> method in the <strong>RegionManager</strong> class.</p>\r\n<p>I am not sure why you are receiving this exception, so could you please share the full exception message as well as the stack trace. On the other hand, if you continue experiencing this error, could you please share a repro sample? For example you could\r\n use <a href=\"http://explore.live.com/windows-live-skydrive\">Windows Live SkyDrive</a>.</p>\r\n<p>Fernando Antivero <br>\r\n<a href=\"http://blogs.southworks.net/fantivero\">http://blogs.southworks.net/fantivero</a></p>\r\n",
    "PostedDate": "2010-11-03T11:22:01.11-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "516654",
    "ThreadId": "233242",
    "Html": "\r\n<p>The code was there, but I'll add it again.</p>\r\n<p>&nbsp;</p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre><span style=\"color:blue\">public</span> <span style=\"color:blue\">void</span> Initialize()\r\n {\r\n\t<span style=\"color:blue\">foreach</span> (Region r <span style=\"color:blue\">in</span> regionManager.Regions)<span style=\"white-space:pre\">\t</span>\r\n\t\tDebug.WriteLine(r.Name);\r\n\tType myType = <span style=\"color:blue\">typeof</span>(MWSMain);</pre>\r\n<pre><span style=\"white-space:pre\">\t</span>// crashes when executing the next line.\r\n         regionManager.RegisterViewWithRegion(<span style=\"color:#a31515\">&quot;mainRegion&quot;</span>, <span style=\"color:blue\">typeof</span>(MWSMain));\r\n}\r\n</pre>\r\n<pre><br></pre>\r\n<pre>Exception detail:</pre>\r\n<pre><pre>System.Collections.Generic.KeyNotFoundException crossed a native/managed boundary\r\n  Message=The given key was not present in the dictionary.\r\n  StackTrace:\r\n       at System.ThrowHelper.ThrowKeyNotFoundException()\r\n       at System.Collections.Generic.Dictionary`2.get_Item(TKey key)\r\n  InnerException: \r\n</pre>\r\n<br></pre>\r\n<pre><br></pre>\r\n<pre>Stack trace:</pre>\r\n<pre><pre> \tmscorlib.dll!System.ThrowHelper.ThrowKeyNotFoundException() &#43; 0x1d bytes\t\r\n \tmscorlib.dll!System.Collections.Generic.Dictionary.this[string].get(string key) &#43; 0x39 bytes\t\r\n \t[Native to Managed Transition]\t\r\n \t[Managed to Native Transition]\t\r\n \tSystem.Windows.dll!System.Windows.IndexerPathStep.ValidIndex(string index) &#43; 0xdd bytes\t\r\n \tSystem.Windows.dll!System.Windows.IndexerPathStep.IsConnected.get() &#43; 0x12 bytes\t\r\n \tSystem.Windows.dll!System.Windows.IndexerPathStep.ConnectToIndexerInSource() &#43; 0x113 bytes\t\r\n \tSystem.Windows.dll!System.Windows.IndexerPathStep.ConnectToIndexer() &#43; 0x35 bytes\t\r\n \tSystem.Windows.dll!System.Windows.IndexerPathStep.ReConnect(object newSource) &#43; 0x21 bytes\t\r\n \tSystem.Windows.dll!System.Windows.PropertyPathListener.ReConnect(object source) &#43; 0x15 bytes\t\r\n \tSystem.Windows.dll!System.Windows.Data.BindingExpression.SourceAcquired() &#43; 0x19 bytes\t\r\n \tSystem.Windows.dll!System.Windows.Data.BindingExpression.System.Windows.IDataContextChangedListener.OnDataContextChanged(object sender, System.Windows.DataContextChangedEventArgs e) &#43; 0x5b bytes\t\r\n \tSystem.Windows.dll!System.Windows.Data.BindingExpression.DataContextChanged(object sender, System.Windows.DataContextChangedEventArgs e) &#43; 0xc bytes\t\r\n \tSystem.Windows.dll!System.Windows.FrameworkElement.OnDataContextChanged(System.Windows.DataContextChangedEventArgs e) &#43; 0x17 bytes\t\r\n \tSystem.Windows.dll!System.Windows.FrameworkElement.OnAncestorDataContextChanged(System.Windows.DataContextChangedEventArgs e = {System.Windows.DataContextChangedEventArgs}) &#43; 0x26 bytes\t\r\n \tSystem.Windows.dll!System.Windows.FrameworkElement.NotifyDataContextChanged(System.Windows.DataContextChangedEventArgs e = {System.Windows.DataContextChangedEventArgs}) &#43; 0xd0 bytes\t\r\n \tSystem.Windows.dll!System.Windows.FrameworkElement.OnAncestorDataContextChanged(System.Windows.DataContextChangedEventArgs e) &#43; 0x32 bytes\t\r\n \tSystem.Windows.dll!System.Windows.FrameworkElement.NotifyDataContextChanged(System.Windows.DataContextChangedEventArgs e = {System.Windows.DataContextChangedEventArgs}) &#43; 0xd0 bytes\t\r\n \tSystem.Windows.dll!System.Windows.FrameworkElement.OnAncestorDataContextChanged(System.Windows.DataContextChangedEventArgs e) &#43; 0x32 bytes\t\r\n \tSystem.Windows.dll!System.Windows.FrameworkElement.NotifyDataContextChanged(System.Windows.DataContextChangedEventArgs e = {System.Windows.DataContextChangedEventArgs}) &#43; 0xd0 bytes\t\r\n \tSystem.Windows.dll!System.Windows.FrameworkElement.OnAncestorDataContextChanged(System.Windows.DataContextChangedEventArgs e) &#43; 0x32 bytes\t\r\n \tSystem.Windows.dll!System.Windows.FrameworkElement.NotifyDataContextChanged(System.Windows.DataContextChangedEventArgs e = {System.Windows.DataContextChangedEventArgs}) &#43; 0xd0 bytes\t\r\n \tSystem.Windows.dll!System.Windows.FrameworkElement.OnTreeParentUpdated(System.Windows.DependencyObject newParent, bool bIsNewParentAlive) &#43; 0x3d bytes\t\r\n \tSystem.Windows.dll!System.Windows.DependencyObject.UpdateTreeParent(MS.Internal.IManagedPeer oldParent = null, MS.Internal.IManagedPeer newParent = {System.Windows.Controls.Grid}, bool bIsNewParentAlive, bool keepReferenceToParent = true) &#43; 0x4e bytes\t\r\n \tSystem.Windows.dll!MS.Internal.FrameworkCallbacks.ManagedPeerTreeUpdate(System.IntPtr oldParentElement, System.IntPtr parentElement, System.IntPtr childElement, byte bIsParentAlive, byte bKeepReferenceToParent, byte bCanCreateParent) &#43; 0xfe bytes\t\r\n \t[Managed to Native Transition]\t\r\n \tSystem.Windows.dll!MS.Internal.XcpImports.Collection_AddValue(System.Windows.PresentationFrameworkCollection collection = {System.Windows.Controls.UIElementCollection}, MS.Internal.CValue value) &#43; 0x2d bytes\t\r\n \tSystem.Windows.dll!MS.Internal.XcpImports.Collection_AddDependencyObject(System.Windows.PresentationFrameworkCollection collection, System.Windows.DependencyObject value = {MWS.MWSMain}) &#43; 0x65 bytes\t\r\n \tSystem.Windows.dll!System.Windows.PresentationFrameworkCollection.AddDependencyObject(System.Windows.DependencyObject value) &#43; 0x36 bytes\t\r\n \tSystem.Windows.dll!System.Windows.Controls.UIElementCollection.AddInternal(System.Windows.UIElement value) &#43; 0xb bytes\t\r\n \tSystem.Windows.dll!System.Windows.Controls.ItemsControl.AddVisualChild(int containerIndex, System.Windows.DependencyObject container = {MWS.MWSMain}, bool needPrepareContainer = true) &#43; 0x5f bytes\t\r\n \tSystem.Windows.dll!System.Windows.Controls.ItemsControl.AddContainerForPosition(System.Windows.Controls.Primitives.GeneratorPosition position) &#43; 0xd9 bytes\t\r\n \tSystem.Windows.dll!System.Windows.Controls.ItemsControl.OnItemsChangedHandler(object sender, System.Windows.Controls.Primitives.ItemsChangedEventArgs args) &#43; 0x5b bytes\t\r\n \tSystem.Windows.dll!System.Windows.Controls.ItemContainerGenerator.OnItemAdded(object item, int index = 0, bool suppressEvent) &#43; 0x201 bytes\t\r\n \tSystem.Windows.dll!System.Windows.Controls.ItemContainerGenerator.System.Windows.Controls.ICollectionChangedListener.OnCollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs args) &#43; 0x9c bytes\t\r\n \tSystem.Windows.dll!System.Windows.Controls.WeakCollectionChangedListener.SourceCollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e) &#43; 0x3d bytes\t\r\n \tSystem.Windows.dll!System.Windows.Controls.ItemCollection.NotifyCollectionChanged(System.Collections.Specialized.NotifyCollectionChangedEventArgs e) &#43; 0x37 bytes\t\r\n \tSystem.Windows.dll!System.Windows.Controls.ItemCollection.System.Windows.Controls.ICollectionChangedListener.OnCollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e) &#43; 0x20 bytes\t\r\n \tSystem.Windows.dll!System.Windows.Controls.ItemCollection.EnumerableCollectionView.System.Windows.Controls.ICollectionChangedListener.OnCollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e) &#43; 0x4f bytes\t\r\n \tSystem.Windows.dll!System.Windows.Controls.WeakCollectionChangedListener.SourceCollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e) &#43; 0x3d bytes\t\r\n \tMicrosoft.Practices.Prism!Microsoft.Practices.Prism.Regions.ViewsCollection.OnCollectionChanged(System.Collections.Specialized.NotifyCollectionChangedEventArgs e = {System.Collections.Specialized.NotifyCollectionChangedEventArgs}) &#43; 0x43 bytes\t\r\n \tMicrosoft.Practices.Prism!Microsoft.Practices.Prism.Regions.ViewsCollection.NotifyAdd(System.Collections.IList items = Count = 1) &#43; 0xb5 bytes\t\r\n \tMicrosoft.Practices.Prism!Microsoft.Practices.Prism.Regions.ViewsCollection.SourceCollectionChanged(object sender = Count = 1, System.Collections.Specialized.NotifyCollectionChangedEventArgs e = {System.Collections.Specialized.NotifyCollectionChangedEventArgs}) &#43; 0x1e6 bytes\t\r\n \tSystem.Windows.dll!System.Collections.ObjectModel.ObservableCollection.OnCollectionChanged(System.Collections.Specialized.NotifyCollectionChangedEventArgs e) &#43; 0x37 bytes\t\r\n \tSystem.Windows.dll!System.Collections.ObjectModel.ObservableCollection.InsertItem(int index, System.__Canon item) &#43; 0x94 bytes\t\r\n \tmscorlib.dll!System.Collections.ObjectModel.Collection.Add(Microsoft.Practices.Prism.Regions.ItemMetadata item) &#43; 0x69 bytes\t\r\n \tMicrosoft.Practices.Prism!Microsoft.Practices.Prism.Regions.Region.InnerAdd(object view = {MWS.MWSMain}, string viewName = null, Microsoft.Practices.Prism.Regions.IRegionManager scopedRegionManager = {Microsoft.Practices.Prism.Regions.RegionManager}) &#43; 0x25f bytes\t\r\n \tMicrosoft.Practices.Prism!Microsoft.Practices.Prism.Regions.Region.Add(object view = {MWS.MWSMain}, string viewName = null, bool createRegionManagerScope = false) &#43; 0x75 bytes\t\r\n \tMicrosoft.Practices.Prism!Microsoft.Practices.Prism.Regions.Region.Add(object view = {MWS.MWSMain}) &#43; 0x2f bytes\t\r\n \tMicrosoft.Practices.Prism!Microsoft.Practices.Prism.Regions.Behaviors.AutoPopulateRegionBehavior.AddViewIntoRegion(object viewToAdd = {MWS.MWSMain}) &#43; 0x34 bytes\t\r\n \tMicrosoft.Practices.Prism!Microsoft.Practices.Prism.Regions.Behaviors.AutoPopulateRegionBehavior.OnViewRegistered(object sender = {Microsoft.Practices.Prism.Regions.RegionViewRegistry}, Microsoft.Practices.Prism.Regions.ViewRegisteredEventArgs e = {Microsoft.Practices.Prism.Regions.ViewRegisteredEventArgs}) &#43; 0xc3 bytes\t\r\n \t[Native to Managed Transition]\t\r\n \t[Managed to Native Transition]\t\r\n \tmscorlib.dll!System.Delegate.DynamicInvokeImpl(object[] args) &#43; 0x76 bytes\t\r\n \tmscorlib.dll!System.Delegate.DynamicInvoke(object[] args) &#43; 0xb bytes\t\r\n \tMicrosoft.Practices.Prism!Microsoft.Practices.Prism.Events.WeakDelegatesManager.Raise(object[] args = {object[2]}) &#43; 0x1b9 bytes\t\r\n \tMicrosoft.Practices.Prism!Microsoft.Practices.Prism.Regions.RegionViewRegistry.OnContentRegistered(Microsoft.Practices.Prism.Regions.ViewRegisteredEventArgs e = {Microsoft.Practices.Prism.Regions.ViewRegisteredEventArgs}) &#43; 0x97 bytes\t\r\n \tMicrosoft.Practices.Prism!Microsoft.Practices.Prism.Regions.RegionViewRegistry.RegisterViewWithRegion(string regionName = &quot;mainRegion&quot;, System.Func&lt;object&gt; getContentDelegate = {System.Func&lt;object&gt;}) &#43; 0x60 bytes\t\r\n \tMicrosoft.Practices.Prism!Microsoft.Practices.Prism.Regions.RegionViewRegistry.RegisterViewWithRegion(string regionName = &quot;mainRegion&quot;, System.Type viewType = {System.RuntimeType}) &#43; 0x8d bytes\t\r\n \tMicrosoft.Practices.Prism!Microsoft.Practices.Prism.Regions.RegionManagerExtensions.RegisterViewWithRegion(Microsoft.Practices.Prism.Regions.IRegionManager regionManager = {Microsoft.Practices.Prism.Regions.RegionManager}, string regionName = &quot;mainRegion&quot;, System.Type viewType = {System.RuntimeType}) &#43; 0x60 bytes\t\r\n&gt;\tMWS!MWS.MWS.Initialize() Line 30 &#43; 0x3f bytes\tC#\r\n \tMicrosoft.Practices.Prism!Microsoft.Practices.Prism.Modularity.ModuleInitializer.Initialize(Microsoft.Practices.Prism.Modularity.ModuleInfo moduleInfo = {Microsoft.Practices.Prism.Modularity.ModuleInfo}) &#43; 0x99 bytes\t\r\n \tMicrosoft.Practices.Prism!Microsoft.Practices.Prism.Modularity.ModuleManager.InitializeModule(Microsoft.Practices.Prism.Modularity.ModuleInfo moduleInfo = {Microsoft.Practices.Prism.Modularity.ModuleInfo}) &#43; 0x40 bytes\t\r\n \tMicrosoft.Practices.Prism!Microsoft.Practices.Prism.Modularity.ModuleManager.LoadModulesThatAreReadyForLoad() &#43; 0x156 bytes\t\r\n \tMicrosoft.Practices.Prism!Microsoft.Practices.Prism.Modularity.ModuleManager.IModuleTypeLoader_LoadModuleCompleted(object sender = {Microsoft.Practices.Prism.Modularity.XapModuleTypeLoader}, Microsoft.Practices.Prism.Modularity.LoadModuleCompletedEventArgs e = {Microsoft.Practices.Prism.Modularity.LoadModuleCompletedEventArgs}) &#43; 0xa1 bytes\t\r\n \tMicrosoft.Practices.Prism!Microsoft.Practices.Prism.Modularity.XapModuleTypeLoader.RaiseLoadModuleCompleted(Microsoft.Practices.Prism.Modularity.LoadModuleCompletedEventArgs e = {Microsoft.Practices.Prism.Modularity.LoadModuleCompletedEventArgs}) &#43; 0x41 bytes\t\r\n \tMicrosoft.Practices.Prism!Microsoft.Practices.Prism.Modularity.XapModuleTypeLoader.RaiseLoadModuleCompleted(Microsoft.Practices.Prism.Modularity.ModuleInfo moduleInfo = {Microsoft.Practices.Prism.Modularity.ModuleInfo}, System.Exception error = null) &#43; 0x46 bytes\t\r\n \tMicrosoft.Practices.Prism!Microsoft.Practices.Prism.Modularity.XapModuleTypeLoader.HandleModuleDownloaded(Microsoft.Practices.Prism.Modularity.DownloadCompletedEventArgs e = {Microsoft.Practices.Prism.Modularity.DownloadCompletedEventArgs}) &#43; 0x249 bytes\t\r\n \tMicrosoft.Practices.Prism!Microsoft.Practices.Prism.Modularity.XapModuleTypeLoader.IFileDownloader_DownloadCompleted(object sender = {Microsoft.Practices.Prism.Modularity.FileDownloader}, Microsoft.Practices.Prism.Modularity.DownloadCompletedEventArgs e = {Microsoft.Practices.Prism.Modularity.DownloadCompletedEventArgs}) &#43; 0x14b bytes\t\r\n \tMicrosoft.Practices.Prism!Microsoft.Practices.Prism.Modularity.FileDownloader.WebClient_OpenReadCompleted(object sender = {System.Net.WebClient}, System.Net.OpenReadCompletedEventArgs e = {System.Net.OpenReadCompletedEventArgs}) &#43; 0x4a bytes\t\r\n \tSystem.Net.dll!System.Net.WebClient.OnOpenReadCompleted(System.Net.OpenReadCompletedEventArgs e) &#43; 0x17 bytes\t\r\n \tSystem.Net.dll!System.Net.WebClient.OpenReadOperationCompleted(object arg) &#43; 0x31 bytes\t\r\n \t[Native to Managed Transition]\t\r\n \t[Managed to Native Transition]\t\r\n \tmscorlib.dll!System.Delegate.DynamicInvokeImpl(object[] args) &#43; 0x76 bytes\t\r\n \tmscorlib.dll!System.Delegate.DynamicInvoke(object[] args) &#43; 0xb bytes\t\r\n \tSystem.Windows.dll!System.Windows.Threading.DispatcherOperation.Invoke() &#43; 0x2b bytes\t\r\n \tSystem.Windows.dll!System.Windows.Threading.Dispatcher.Dispatch(System.Windows.Threading.DispatcherPriority priority) &#43; 0xcc bytes\t\r\n \tSystem.Windows.dll!System.Windows.Threading.Dispatcher.OnInvoke(object context) &#43; 0xa bytes\t\r\n \tSystem.Windows.dll!System.Windows.Hosting.CallbackCookie.Invoke(object[] args) &#43; 0x16 bytes\t\r\n \tSystem.Windows.Browser.dll!System.Windows.Hosting.ScriptingInterface.InvokeDelegate(System.Windows.Hosting.DelegateWrapper delegateWrapper, System.Windows.Hosting.NativeMethods.ScriptParam[] pParams, ref System.Windows.Hosting.NativeMethods.ScriptParam pResult = {System.Windows.Hosting.NativeMethods.ScriptParam}) &#43; 0x28 bytes\t\r\n \tSystem.Windows.Browser.dll!System.Windows.Hosting.ManagedHost.InvokeDelegate(System.IntPtr pHandle, int nParamCount, System.Windows.Hosting.NativeMethods.ScriptParam[] pParams, ref System.Windows.Hosting.NativeMethods.ScriptParam pResult) &#43; 0xe3 bytes\t\r\n \t[Appdomain Transition]\t\r\n&lt;/object&gt;&lt;/object&gt;</pre>\r\n<br></pre>\r\n</div>\r\n",
    "PostedDate": "2010-11-03T13:32:41.08-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "516709",
    "ThreadId": "233242",
    "Html": "\r\n<p>Hi,</p>\r\n<p>I tried to reproduce this issue using the code that you shared and found no issues. Are you using a third-party/custom UI Control exposed as a region?</p>\r\n<p>This is certain strange that it only fails in your box. So, could yo please share a repro sample (application)?</p>\r\n<p>Fernando Antivero <br>\r\n<a href=\"http://blogs.southworks.net/fantivero\">http://blogs.southworks.net/fantivero</a></p>\r\n<p>&nbsp;</p>\r\n",
    "PostedDate": "2010-11-03T14:53:02.667-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "517032",
    "ThreadId": "233242",
    "Html": "\r\n<p>My guess is that the mscorlib is somehow corrupt. &nbsp;I've downloaded the code to a third computer and it works, so it must be something related to my machine and its set up.</p>\r\n",
    "PostedDate": "2010-11-04T06:16:15.92-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "517035",
    "ThreadId": "233242",
    "Html": "\r\n<p>Hi,</p>\r\n<p>I am glad that you found a solution in your scenario. Let me know if you have any other question.</p>\r\n<p>Fernando Antivero <br>\r\n<a href=\"http://blogs.southworks.net/fantivero\">http://blogs.southworks.net/fantivero</a></p>\r\n",
    "PostedDate": "2010-11-04T06:24:40.663-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]