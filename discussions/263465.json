[
  {
    "Id": "635652",
    "ThreadId": "263465",
    "Html": "\r\n<p>I have a popup region that has a view with a child view. The child view has the WindowCloseBehavior.<br>\r\n<br>\r\nThere is a close menu item on my parent view that removes the child and parent view from the popup region.<br>\r\n<br>\r\nWhenever I remove or deactivate the parent view from the popup region, the ActiveViews_CollectionChanged method is called and calls the CloseContentDialog method. When the CloseContentDialog tries to set the Owner to null I get a &ldquo;Cannot set Owner property\r\n after Dialog is shown.&rdquo; exception.<br>\r\n<br>\r\nIf I click the x button on the window everything works properly.<br>\r\n<br>\r\nAny ideas on what I am doing wrong?<br>\r\n<br>\r\nHere is the stack trace if it helps.<br>\r\n<br>\r\n&nbsp;&nbsp; at System.Windows.Window.set_Owner(Window value)<br>\r\n&nbsp;&nbsp; at Framework.WindowWrapper.set_Owner(Object value) in D:\\Projects\\Framework\\Framework\\Behaviors\\WindowWrapper.Desktop.cs:line 83<br>\r\n&nbsp;&nbsp; at Framework.DialogActivationBehavior.CloseContentDialog() in D:\\Projects\\Framework\\Framework\\Behaviors\\DialogActivationBehavior.cs:line 145<br>\r\n&nbsp;&nbsp; at Framework.DialogActivationBehavior.ActiveViews_CollectionChanged(Object sender, NotifyCollectionChangedEventArgs e) in D:\\Projects\\Framework\\Framework\\Behaviors\\DialogActivationBehavior.cs:line 108<br>\r\n&nbsp;&nbsp; at Microsoft.Practices.Prism.Regions.ViewsCollection.OnCollectionChanged(NotifyCollectionChangedEventArgs e)<br>\r\n&nbsp;&nbsp; at Microsoft.Practices.Prism.Regions.ViewsCollection.NotifyRemove(IList items, Int32 originalIndex)<br>\r\n&nbsp;&nbsp; at Microsoft.Practices.Prism.Regions.ViewsCollection.RemoveFromFilteredList(Object item)<br>\r\n&nbsp;&nbsp; at Microsoft.Practices.Prism.Regions.ViewsCollection.SourceCollectionChanged(Object sender, NotifyCollectionChangedEventArgs e)<br>\r\n&nbsp;&nbsp; at System.Collections.Specialized.NotifyCollectionChangedEventHandler.Invoke(Object sender, NotifyCollectionChangedEventArgs e)<br>\r\n&nbsp;&nbsp; at System.Collections.ObjectModel.ObservableCollection`1.OnCollectionChanged(NotifyCollectionChangedEventArgs e)<br>\r\n&nbsp;&nbsp; at System.Collections.ObjectModel.ObservableCollection`1.RemoveItem(Int32 index)<br>\r\n&nbsp;&nbsp; at System.Collections.ObjectModel.Collection`1.Remove(T item)<br>\r\n&nbsp;&nbsp; at Microsoft.Practices.Prism.Regions.Region.Remove(Object view)<br>\r\n&nbsp;&nbsp; at Company.ModuleController.RemoveView(String regionName, String viewName) in D:\\Projects\\Presentation\\Company\\Shell\\Company\\Controllers\\ModuleController.cs:line 122<br>\r\n&nbsp;&nbsp; at Company.Modules.Core.ViewModels.DetailViewModel.CloseView() in D:\\Projects\\Presentation\\Company\\Modules\\Company.Modules.Core\\ViewModels\\Settings\\Settings\\DetailViewModel.cs:line 405<br>\r\n&nbsp;&nbsp; at Company.Modules.Core.ViewModels.DetailViewModel.ExecuteCloseCommand(Object parameter) in D:\\Projects\\Presentation\\Company\\Modules\\Company.Modules.Core\\ViewModels\\Settings\\Settings\\DetailViewModel.cs:line 153<br>\r\n&nbsp;&nbsp; at Framework.SimpleCommand`2.Execute(T2 parameter) in D:\\Projects\\Framework\\Framework\\Commands\\SimpleCommand.cs:line 138<br>\r\n&nbsp;&nbsp; at Framework.SimpleCommand`2.Execute(Object parameter) in D:\\Projects\\Framework\\Framework\\Commands\\SimpleCommand.cs:line 167<br>\r\n&nbsp;&nbsp; at Microsoft.Practices.Prism.Commands.CompositeCommand.Execute(Object parameter)<br>\r\n&nbsp;&nbsp; at MS.Internal.Commands.CommandHelpers.CriticalExecuteCommandSource(ICommandSource commandSource, Boolean userInitiated)<br>\r\n&nbsp;&nbsp; at System.Windows.Controls.MenuItem.InvokeClickAfterRender(Object arg)<br>\r\n&nbsp;&nbsp; at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)<br>\r\n&nbsp;&nbsp; at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)<br>\r\n&nbsp;&nbsp; at System.Windows.Threading.Dispatcher.WrappedInvoke(Delegate callback, Object args, Int32 numArgs, Delegate catchHandler)<br>\r\n&nbsp;&nbsp; at System.Windows.Threading.DispatcherOperation.InvokeImpl()<br>\r\n&nbsp;&nbsp; at System.Windows.Threading.DispatcherOperation.InvokeInSecurityContext(Object state)<br>\r\n&nbsp;&nbsp; at System.Threading.ExecutionContext.runTryCode(Object userData)<br>\r\n&nbsp;&nbsp; at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData)<br>\r\n&nbsp;&nbsp; at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)<br>\r\n&nbsp;&nbsp; at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)<br>\r\n&nbsp;&nbsp; at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)<br>\r\n&nbsp;&nbsp; at System.Windows.Threading.DispatcherOperation.Invoke()<br>\r\n&nbsp;&nbsp; at System.Windows.Threading.Dispatcher.ProcessQueue()<br>\r\n&nbsp;&nbsp; at System.Windows.Threading.Dispatcher.WndProcHook(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean&amp; handled)<br>\r\n&nbsp;&nbsp; at MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean&amp; handled)<br>\r\n&nbsp;&nbsp; at MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)<br>\r\n&nbsp;&nbsp; at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)<br>\r\n&nbsp;&nbsp; at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)<br>\r\n&nbsp;&nbsp; at System.Windows.Threading.Dispatcher.WrappedInvoke(Delegate callback, Object args, Int32 numArgs, Delegate catchHandler)<br>\r\n&nbsp;&nbsp; at System.Windows.Threading.Dispatcher.InvokeImpl(DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Int32 numArgs)<br>\r\n&nbsp;&nbsp; at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)<br>\r\n&nbsp;&nbsp; at MS.Win32.UnsafeNativeMethods.DispatchMessage(MSG&amp; msg)<br>\r\n&nbsp;&nbsp; at System.Windows.Threading.Dispatcher.PushFrameImpl(DispatcherFrame frame)<br>\r\n&nbsp;&nbsp; at System.Windows.Threading.Dispatcher.PushFrame(DispatcherFrame frame)<br>\r\n&nbsp;&nbsp; at System.Windows.Window.ShowHelper(Object booleanBox)<br>\r\n&nbsp;&nbsp; at System.Windows.Window.Show()<br>\r\n&nbsp;&nbsp; at System.Windows.Window.ShowDialog()<br>\r\n<br>\r\n</p>\r\n",
    "PostedDate": "2011-06-30T14:01:06.637-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "636178",
    "ThreadId": "263465",
    "Html": "<p>Hi,</p>\r\n<p>It would be helpful if you could provide us with a repro sample that demonstrates this problem, so that we can help you find the cause for it.</p>\r\n<p>Thanks,</p>\r\n<p>Miguel Bronzovic<br /><a href=\"http://blogs.southworks.net/mbronzovic\">http://blogs.southworks.net/mbronzovic</a></p>\r\n<p>&nbsp;</p>",
    "PostedDate": "2011-07-01T12:53:45.753-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "637642",
    "ThreadId": "263465",
    "Html": "<p>I figured out what the problem was.<br />My shell is not a window, it is a user control. I have a &ldquo;ShellContainer&rdquo; that holds the shell. This allows us to have different shells depending on the theme.<br /><br />In the PrepareContentDialog() method, I needed to change the Owner to: this.contentDialog.Owner = this.HostControl.<strong>GetParentObject();</strong><br /><br />I was also setting the dialog&rsquo;s value to false after the view was removed, which is why I was getting the &ldquo;Cannot set Owner property after Dialog is shown&rdquo;</p>",
    "PostedDate": "2011-07-05T10:38:40.29-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "637644",
    "ThreadId": "263465",
    "Html": "<p>Hi,</p>\r\n<p>I'm glad that you've found a solution to your problem. Thank you for sharing it with the rest of the community.</p>\r\n<p>Guido Leandro Maliandi <br /> <a href=\"http://blogs.southworks.net/gmaliandi\">http://blogs.southworks.net/gmaliandi</a></p>",
    "PostedDate": "2011-07-05T10:41:31.623-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]