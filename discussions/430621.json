[
  {
    "Id": "991117",
    "ThreadId": "430621",
    "Html": "\r\n<p>i use the following code in a controller class to add tabitems (which will contain view\r\n<span style=\"color:#2b91af; font-family:Consolas; font-size:x-small\"><span style=\"color:#2b91af; font-family:Consolas; font-size:x-small\"><span style=\"color:#2b91af; font-family:Consolas; font-size:x-small\">SubsystemDetailsView)</span></span></span><span style=\"font-family:Consolas; font-size:x-small\">\r\n</span>dynamically in the main region in response to some event:</p>\r\n<p><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>\r\n<p>privat <span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\">void</span></span></span><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\">\r\n ShowSubsystemDetails(PreCommissioning.Model.</span></span><span style=\"color:#2b91af; font-family:Consolas; font-size:x-small\"><span style=\"color:#2b91af; font-family:Consolas; font-size:x-small\"><span style=\"color:#2b91af; font-family:Consolas; font-size:x-small\">Subsystem</span></span></span><span style=\"font-family:Consolas; font-size:x-small\">\r\n<span style=\"font-family:Consolas; font-size:x-small\">Subsys) </span></span><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\"></span></span></p>\r\n<p><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\">{</span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>\r\n<p>IRegion <span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\">mainRegion = regionManager.Regions[</span></span><span style=\"color:#2b91af; font-family:Consolas; font-size:x-small\"><span style=\"color:#2b91af; font-family:Consolas; font-size:x-small\"><span style=\"color:#2b91af; font-family:Consolas; font-size:x-small\">RegionName</span></span></span><span style=\"font-family:Consolas; font-size:x-small\">.MainRegion];</span></p>\r\n<p><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\">bool</span></span></span><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\">\r\n alreadyExists = </span></span><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\">false</span></span></span><span style=\"font-family:Consolas; font-size:x-small\">\r\n<span style=\"font-family:Consolas; font-size:x-small\">; </span></span></span></span></p>\r\n<p><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\">foreach</span></span></span><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\">\r\n (</span></span><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\">var</span></span></span><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\">\r\n view </span></span><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\">in</span></span></span><span style=\"font-family:Consolas; font-size:x-small\">\r\n</span></span></span><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\">mainRegion.Views)\r\n</span></span></p>\r\n<p>{</p>\r\n<p><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\">if</span></span></span><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\">\r\n (view </span></span><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\">is</span></span></span><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\">\r\n</span></span><span style=\"color:#2b91af; font-family:Consolas; font-size:x-small\"><span style=\"color:#2b91af; font-family:Consolas; font-size:x-small\"><span style=\"color:#2b91af; font-family:Consolas; font-size:x-small\">SubsystemDetailsView</span></span></span><span style=\"font-family:Consolas; font-size:x-small\">\r\n<span style=\"font-family:Consolas; font-size:x-small\">) </span></span><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\">;</span></span></p>\r\n<p>var <span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\">subsysdetailsViewModel = ((</span></span><span style=\"color:#2b91af; font-family:Consolas; font-size:x-small\"><span style=\"color:#2b91af; font-family:Consolas; font-size:x-small\"><span style=\"color:#2b91af; font-family:Consolas; font-size:x-small\">FrameworkElement</span></span></span><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\">)view).DataContext\r\n</span></span><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\">as</span></span></span><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\">\r\n</span></span><span style=\"color:#2b91af; font-family:Consolas; font-size:x-small\"><span style=\"color:#2b91af; font-family:Consolas; font-size:x-small\"><span style=\"color:#2b91af; font-family:Consolas; font-size:x-small\">SubsystemDetailsViewModel</span></span></span><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\">;</span></span><span style=\"font-family:Consolas; font-size:x-small\">\r\n</span><span style=\"font-family:Consolas; font-size:x-small\"></span></p>\r\n<p><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\">if</span></span></span><span style=\"font-family:Consolas; font-size:x-small\">\r\n<span style=\"font-family:Consolas; font-size:x-small\">(subsysdetailsViewModel.Subsystem == Subsys)\r\n</span></span></p>\r\n<p><span style=\"font-family:Consolas; font-size:x-small\">{ </span></p>\r\n<p>mainRegion.Activate(view);</p>\r\n<p>alreadyExists =<span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\">true</span></span></span><span style=\"font-family:Consolas; font-size:x-small\">;\r\n</span></p>\r\n<p>}</p>\r\n<p>}</p>\r\n<p><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\">if</span></span></span><span style=\"font-family:Consolas; font-size:x-small\">\r\n<span style=\"font-family:Consolas; font-size:x-small\">(!alreadyExists) </span></span></p>\r\n<p><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\"></span></span><span style=\"font-family:Consolas\">{</span></p>\r\n<p>object <span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\">existingView = mainRegion.GetView(</span></span><span style=\"color:#a31515; font-family:Consolas; font-size:x-small\"><span style=\"color:#a31515; font-family:Consolas; font-size:x-small\"><span style=\"color:#a31515; font-family:Consolas; font-size:x-small\">&quot;SubsystemDetailsView&quot;</span></span></span><span style=\"font-family:Consolas; font-size:x-small\">\r\n</span><span style=\"font-family:Consolas; font-size:x-small\">);<span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\">\r\n</span></span></span></p>\r\n<p>existingView =<span style=\"color:#2b91af; font-family:Consolas; font-size:x-small\"><span style=\"color:#2b91af; font-family:Consolas; font-size:x-small\"><span style=\"color:#2b91af; font-family:Consolas; font-size:x-small\">ServiceLocator</span></span></span><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\">.Current.GetInstance&lt;</span></span><span style=\"color:#2b91af; font-family:Consolas; font-size:x-small\"><span style=\"color:#2b91af; font-family:Consolas; font-size:x-small\"><span style=\"color:#2b91af; font-family:Consolas; font-size:x-small\">ISubsystemDetailsView</span></span></span><span style=\"font-family:Consolas; font-size:x-small\">\r\n</span><span style=\"font-family:Consolas; font-size:x-small\">&gt;(); </span></p>\r\n<p>subsystemDetailsViewModel.Subsystem = Subsys;</p>\r\n<p>mainRegion.Add(existingView);</p>\r\n<p>mainRegion.Activate(existingView);</p>\r\n<p><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\"></span></span></span></span></span>}</p>\r\n<p><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"color:#0000ff; font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\"></span></span></span></span></span>}</p>\r\n<p>&nbsp;</p>\r\n<p><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\">the first part of the code loops through open view so if the view already exist it activates it else control go the second part which create new view\r\n in a new tabitem.</span></span></p>\r\n<p><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\"></span></span><span style=\"font-family:Consolas\">my problem is: first part doesn't implement in the right way and tabitems are duplicated and also\r\n the tab header that read from view doen't show up.</span></p>\r\n<p><span style=\"font-family:Consolas\"></span><span style=\"font-family:Consolas\">please help me to fix these problems and if there is better approach to do the same thing (through controller) please advice.</span></p>\r\n<p><span style=\"font-family:Consolas\">thanks in advance</span></p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n",
    "PostedDate": "2013-01-23T10:34:33.267-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "991146",
    "ThreadId": "430621",
    "Html": "\r\n<p>Hi,</p>\r\n<p>I am not aware of the implementations of your views / view models or the requirements of your scenario, but I made some small modifications to the code snippet you posted above. Please let us know if this helps you solve the problem:</p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre><span style=\"color:blue\">private</span> <span style=\"color:blue\">void</span> ShowSubsystemDetails(PreCommissioning.Model.Subsystem Subsys)  \n{\n    IRegion mainRegion = regionManager.Regions[RegionName.MainRegion];\n\n    <span style=\"color:blue\">bool</span> alreadyExists = <span style=\"color:blue\">false</span>;\n    SubsystemDetailsViewModel subsysdetailsViewModel = <span style=\"color:blue\">null</span>;\n\n    <span style=\"color:blue\">foreach</span> (<span style=\"color:blue\">var</span> view <span style=\"color:blue\">in</span> mainRegion.Views)\n    {\n        <span style=\"color:blue\">if</span> (view <span style=\"color:blue\">is</span> SubsystemDetailsView)\n        {\n            subsysdetailsViewModel = ((FrameworkElement)view).DataContext <span style=\"color:blue\">as</span> SubsystemDetailsViewModel;\n\n            <span style=\"color:blue\">if</span>(subsysdetailsViewModel.Subsystem != <span style=\"color:blue\">null</span> &amp;&amp; subsysdetailsViewModel.Subsystem == Subsys)\n            {\n                mainRegion.Activate(view);\n                alreadyExists = <span style=\"color:blue\">true</span>;\n            }\n        }\n\n    }\n\n    <span style=\"color:blue\">if</span> (!alreadyExists)\n    {\n        <span style=\"color:blue\">object</span> newView = ServiceLocator.Current.GetInstance&lt;ISubsystemDetailsView&gt;();\n\n        subsysdetailsViewModel = ((FrameworkElement)newView).DataContext <span style=\"color:blue\">as</span> SubsystemDetailsViewModel;\n        subsysdetailsViewModel.Subsystem = Subsys;\n\n        mainRegion.Add(existingView);\n        mainRegion.Activate(existingView);\n    }\n}\n</pre>\r\n</div>\r\n<p>Remember that after setting the <strong>Subsystem </strong>property you need to raise the\r\n<strong>PropertyChanged </strong>event in order for the view to be notified of this change in the view model.</p>\r\n<p>On the other hand, another possible approach to achieve the scenario you are mentioning could be using\r\n<em><strong>navigation </strong></em>instead of <em><strong>view injection</strong></em> to add the views in the above method. By default\r\n<strong>Prism</strong>'s navigation API provides capabilities to check if a corresponding view already exist in a\r\n<strong>Region</strong> by using parameters in the navigation request. If a matching view is found, that view is activated in the\r\n<strong>Region</strong>; otherwise, a new view is created and added automatically. Once navigated, you can retrieve the\r\n<em><strong>active </strong></em>view in the <strong>Region </strong>and set the corresponding properties in the view model, if needed.</p>\r\n<p>You can find more information about navigation in the following chapter of <strong>\r\nPrism </strong>documentation:</p>\r\n<ul>\r\n<li><a href=\"http://msdn.microsoft.com/en-us/library/gg430861%28v=pandp.40%29.aspx#sec6\">Chapter 8 - Navigation - View-Based Navigation</a>\r\n</li></ul>\r\n<p>Damian Cherubini<br>\r\n<a href=\"http://blogs.southworks.net/dcherubini\">http://blogs.southworks.net/dcherubini</a></p>\r\n",
    "PostedDate": "2013-01-23T12:23:02.62-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "991364",
    "ThreadId": "430621",
    "Html": "\r\n<p>Hi DCherubini,</p>\r\n<p>thanks for your help.my VM is imported into View in the code behind like this:</p>\r\n<p>&nbsp;</p>\r\n<p>[<span style=\"font-family:Consolas; color:#2b91af; font-size:x-small\"><span style=\"font-family:Consolas; color:#2b91af; font-size:x-small\"><span style=\"font-family:Consolas; color:#2b91af; font-size:x-small\">Import</span></span></span><span style=\"font-family:Consolas; font-size:x-small\">\r\n<span style=\"font-family:Consolas; font-size:x-small\">]&nbsp;</span></span></p>\r\n<p><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\">&nbsp;</span></span><span style=\"font-family:Consolas; color:#0000ff; font-size:x-small\"><span style=\"font-family:Consolas; color:#0000ff; font-size:x-small\"><span style=\"font-family:Consolas; color:#0000ff; font-size:x-small\">public</span></span></span><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\">\r\n</span></span><span style=\"font-family:Consolas; color:#2b91af; font-size:x-small\"><span style=\"font-family:Consolas; color:#2b91af; font-size:x-small\"><span style=\"font-family:Consolas; color:#2b91af; font-size:x-small\">ISubsystemDetailsViewModel</span></span></span><span style=\"font-family:Consolas; font-size:x-small\">\r\n<span style=\"font-family:Consolas; font-size:x-small\">VM </span></span></p>\r\n<p><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\">{</span></span></p>\r\n<p><span style=\"font-family:Consolas; font-size:x-small\">&nbsp;</span><span style=\"font-family:Consolas; color:#0000ff; font-size:x-small\"><span style=\"font-family:Consolas; color:#0000ff; font-size:x-small\"><span style=\"font-family:Consolas; color:#0000ff; font-size:x-small\">get</span></span></span><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\">\r\n { </span></span><span style=\"font-family:Consolas; color:#0000ff; font-size:x-small\"><span style=\"font-family:Consolas; color:#0000ff; font-size:x-small\"><span style=\"font-family:Consolas; color:#0000ff; font-size:x-small\">return</span></span></span><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\">\r\n DataContext </span></span><span style=\"font-family:Consolas; color:#0000ff; font-size:x-small\"><span style=\"font-family:Consolas; color:#0000ff; font-size:x-small\"><span style=\"font-family:Consolas; color:#0000ff; font-size:x-small\">as</span></span></span><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\">\r\n</span></span><span style=\"font-family:Consolas; color:#2b91af; font-size:x-small\"><span style=\"font-family:Consolas; color:#2b91af; font-size:x-small\"><span style=\"font-family:Consolas; color:#2b91af; font-size:x-small\">ISubsystemDetailsViewModel</span></span></span><span style=\"font-family:Consolas; font-size:x-small\">\r\n<span style=\"font-family:Consolas; font-size:x-small\">; }<span style=\"font-family:Consolas; font-size:x-small\">\r\n</span></span></span></p>\r\n<p><span style=\"font-family:Consolas; color:#0000ff; font-size:x-small\"><span style=\"font-family:Consolas; color:#0000ff; font-size:x-small\"><span style=\"font-family:Consolas; color:#0000ff; font-size:x-small\">set</span></span></span><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\">\r\n { DataContext = </span></span><span style=\"font-family:Consolas; color:#0000ff; font-size:x-small\"><span style=\"font-family:Consolas; color:#0000ff; font-size:x-small\"><span style=\"font-family:Consolas; color:#0000ff; font-size:x-small\">value</span></span></span><span style=\"font-family:Consolas; font-size:x-small\">\r\n<span style=\"font-family:Consolas; font-size:x-small\">; } </span></span></p>\r\n<p>}</p>\r\n<p>&nbsp;</p>\r\n<p><span style=\"font-family:Consolas; font-size:x-small\">&nbsp;</span>so&nbsp;after applying your modification&nbsp;it through null exception (Object reference not set to an instance of an object.)&nbsp;at</p>\r\n<p>&nbsp;</p>\r\n<div><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\">&nbsp;\r\n<p>subsysdetailsViewModel = ((</p>\r\n</span></span></span><span style=\"font-family:Consolas; color:#2b91af; font-size:x-small\"><span style=\"font-family:Consolas; color:#2b91af; font-size:x-small\"><span style=\"font-family:Consolas; color:#2b91af; font-size:x-small\">FrameworkElement</span></span></span><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\">)newView).DataContext\r\n</span></span><span style=\"font-family:Consolas; color:#0000ff; font-size:x-small\"><span style=\"font-family:Consolas; color:#0000ff; font-size:x-small\"><span style=\"font-family:Consolas; color:#0000ff; font-size:x-small\">as</span></span></span><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\">\r\n</span></span><span style=\"font-family:Consolas; color:#2b91af; font-size:x-small\"><span style=\"font-family:Consolas; color:#2b91af; font-size:x-small\"><span style=\"font-family:Consolas; color:#2b91af; font-size:x-small\">SubsystemDetailsViewModel</span></span></span><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\">;</span></span></div>\r\n<p><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\">&nbsp;</span></span>in the second if block because no views already exist.</p>\r\n<p>&nbsp;**How to replace view injection in my approach&nbsp;by view discovery (using MEF) and Regions but from controller class.</p>\r\n",
    "PostedDate": "2013-01-23T22:34:45.057-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "991645",
    "ThreadId": "430621",
    "Html": "\r\n<p>Hi,</p>\r\n<p>Based on the code snippets mentioned above, I believe that the exception you mentioned could be caused if the\r\n<strong>newView </strong>instance is not being correctly resolved from the container by the\r\n<strong>ServiceLocator </strong>in the above line:</p>\r\n<p></p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre><span style=\"color:blue\">object</span> newView = ServiceLocator.Current.GetInstance&lt;ISubsystemDetailsView&gt;();\r\n</pre>\r\n</div>\r\n<p></p>\r\n<p>For example you could check if you are correctly exporting the <strong>SubsystemDetailsView\r\n</strong>class to the container and mapping it to the corresponding interface for example using the following attributes:</p>\r\n<p></p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre>[Export(<span style=\"color:blue\">typeof</span>(ISubsystemDetailsView))]\r\n[PartCreationPolicy(CreationPolicy.NonShared)]\r\n</pre>\r\n</div>\r\n<p></p>\r\n<p>Also, the view model should be exported similarly if it will&nbsp; be imported using the\r\n<strong>ISubsystemDetailsViewModel VM </strong>property like you mentioned.</p>\r\n<p>Additionally, I found that in this second block the view added and activated should be the\r\n<strong>newView </strong>instance and not the <strong>existingView</strong>. Also, if your view model is being imported to the view using the\r\n<strong>ISubsystemDetailsViewModel</strong>, then the <strong>DataContext </strong>\r\nshould be cast to this interface and not the specific implementation, for example this could look like this:</p>\r\n<p></p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre><span style=\"color:blue\">if</span> (!alreadyExists)\r\n    {\r\n        <span style=\"color:blue\">object</span> newView = ServiceLocator.Current.GetInstance&lt;ISubsystemDetailsView&gt;();\r\n\r\n        subsysdetailsViewModel = ((FrameworkElement)newView).DataContext <span style=\"color:blue\">as</span> ISubsystemDetailsViewModel;\r\n        subsysdetailsViewModel.Subsystem = Subsys;\r\n\r\n        mainRegion.Add(newView);\r\n        mainRegion.Activate(newView);\r\n    }\r\n</pre>\r\n</div>\r\n<p></p>\r\n<p>On the other hand regarding the<strong> UI Composition</strong> approach to use, I don't think that the view discovery approach should be suitable in this case, as based on my understanding of your scenario you will need programmatic control over when the\r\n view is created and displayed in the region in which case using view injection may be more appropriate. You could find more information on when to use one approach or the other in the following chapter of the documentation:</p>\r\n<ul>\r\n<li><a href=\"http://msdn.microsoft.com/en-us/library/ff921098%28v=pandp.40%29.aspx\">7: Composing the User Interface</a>\r\n</li></ul>\r\n<p>I hope this helps,</p>\r\n<p>Agustin Adami<a href=\"http://blogs.southworks.net/aadami\"><br>\r\nhttp://blogs.southworks.net/aadami</a></p>\r\n",
    "PostedDate": "2013-01-24T09:17:03.523-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "991664",
    "ThreadId": "430621",
    "Html": "\r\n<p>Hi Agustin Adami,</p>\r\n<p>i implemented the fixations you mentioned and the code is now working but still problems exist:</p>\r\n<p>1-when i replace SubsystemDetailsViewModel with ISubsystemDetailsViewModel i get this error:</p>\r\n<p>&nbsp; Error&nbsp;2&nbsp;Cannot implicitly convert type 'PreCommissioning.Module.Subsystem.ViewModel.ISubsystemDetailsViewModel' to 'PreCommissioning.Module.Subsystem.ViewModel.SubsystemDetailsViewModel'. An explicit conversion exists (are you missing a\r\n cast?)&nbsp;</p>\r\n<p>2-still duplication happen in views / tabitems: if i tried to duplicate a tab next to itself it is not duplicated, but if different tab in between it will be duplicated.</p>\r\n<p>3-still the tab header that read from&nbsp;SubsystemDetailsViewModel&nbsp;&nbsp;not showing, i use following code in xaml in the tab region for</p>\r\n<p>&nbsp;the ShellWindow (where the view will be displayed)</p>\r\n<p>&nbsp;&lt;TabControl&nbsp; prism:RegionManager.RegionName=&quot;{x:Static inf:RegionNames.MainRegion}&quot;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Cursor=&quot;Hand&quot;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Grid.Row=&quot;0&quot;\r\n<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Grid.Column=&quot;1&quot;&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>\r\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;TabControl.ItemTemplate&gt;</p>\r\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;DataTemplate&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;StackPanel&nbsp; Orientation=&quot;Horizontal&quot;&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n<strong>&lt;TextBlock VerticalAlignment=&quot;Center&quot;</strong><br>\r\n<strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n Margin=&quot;3&quot;</strong><br>\r\n<strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n Text=&quot;{Binding Path=HeaderInfo}&quot;</strong><br>\r\n<strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n /&gt;</strong><br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;!--<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;ContentPresenter\r\n<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Content=&quot;{Binding Path=HeaderInfo}&quot;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; VerticalAlignment=&quot;Center&quot; /&gt;\r\n<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Button<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Command=&quot;{Binding Path=CloseCommand}&quot;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Content=&quot;X&quot;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DockPanel.Dock=&quot;Right&quot;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Padding=&quot;0&quot;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FontSize=&quot;8&quot;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Focusable=&quot;False&quot;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FontWeight=&quot;Bold&quot;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Margin=&quot;3, 0, 0, 0&quot;/&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/StackPanel&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/DataTemplate&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/TabControl.ItemTemplate&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/TabControl&gt;</p>\r\n<p>please advice.<br>\r\n<br>\r\n<br>\r\n</p>\r\n<div id=\"_mcePaste\" style=\"width:1px; height:1px; overflow:hidden; top:0px; left:-10000px\">\r\n&#65279;</div>\r\n",
    "PostedDate": "2013-01-24T09:50:36.71-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "991730",
    "ThreadId": "430621",
    "Html": "\r\n<p>Hi,</p>\r\n<p>It would be helpful if you could provide us with a repro-sample application portraying the behavior you are mentioning so that it could be easier for us to analyze your scenario an help you find the cause behind this error.</p>\r\n<p>Thanks,</p>\r\n<p>Damian Cherubini<br>\r\n<a href=\"http://blogs.southworks.net/dcherubini\">http://blogs.southworks.net/dcherubini</a></p>\r\n",
    "PostedDate": "2013-01-24T12:27:20.537-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "991748",
    "ThreadId": "430621",
    "Html": "\r\n<p>Hi,</p>\r\n<p>it is LOB application using Sql Server Database through Repository and Service layer.</p>\r\n<p>the scenario is: i have a control panel reside in Navigation Region of ShellWindow. it containes list of systems when i select one EA publish the event for which controller in another module subscribe and trigger the method that contains the above code to\r\n display the details of the selected system in the main region.the VM is imported to the view in the code behind and i added above the xaml code for the tabcontrol that represent main&nbsp;region&nbsp;in which code will be displayed.</p>\r\n<p>I hope this clarification could help.&nbsp;</p>\r\n<p>&nbsp;</p>\r\n",
    "PostedDate": "2013-01-24T12:50:25.487-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "991794",
    "ThreadId": "430621",
    "Html": "\r\n<p>Hi,</p>\r\n<p>As a starting point, regarding the problem to show the corresponding <strong>Tab Header</strong>, I believe you could check the bindings used inside the\r\n<strong>DataTemplate</strong>, like the <strong>TextBlock </strong>that defines the header name, take into account that you can't directly bind view models properties from inside a\r\n<strong>DataTemplate</strong> like shown above.</p>\r\n<p>For example I believe you could try the approach mentioned in this <a href=\"http://blog.vivekmehta.com/2011/06/referencing-viewmodel-datacontext-in-prism/\">\r\nblog post</a> , in other words the binding in your <strong>TextBlock </strong>could result in something like this if you want to bind the\r\n<strong>HeaderInfo </strong>property exposed by the view model:</p>\r\n<p></p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre>&lt;TextBlock VerticalAlignment=<span style=\"color:#a31515\">&quot;Center&quot;</span> Margin=<span style=\"color:#a31515\">&quot;3&quot;</span> Text=<span style=\"color:#a31515\">&quot;{Binding Path=DataContext.DataContext.HeaderInfo, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type TabItem}}}&quot;</span>/&gt;\r\n</pre>\r\n</div>\r\n<p></p>\r\n<p>Also, a similar binding should be applied to the button command.</p>\r\n<p>As an alternative approach you could also use <strong>Style setters</strong> to define the\r\n<strong>TabControl.ItemContainerStyle</strong>, as an example of this approach I believe you could check the\r\n<a href=\"http://cid-12a8b70137345033.office.live.com/self.aspx/p%5E0p%20Samples/ImageInTabHeaderSample.zip \">\r\nImageInTabHeaderSample.zip</a> sample proposed in this <a href=\"http://compositewpf.codeplex.com/workitem/6002\">\r\nWork Item</a>.</p>\r\n<p>Regarding the duplicated views so far, I couldn't find the cause of this behavior based on the information you provided.<br>\r\n<br>\r\nRegards,</p>\r\n<p>Agustin Adami<a href=\"http://blogs.southworks.net/aadami\"><br>\r\nhttp://blogs.southworks.net/aadami</a></p>\r\n",
    "PostedDate": "2013-01-24T14:20:37.013-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "991863",
    "ThreadId": "430621",
    "Html": "\r\n<p>Hi,</p>\r\n<p>1-Thanks Adami it is another problem solved, the problem of showing HeaderInfo in the Tab Header.</p>\r\n<p>2-For the tabs duplication problem:</p>\r\n<p>&nbsp;i found when inserting Breakpoint @ open { of the following block</p>\r\n<p>&nbsp;if (subsysdetailsViewModel.Subsystem != null &amp;&amp; subsysdetailsViewModel.Subsystem == Subsys)<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff0000\"><strong> {</strong></span><br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mainRegion.Activate(view);<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alreadyExists = true;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>\r\n<p>i found that the breakpoint is hit only in one situation when i try to open same tabitem following to itself but if there is different tab in between the brakpoint is not hit meaning that condition &quot;subsysdetailsViewModel.Subsystem == Subsys&quot; compare current\r\n tab with the previous one only not with all open tabs.</p>\r\n<p>**May be the View (SubsystemDetailsView) and the view model (SubsystemDetailsViewModel) should not be constructed</p>\r\n<p>&nbsp;&nbsp; by the container??</p>\r\n<p>3-If there is diffrent apprach like using&nbsp; <span style=\"font-family:Consolas; color:#008000; font-size:x-small\">\r\n<span style=\"font-family:Consolas; color:#008000; font-size:x-small\"><span style=\"font-family:Consolas; color:#008000; font-size:x-small\">UriQuery\r\n<span style=\"color:#000000\">class</span>&nbsp;<span style=\"color:#000000\">or so, may it will be simpler or better</span></span></span></span></p>\r\n<p><span style=\"font-family:Consolas; color:#008000; font-size:x-small\"><span style=\"font-family:Consolas; color:#008000; font-size:x-small\"><span style=\"font-family:Consolas; color:#008000; font-size:x-small\"><span style=\"color:#000000\">thanks for your always\r\n useful help.</span></span></span></span></p>\r\n<p><span style=\"font-family:Consolas; color:#008000; font-size:x-small\"><span style=\"font-family:Consolas; color:#008000; font-size:x-small\"><span style=\"font-family:Consolas; color:#008000; font-size:x-small\">&nbsp;</span></span></span></p>\r\n",
    "PostedDate": "2013-01-24T21:39:02.757-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "992106",
    "ThreadId": "430621",
    "Html": "\r\n<p>Hi,</p>\r\n<p>After analyzing this in further detail, I believe that the reason of the duplicated views behavior is that<strong> subsysdetailsViewModel.Subsystem == Subsys</strong> condition will be true only if you pass the same instance of the\r\n<strong>Subsystem </strong>class and it will not consider if they inner values match. And as each view model may have its own instance of this class with its corresponding values. Then I believe you should consider filtering this, by using for example and\r\n<strong>Id </strong>property in this class. For example like this:</p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre><span style=\"color:blue\">if</span> (subsysdetailsViewModel.Subsystem != <span style=\"color:blue\">null</span> &amp;&amp; subsysdetailsViewModel.Subsystem.ID == Subsys.ID)\n{<br>...\n}\n</pre>\r\n</div>\r\n<p>On the hand, I believe that an alternative to this approach which uses a <strong>\r\nURI </strong>to identify the view to be displayed, could be by benefiting of the <strong>\r\nPrism</strong>'s navigation <strong>API </strong>as Damian Cherubini mentioned above. This approach will let you pass a parameter during the navigation request which could be used to check if the existing views in the region will be able to handle the the navigation\r\n request or not (by using the <strong>IsNavigationTarget </strong>method in the <strong>\r\nINavigationAware </strong>interface which can be implemented in your views / view models), this way for example you could pass an\r\n<strong>ID </strong>as the parameter, which could identify your specific <strong>\r\nSubsystem </strong>to check if the view already exist, or if not you could use the\r\n<strong>OnNavigatedTo </strong>method defined in this same interface to initialize the newly displayed view based on the parameter passed.</p>\r\n<p>For more detailed information on how to implement this particular approach you could check the\r\n<a href=\"http://msdn.microsoft.com/en-us/library/gg430861%28v=pandp.40%29.aspx#sec6\">\r\nView-Based Navigation</a> sections of the documentation.</p>\r\n<p>I hope you find this handy,</p>\r\n<p>Agustin Adami<a href=\"http://blogs.southworks.net/aadami\"><br>\r\nhttp://blogs.southworks.net/aadami</a></p>\r\n",
    "PostedDate": "2013-01-25T07:20:51.13-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "992123",
    "ThreadId": "430621",
    "Html": "\r\n<p>Hi,</p>\r\n<p>1-first i want to thank Agustin Adami & Damian Cherubini for their advice and persistance about solving the problems i'm facing.</p>\r\n<p>2-I modified the condition to &quot;</p>\r\n<p><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\"></p>\r\n<p>subsysdetailsViewModel.Subsystem.SubsystemNo == Subsys.SubsystemNo&quot;</p>\r\n</span></span>\r\n<p></p>\r\n<p><span style=\"font-family:Consolas; font-size:x-small\"></span>where SubsystemNo is like id but duplication still exist.i think no problem with the condition with its previous state because</p>\r\n<p><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\">&#65279;</span></span>as i mentioned above it working in one case when i try to duplicate tabitem next to itself, duplication eleminated,</p>\r\n<p><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\">&#65279;</span></span>but if different tab in between duplication take place meaning that that condition compare the new tab under creation</p>\r\n<p><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\">&#65279;</span></span>with the previous one only not with all open tabs maybe there is a problem with looping through all open tabs.may be becuase</p>\r\n<p><span style=\"font-family:Consolas; font-size:x-small\"><span style=\"font-family:Consolas; font-size:x-small\">&#65279;</span></span>MEF create the objects where it should be created through view outside mef ...</p>\r\n",
    "PostedDate": "2013-01-25T07:59:12.81-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "992170",
    "ThreadId": "430621",
    "Html": "\r\n<p>Hi,</p>\r\n<p>I created a small spike application based in the approach mentioned above. Perhaps, you could find it useful to compare with your own implementation and check the differences with it.</p>\r\n<p>You can find it in my <a href=\"https://skydrive.live.com/?cid=7890102B5B8BC928&id=7890102B5B8BC928!103\">\r\nSkydrive account</a>&nbsp; under the name: <em><strong>TabControlDynamicTabItems</strong></em>.<br>\r\n<br>\r\nRegards,</p>\r\n<p>Agustin Adami<a href=\"http://blogs.southworks.net/aadami\"><br>\r\nhttp://blogs.southworks.net/aadami</a></p>\r\n",
    "PostedDate": "2013-01-25T09:37:31.573-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "992180",
    "ThreadId": "430621",
    "Html": "\r\n<p>Hi,</p>\r\n<p>thanks for your effort and concern i will compare carefully your spike with my code to find out where the problem is</p>\r\n<p>then i will give you the feedback.</p>\r\n",
    "PostedDate": "2013-01-25T10:01:58.313-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "992222",
    "ThreadId": "430621",
    "Html": "\r\n<p>Hi,</p>\r\n<p>OOOOK, i found the bug, and i'm sorry for wasting your time and my time</p>\r\n<p>the error is</p>\r\n<p>[Export(typeof(ISubsystemDetailsViewModel))]<br>\r\n&nbsp;&nbsp;&nbsp; [PartCreationPolicy(CreationPolicy.<strong><span style=\"color:#ff0000\">Shared</span></strong>)]<br>\r\n&nbsp;&nbsp;&nbsp; public class SubsystemDetailsViewModel:INotifyPropertyChanged, ISubsystemDetailsViewModel</p>\r\n<p>{...............</p>\r\n<p>that what caused duplication of tabitems.</p>\r\n<p>thank you Adami also thank you DCherubini. now i can sleep .........for today [:)]</p>\r\n",
    "PostedDate": "2013-01-25T12:26:28.103-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]