[
  {
    "Id": "139059",
    "ThreadId": "41898",
    "Html": "Hi<br>\r\n<br>\r\nI'm building an application, that has a MainRegion that will be used by all the modules.<br>\r\n<br>\r\nWhen each module is loaded, it adds a button to a toolbar, that activates de module. <br>\r\n<br>\r\nI've wired a DelegateCommand to this button, that calls this code on the module:<br>\r\n<br>\r\n<span style=\"color:#0000ff;font-size:13px\"><span style=\"color:#0000ff;font-size:13px\">\r\n<p>private</p>\r\n</span>\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px\"> </span><span style=\"color:#0000ff;font-size:13px\">void</span><span style=\"font-size:13px\"> ActivateView()\r\n<p>&nbsp;</p>\r\n<p>{<br>\r\n    </p>\r\n</span></p>\r\n<p><span style=\"color:#2b91af;font-size:13px\">IChampionshipsPresenter</span><span style=\"font-size:13px\"> presenter = _container.Resolve&lt;</span><span style=\"color:#2b91af;font-size:13px\">IChampionshipsPresenter</span><span style=\"font-size:13px\">&gt;();<br>\r\n    </span><span style=\"color:#2b91af;font-size:13px\">IRegion</span><span style=\"font-size:13px\"> mainRegion = _regionManager.Regions[</span><span style=\"color:#a31515;font-size:13px\">&quot;MainRegion&quot;</span><span style=\"font-size:13px\">];<br>\r\n<br>\r\n    </span><span style=\"color:#0000ff;font-size:13px\">if</span><span style=\"font-size:13px\"> (!mainRegion.Views.Contains(presenter.View) )<br>\r\n        mainRegion.Add(presenter.View);<br>\r\n<br>\r\n    mainRegion.Activate(presenter.View);<br>\r\n}<br>\r\n<br>\r\nThe problem is that each time this code gets called, it adds a new view. I've debugged the app, and the View is in Reagions.Views collection, but the Views.Contains(presenter.View) always returns false.<br>\r\n<br>\r\nThe xaml for the MainRegion is:<br>\r\n<br>\r\n<span style=\"color:#0000ff;font-size:13px\"><span style=\"color:#0000ff;font-size:13px\">\r\n<p>&nbsp;</p>\r\n<p>&lt;</p>\r\n</span>\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"color:#a31515;font-size:13px\">TabControl</span><span style=\"color:#ff0000;font-size:13px\"> cwpf</span><span style=\"color:#0000ff;font-size:13px\">:</span><span style=\"color:#ff0000;font-size:13px\">RegionManager.RegionName</span><span style=\"color:#0000ff;font-size:13px\">=&quot;MainRegion&quot;</span><span style=\"font-size:13px\"> </span><span style=\"color:#ff0000;font-size:13px\">Margin</span><span style=\"color:#0000ff;font-size:13px\"><span style=\"color:#0000ff;font-size:13px\">=&quot;1,1,1,1&quot;/&gt;\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p>Any ideia on whats going on?<br>\r\n<br>\r\nThanks</p>\r\n</span></p>\r\n",
    "PostedDate": "2008-12-09T10:19:10.603-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "139674",
    "ThreadId": "41898",
    "Html": "<p style=\"margin:0in 0in 0pt\"><span style=\"font-family:calibri\">Hi Pedro,</span></p>\r\n<p style=\"margin:0in 0in 0pt\"><span style=\"font-family:calibri\"> </span></p>\r\n<p style=\"margin:0in 0in 0pt\"><span style=\"font-family:calibri\">The <b>Contains</b> method verifies is the view instance passed as a parameter is inside the region. The problem is that you are creating a new instance of the view (through the presenter) every time that command is executed.</span></p>\r\n<p style=\"margin:0in 0in 0pt\"><span style=\"font-family:calibri\">To solve this, you can add a named view using the overload in the <b>Add</b> method of the region. Then you can check if that named view is in the region by using the <b>GetView</b> method without need of creating a new instance every time. Check the following sample code:</span></p>\r\n<p style=\"margin:0in 0in 0pt\"><span style=\"font-family:calibri\"> </span></p>\r\n<p style=\"margin:0in 0in 0pt -1.15pt\"><span style=\"font-size:10pt;color:blue;font-family:'courier new'\">private void</span><span style=\"font-size:10pt;font-family:'courier new'\"> ActivateView()</span></p>\r\n<p style=\"margin:0in 0in 0pt\"><span style=\"font-size:10pt;font-family:'courier new'\">{</span></p>\r\n<p style=\"margin:0in 0in 0pt 0.5in\"><span style=\"font-size:10pt;color:#2b91af;font-family:'courier new'\">IRegion</span><span style=\"font-size:10pt;font-family:'courier new'\"> mainRegion = _regionManager.Regions[<span style=\"color:#a31515\">&quot;MainRegion&quot;</span>];</span></p>\r\n<p style=\"margin:0in 0in 0pt 0.5in\"><span style=\"font-size:10pt;color:blue;font-family:'courier new'\">object</span><span style=\"font-size:10pt;font-family:'courier new'\"> view = mainRegion.GetView(<span style=\"color:#a31515\">&quot;MyView&quot;</span>);</span> </p>\r\n<p style=\"margin:0in 0in 0pt 0.5in\"><span style=\"font-size:10pt;font-family:'courier new'\"> </span></p>\r\n<p style=\"margin:0in 0in 0pt 0.5in\"><span style=\"font-size:10pt;color:blue;font-family:'courier new'\">if</span> <span style=\"font-size:10pt;font-family:'courier new'\">(view == </span><span style=\"font-size:10pt;color:blue;font-family:'courier new'\">null</span><span style=\"font-size:10pt;font-family:'courier new'\">)</span></p>\r\n<p style=\"margin:0in 0in 0pt 0.5in\"><span style=\"font-size:10pt;font-family:'courier new'\">{</span></p>\r\n<p style=\"margin:0in 0in 0pt 1in\"><span style=\"font-size:10pt;color:#2b91af;font-family:'courier new'\">IChampionshipsPresenter</span><span style=\"font-size:10pt;font-family:'courier new'\"> presenter = _container.Resolve&lt;<span style=\"color:#2b91af\">IChampionshipsPresenter</span>&gt;();</span></p>\r\n<p style=\"margin:0in 0in 0pt 1in\"><span style=\"font-size:10pt;font-family:'courier new'\">view = presenter.View;</span></p>\r\n<p style=\"margin:0in 0in 0pt 70.85pt\"><span style=\"font-size:10pt;font-family:'courier new'\">mainRegion.Add(</span><span style=\"font-size:10pt;font-family:'courier new'\">view</span><span style=\"font-size:10pt;font-family:'courier new'\">, <span style=\"color:#a31515\">&quot;MyView&quot;</span>);</span> </p>\r\n<p style=\"margin:0in 0in 0pt 34.85pt\"><span style=\"font-size:10pt;font-family:'courier new'\">}</span></p>\r\n<p style=\"margin:0in 0in 0pt 0.5in\"><span style=\"font-size:10pt;font-family:'courier new'\"> </span></p>\r\n<p style=\"margin:0in 0in 0pt 0.5in\"><span style=\"font-size:10pt;font-family:'courier new'\">mainRegion.Activate(view);</span></p>\r\n<p style=\"margin:0in 0in 0pt\"><span style=\"font-size:10pt;font-family:'courier new'\">}</span></p>\r\n<p style=\"margin:0in 0in 0pt\"><span style=\"color:#1f497d;font-family:calibri\"> </span></p>\r\n<p style=\"margin:0in 0in 0pt\"><span style=\"font-family:calibri\">You can find more samples in the <b>UI composition Quickstart</b>, where named views are used to show the information of every employee.</span></p>\r\n<p style=\"margin:0in 0in 0pt\"><b><span style=\"font-family:calibri\"> </span></b></p>\r\n<p style=\"margin:0in 0in 0pt\"><span style=\"font-family:calibri\">Please let me know if this helps.</span></p>\r\n<p style=\"margin:0in 0in 0pt -0.6pt\"><span style=\"font-family:calibri\"> </span></p>\r\n<p style=\"margin:0in 0in 0pt -0.6pt\"><span style=\"font-family:calibri\">Mariano Converti</span></p>\r\n<span style=\"font-size:11pt;font-family:'calibri','sans-serif'\"><a href=\"http://blogs.southworks.net/mconverti\">http://blogs.southworks.net/mconverti</a></span>\r\n",
    "PostedDate": "2008-12-11T06:06:10.897-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]