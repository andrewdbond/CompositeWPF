[
  {
    "Id": "599058",
    "ThreadId": "254341",
    "Html": "\r\n<p>View XAML:</p>\r\n<p></p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre><span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">UserControl</span> <span style=\"color:red\">x:Class</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">MES.Modules.Main.Navigation.NavigationListView</span><span style=\"color:black\">&quot;</span>\r\n                    <span style=\"color:red\">xmlns:ad</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">clr-namespace:AvalonDock;assembly=AvalonDock</span><span style=\"color:black\">&quot;</span>\r\n                    <span style=\"color:red\">Name</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">this</span><span style=\"color:black\">&quot;</span>\r\n             <span style=\"color:red\">xmlns</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">http://schemas.microsoft.com/winfx/2006/xaml/presentation</span><span style=\"color:black\">&quot;</span>\r\n             <span style=\"color:red\">xmlns:x</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">http://schemas.microsoft.com/winfx/2006/xaml</span><span style=\"color:black\">&quot;</span>\r\n             <span style=\"color:red\">xmlns:mc</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">http://schemas.openxmlformats.org/markup-compatibility/2006</span><span style=\"color:black\">&quot;</span> \r\n             <span style=\"color:red\">xmlns:extToolkit</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">clr-namespace:Microsoft.Windows.Controls;assembly=WPFToolkit.Extended</span><span style=\"color:black\">&quot;</span> \r\n             <span style=\"color:red\">xmlns:d</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">http://schemas.microsoft.com/expression/blend/2008</span><span style=\"color:black\">&quot;</span> \r\n             <span style=\"color:red\">mc:Ignorable</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">d</span><span style=\"color:black\">&quot;</span> \r\n            \r\n             <span style=\"color:red\">d:DesignHeight</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">300</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">d:DesignWidth</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">300</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">&gt;</span>\r\n    <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">UserControl.Resources</span><span style=\"color:blue\">&gt;</span>\r\n        <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">CollectionViewSource</span> <span style=\"color:red\">Source</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">{Binding}</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">x:Key</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">cvs1</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">/&gt;</span>\r\n        <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Style</span> <span style=\"color:red\">x:Key</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">LinkButton</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">TargetType</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Button</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">&gt;</span>\r\n            <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Setter</span> <span style=\"color:red\">Property</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Template</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">&gt;</span>\r\n                <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Setter.Value</span><span style=\"color:blue\">&gt;</span>\r\n                    <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">ControlTemplate</span> <span style=\"color:red\">TargetType</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Button</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">&gt;</span>\r\n                        <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">ControlTemplate.Resources</span><span style=\"color:blue\">&gt;</span>\r\n                            <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Style</span> <span style=\"color:red\">TargetType</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">{x:Type TextBlock}</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">&gt;</span>\r\n                                <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Setter</span> <span style=\"color:red\">Property</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">TextDecorations</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">Value</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Underline</span><span style=\"color:black\">&quot;</span> <span style=\"color:blue\">/&gt;</span>\r\n                            <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">Style</span><span style=\"color:blue\">&gt;</span>\r\n                        <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">ControlTemplate.Resources</span><span style=\"color:blue\">&gt;</span>\r\n                        <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">ContentPresenter</span> <span style=\"color:blue\">/&gt;</span>\r\n                    <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">ControlTemplate</span><span style=\"color:blue\">&gt;</span>\r\n                <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">Setter.Value</span><span style=\"color:blue\">&gt;</span>\r\n            <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">Setter</span><span style=\"color:blue\">&gt;</span>\r\n            <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Setter</span> <span style=\"color:red\">Property</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Foreground</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">Value</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Blue</span><span style=\"color:black\">&quot;</span> <span style=\"color:blue\">/&gt;</span>\r\n            <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Setter</span> <span style=\"color:red\">Property</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Cursor</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">Value</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Hand</span><span style=\"color:black\">&quot;</span> <span style=\"color:blue\">/&gt;</span>\r\n            <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Style.Triggers</span><span style=\"color:blue\">&gt;</span>\r\n                <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Trigger</span> <span style=\"color:red\">Property</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">IsMouseOver</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">Value</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">true</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">&gt;</span>\r\n                    <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Setter</span> <span style=\"color:red\">Property</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Foreground</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">Value</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Red</span><span style=\"color:black\">&quot;</span> <span style=\"color:blue\">/&gt;</span>\r\n                <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">Trigger</span><span style=\"color:blue\">&gt;</span>\r\n            <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">Style.Triggers</span><span style=\"color:blue\">&gt;</span>\r\n        <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">Style</span><span style=\"color:blue\">&gt;</span>\r\n        \r\n             \r\n        <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">HierarchicalDataTemplate</span> <span style=\"color:red\">x:Key</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">NavigationTemplate</span><span style=\"color:black\">&quot;</span> \r\n                                  <span style=\"color:red\">ItemsSource</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">{Binding Path=SubNavItemList}</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">&gt;</span>\r\n            <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Grid</span><span style=\"color:blue\">&gt;</span>\r\n                <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Button</span> <span style=\"color:red\">Content</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">{Binding Name}</span><span style=\"color:black\">&quot;</span> \r\n                        <span style=\"color:red\">Style</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">{StaticResource LinkButton}</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">&gt;</span>\r\n                    <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Button.InputBindings</span> <span style=\"color:blue\">&gt;</span>\r\n                        <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">MouseBinding</span> <span style=\"color:red\">Gesture</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">LeftDoubleClick</span><span style=\"color:black\">&quot;</span> \r\n                                          <span style=\"color:red\">Command</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">{Binding Path=NavItemDoubleClickCommand,Source={StaticResource cvs1}}</span><span style=\"color:black\">&quot;</span>\r\n                                          <span style=\"color:red\">CommandParameter</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">{Binding}</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">/&gt;</span>\r\n                    <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">Button.InputBindings</span><span style=\"color:blue\">&gt;</span>\r\n\r\n                <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">Button</span><span style=\"color:blue\">&gt;</span>\r\n                \r\n            <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">Grid</span><span style=\"color:blue\">&gt;</span>\r\n        <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">HierarchicalDataTemplate</span><span style=\"color:blue\">&gt;</span>\r\n    <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">UserControl.Resources</span><span style=\"color:blue\">&gt;</span>\r\n    \r\n    <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Grid</span> <span style=\"color:red\">x:Name</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">LayoutRoot</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">&gt;</span>\r\n        <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Grid</span><span style=\"color:blue\">&gt;</span>\r\n            <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Grid.RowDefinitions</span><span style=\"color:blue\">&gt;</span>\r\n                <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">RowDefinition</span><span style=\"color:blue\">/&gt;</span>\r\n                <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">RowDefinition</span> <span style=\"color:blue\">/&gt;</span>\r\n            <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">Grid.RowDefinitions</span><span style=\"color:blue\">&gt;</span>\r\n            \r\n                <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">TreeView</span>  <span style=\"color:red\">x:Name</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">NavigatinTreeView</span><span style=\"color:black\">&quot;</span>\r\n                  <span style=\"color:red\">ItemsSource</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">{Binding Model}</span><span style=\"color:black\">&quot;</span>\r\n                  <span style=\"color:red\">ItemTemplate</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">{StaticResource NavigationTemplate}</span><span style=\"color:black\">&quot;</span> \r\n                  <span style=\"color:red\">Style</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">{StaticResource NavigationTreeViewStyle}</span><span style=\"color:black\">&quot;</span>                 \r\n                  <span style=\"color:blue\">&gt;</span>\r\n                  \r\n\r\n        <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">TreeView</span><span style=\"color:blue\">&gt;</span>\r\n        \r\n        <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">extToolkit</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">BusyIndicator</span> <span style=\"color:red\">IsBusy</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">{Binding Path=IsBusy}</span><span style=\"color:black\">&quot;</span>  <span style=\"color:red\">BusyContent</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Downloading email...</span><span style=\"color:black\">&quot;</span> <span style=\"color:blue\">&gt;</span>\r\n\r\n        <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">extToolkit</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">BusyIndicator</span><span style=\"color:blue\">&gt;</span>\r\n            <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Button</span> Name =&quot;Button1&quot; <span style=\"color:red\">Grid.Row</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\"> 1</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">Content</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Test</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">Click</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Button_Click</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">&gt;</span>\r\n                \r\n            <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">Button</span><span style=\"color:blue\">&gt;</span>\r\n\r\n        <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">Grid</span><span style=\"color:blue\">&gt;</span>\r\n\r\n    <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">Grid</span><span style=\"color:blue\">&gt;</span>\r\n<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">UserControl</span><span style=\"color:#a31515\"><span style=\"color:#0000ff\">&gt;</span></span></pre>\r\n<pre><span style=\"color:#a31515\"><span style=\"color:#0000ff\"><br></span></span></pre>\r\n<pre><span style=\"color:#0000ff\">Behind Code:</span></pre>\r\n<pre><span style=\"color:#0000ff\"><div style=\"color:black; background-color:white\"><pre><span style=\"color:blue\">using</span> System.ComponentModel.Composition;\r\n<span style=\"color:blue\">using</span> System.Windows.Controls;\r\n<span style=\"color:blue\">using</span> System.Diagnostics.CodeAnalysis;\r\n<span style=\"color:blue\">using</span> MES.Infrastructure;\r\n<span style=\"color:blue\">using</span> AvalonDock;\r\n<span style=\"color:blue\">using</span> System.Windows.Data;\r\n\r\n<span style=\"color:blue\">namespace</span> MES.Modules.Main.Navigation\r\n{\r\n    [ViewExport(RegionName = RegionNames.MainRegion, ViewName = <span style=\"color:#a31515\">&quot;NavigationListView&quot;</span>)]\r\n    [PartCreationPolicy(CreationPolicy.NonShared)]\r\n    <span style=\"color:blue\">public</span> <span style=\"color:blue\">partial</span> <span style=\"color:blue\">class</span> NavigationListView : UserControl \r\n    {\r\n        <span style=\"color:blue\">public</span> NavigationListView()\r\n        {\r\n            InitializeComponent();\r\n        }\r\n\r\n        [Import]\r\n        [SuppressMessage(<span style=\"color:#a31515\">&quot;Microsoft.Design&quot;</span>, <span style=\"color:#a31515\">&quot;CA1044:PropertiesShouldNotBeWriteOnly&quot;</span>, Justification = <span style=\"color:#a31515\">&quot;Needs to be a property to be composed by MEF&quot;</span>)]\r\n        <span style=\"color:blue\">public</span> NavItemListViewModel ViewModel\r\n        {\r\n            <span style=\"color:blue\">set</span>\r\n            {\r\n                <span style=\"color:blue\">this</span>.DataContext = value;\r\n            }\r\n        }\r\n\r\n        <span style=\"color:blue\">private</span> <span style=\"color:blue\">void</span> Button1_Click(<span style=\"color:blue\">object</span> sender, System.Windows.RoutedEventArgs e)\r\n        {\r\n            Button cmd = (Button)sender;\r\n\r\n            CollectionViewSource src = (CollectionViewSource)cmd.FindResource(<span style=\"color:#a31515\">&quot;cvs1&quot;</span>);\r\n           \r\n        }\r\n    }\r\n}\r\n\r\n</pre>\r\n</div>\r\nViewModel:</span></pre>\r\n<pre><span style=\"color:#0000ff\"><div style=\"color:black; background-color:white\"><pre><span style=\"color:blue\">using</span> System;\r\n<span style=\"color:blue\">using</span> Csla.Xaml;\r\n<span style=\"color:blue\">using</span> Csla;\r\n<span style=\"color:blue\">using</span> System.ComponentModel.Composition;\r\n<span style=\"color:blue\">using</span> Microsoft.Practices.Prism.Events;\r\n<span style=\"color:blue\">using</span> System.Windows.Input;\r\n<span style=\"color:blue\">using</span> Microsoft.Practices.Prism.Commands;\r\n<span style=\"color:blue\">using</span> Microsoft.Practices.Prism.Regions;\r\n<span style=\"color:blue\">using</span> Microsoft.Practices.ServiceLocation;\r\n<span style=\"color:blue\">using</span> MES.Modules.Main.Models;\r\n<span style=\"color:blue\">using</span> MES.Infrastructure;\r\n<span style=\"color:blue\">namespace</span> MES.Modules.Main.Navigation\r\n{\r\n    [Export(<span style=\"color:blue\">typeof</span>(NavItemListViewModel))]\r\n    [PartCreationPolicy(CreationPolicy.NonShared)]\r\n    <span style=\"color:blue\">public</span> <span style=\"color:blue\">class</span> NavItemListViewModel:ViewModel&lt;NavItemList&gt;\r\n    {\r\n         <span style=\"color:blue\">#region</span> Private members\r\n\r\n        <span style=\"color:blue\">private</span> <span style=\"color:blue\">readonly</span> IRegionManager regionManager;\r\n        <span style=\"color:blue\">private</span> <span style=\"color:blue\">readonly</span> IEventAggregator eventAggregator;\r\n\r\n        <span style=\"color:blue\">#endregion</span>\r\n\r\n        <span style=\"color:blue\">#region</span> Commandes\r\n\r\n     \r\n        <span style=\"color:blue\">public</span> ICommand NavItemDoubleClickCommand { <span style=\"color:blue\">get</span>; <span style=\"color:blue\">private</span> <span style=\"color:blue\">set</span>; }\r\n             \r\n\r\n        <span style=\"color:blue\">#endregion</span>\r\n\r\n\r\n        <span style=\"color:blue\">#region</span> Constructor\r\n        [ImportingConstructor]\r\n        <span style=\"color:blue\">public</span> NavItemListViewModel(IRegionManager regionManager, IEventAggregator eventAggregator)\r\n        {\r\n\r\n            <span style=\"color:blue\">this</span>.InitializeCommands();\r\n\r\n            <span style=\"color:blue\">this</span>.regionManager = regionManager;\r\n            <span style=\"color:blue\">this</span>.eventAggregator = eventAggregator;\r\n\r\n            InitData();\r\n\r\n        }\r\n\r\n        <span style=\"color:blue\">#endregion</span>\r\n\r\n        <span style=\"color:blue\">#region</span> InitializeCommands Method\r\n               \r\n        <span style=\"color:blue\">public</span> <span style=\"color:blue\">void</span> InitializeCommands()\r\n        {\r\n            NavItemDoubleClickCommand = <span style=\"color:blue\">new</span> DelegateCommand&lt;<span style=\"color:blue\">object</span>&gt;(NavItemDoubleClick);\r\n        }\r\n\r\n        <span style=\"color:blue\">#endregion</span>\r\n\r\n        <span style=\"color:blue\">void</span> InitData()\r\n        {\r\n            BeginRefresh(<span style=\"color:#a31515\">&quot;GetAll&quot;</span>);\r\n        }\r\n\r\n\r\n        <span style=\"color:blue\">private</span> <span style=\"color:blue\">void</span> NavItemDoubleClick(<span style=\"color:blue\">object</span> navItem)\r\n        {\r\n            <span style=\"color:green\">/* if (menuItem is ProductCategory)\r\n             {\r\n                 var productCategory = menuItem as ProductCategory;\r\n                 if (productCategory.ProductCategoryID &gt; 0) // Category selected\r\n                     eventAggregator.Publish(new CategorySelectedEvent(productCategory));\r\n                 else // Category &quot;all products&quot; selected\r\n                     eventAggregator.Publish(new CategorySelectedEvent());\r\n             }\r\n             else if (menuItem is ProductSubcategory)\r\n             {\r\n                 eventAggregator.Publish(new CategorySelectedEvent((ProductSubcategory)menuItem));\r\n             }*/</span>\r\n            NavItem item = navItem <span style=\"color:blue\">as</span> NavItem;\r\n           <span style=\"color:green\">// if (!string.IsNullOrEmpty(item.Name))</span>\r\n               <span style=\"color:green\">// ShowView(item.ViewName);</span>\r\n        }\r\n\r\n\r\n    }\r\n}\r\n</pre>\r\n</div>\r\n<br></span></pre>\r\n<pre><span style=\"color:#0000ff\">When click the button1, the viewcollectonsource is null, is there any error?</span></pre>\r\n<pre><br></pre>\r\n<pre>\r\n\r\n</pre>\r\n</div>\r\n<p></p>\r\n",
    "PostedDate": "2011-04-18T05:59:37.797-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "599104",
    "ThreadId": "254341",
    "Html": "<p>&nbsp;</p>\r\n<pre><span>SubNavItemList this property is never defined anywhere.  So there is nothing for the button to do with the command you have defined. Secondly what are you wanting to put into the CollectionViewSource?</span></pre>\r\n<pre><span>The result you are seeing is probably correct.  Are you trying to populate the CollectionViewSource with the NavItemList?  I am assuming that your trying to test the collection with the Button_Click event?</span></pre>\r\n<pre><span>Your Output window in VS2010 should be filled with Binding Expression Errors, I imagine.</span></pre>",
    "PostedDate": "2011-04-18T07:22:22.313-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "599205",
    "ThreadId": "254341",
    "Html": "<p>..</p>",
    "PostedDate": "2011-04-18T09:17:59.977-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "599206",
    "ThreadId": "254341",
    "Html": "<p>Model:</p>\n<p>&nbsp;</p>\n<div style=\"color: black; background-color: white;\">\n<pre><span style=\"color: blue;\">using</span> System;\n<span style=\"color: blue;\">using</span> System.Collections.Generic;\n<span style=\"color: blue;\">using</span> System.Linq;\n<span style=\"color: blue;\">using</span> System.Text;\n<span style=\"color: blue;\">using</span> Csla;\n<span style=\"color: blue;\">using</span> Csla.Serialization;\n\n\n<span style=\"color: blue;\">namespace</span> MES.Modules.Main.Models\n{\n    [Serializable ]\n   <span style=\"color: blue;\">public</span> <span style=\"color: blue;\">class</span> NavItemList:ReadOnlyListBase &lt;NavItemList ,NavItem &gt;\n    {\n        <span style=\"color: blue;\">#region</span> Authorization Rules\n\n        <span style=\"color: blue;\">private</span> <span style=\"color: blue;\">static</span> <span style=\"color: blue;\">void</span> AddObjectAuthorizationRules()\n        {\n            <span style=\"color: green;\">// TODO: add authorization rules</span>\n            <span style=\"color: green;\">//AuthorizationRules.AllowGet(typeof(ReadOnlyChildList), \"Role\");</span>\n        }\n\n        <span style=\"color: blue;\">#endregion</span>\n\n        <span style=\"color: blue;\">#region</span> Default Constructor\n           <span style=\"color: blue;\">private</span> NavItemList() { }\n        <span style=\"color: blue;\">#endregion</span>\n\n        <span style=\"color: blue;\">#region</span> Asynchronous Factory Methods\n        <span style=\"color: blue;\">public</span> <span style=\"color: blue;\">static</span> <span style=\"color: blue;\">void</span> New(EventHandler&lt;DataPortalResult&lt;NavItemList&gt;&gt; callback)\n        {\n            <span style=\"color: blue;\">var</span> dp = <span style=\"color: blue;\">new</span> DataPortal&lt;NavItemList&gt;();\n            dp.CreateCompleted += callback;\n            dp.BeginCreate();\n        }\n\n        <span style=\"color: blue;\">public</span> <span style=\"color: blue;\">static</span> <span style=\"color: blue;\">void</span> Get(<span style=\"color: blue;\">int</span> id, EventHandler&lt;DataPortalResult&lt;NavItemList&gt;&gt; callback)\n        {\n            <span style=\"color: blue;\">var</span> dp = <span style=\"color: blue;\">new</span> DataPortal&lt;NavItemList&gt;();\n            dp.FetchCompleted += callback;\n           <span style=\"color: green;\">// dp.BeginFetch(new NavMenu.Key(id));</span>\n        }\n\n        <span style=\"color: blue;\">public</span> <span style=\"color: blue;\">static</span> <span style=\"color: blue;\">void</span> GetAll(EventHandler&lt;DataPortalResult&lt;NavItemList&gt;&gt; callback)\n        {\n            <span style=\"color: blue;\">var</span> dp = <span style=\"color: blue;\">new</span> DataPortal&lt;NavItemList&gt;();\n            dp.FetchCompleted += callback;\n            dp.BeginFetch();\n        }\n        <span style=\"color: blue;\">#endregion</span> // Asynchronous Factory Methods\n\n        <span style=\"color: blue;\">#region</span> Data Access\n\n        <span style=\"color: blue;\">private</span> <span style=\"color: blue;\">void</span> ReadData(IEnumerable&lt;MES.Server.Entities.NavigationItem&gt; data)\n        {\n                 \n            RaiseListChangedEvents = <span style=\"color: blue;\">false</span>;\n            IsReadOnly = <span style=\"color: blue;\">false</span>;\n\n            <span style=\"color: blue;\">foreach</span> (<span style=\"color: blue;\">var</span> item <span style=\"color: blue;\">in</span> data)\n                <span style=\"color: blue;\">this</span>.Add(NavItem.Get(item));\n            IsReadOnly = <span style=\"color: blue;\">true</span>;\n            RaiseListChangedEvents = <span style=\"color: blue;\">true</span>;\n\n        \n        }\t\n\n\n\n        <span style=\"color: blue;\">private</span> <span style=\"color: blue;\">void</span> DataPortal_Fetch()\n        {\n            <span style=\"color: blue;\">using</span> (<span style=\"color: blue;\">var</span> ctx = Csla.Data.ObjectContextManager&lt;MES.Server .Entities.SecurityEntityModelContainer&gt;.GetManager(MES.Server.Entities.Database.Security ))\n                ReadData(ctx.ObjectContext.NavigationItem.Where(p =&gt; p.ParentId == <span style=\"color: blue;\">null</span>));\n        }\n\n        <span style=\"color: blue;\">private</span> <span style=\"color: blue;\">void</span> Child_Fetch(<span style=\"color: blue;\">int</span> id)\n        {\n            <span style=\"color: blue;\">using</span> (<span style=\"color: blue;\">var</span> ctx = Csla.Data.ObjectContextManager&lt;MES.Server.Entities.SecurityEntityModelContainer&gt;.GetManager(MES.Server.Entities.Database.Security))\n                ReadData(ctx.ObjectContext.NavigationItem.Where(p =&gt; p.ParentId == id));\n        }\n\n        <span style=\"color: blue;\">#endregion</span>\n    }\n}\n</pre>\n</div>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<div style=\"color: black; background-color: white;\">\n<pre><span style=\"color: blue;\">using</span> System;\n<span style=\"color: blue;\">using</span> Csla;\n<span style=\"color: blue;\">using</span> Csla.Data;\n\n<span style=\"color: blue;\">namespace</span> MES.Modules.Main.Models\n{\n    [Serializable]\n    <span style=\"color: blue;\">public</span> <span style=\"color: blue;\">class</span> NavItem : ReadOnlyBase&lt;NavItem&gt;\n    {\n        <span style=\"color: blue;\">#region</span> Business Methods\n\n        <span style=\"color: blue;\">public</span> <span style=\"color: blue;\">static</span> <span style=\"color: blue;\">readonly</span> PropertyInfo&lt;<span style=\"color: blue;\">int</span>&gt; IdProperty = RegisterProperty&lt;<span style=\"color: blue;\">int</span>&gt;(c =&gt; c.Id);\n        <span style=\"color: blue;\">public</span> <span style=\"color: blue;\">int</span> Id\n        {\n            <span style=\"color: blue;\">get</span> { <span style=\"color: blue;\">return</span> GetProperty(IdProperty); }\n            <span style=\"color: blue;\">private</span> <span style=\"color: blue;\">set</span> { LoadProperty(IdProperty, value); }\n        }\n\n        <span style=\"color: blue;\">public</span> <span style=\"color: blue;\">static</span> <span style=\"color: blue;\">readonly</span> PropertyInfo&lt;<span style=\"color: blue;\">string</span>&gt; NameProperty = RegisterProperty&lt;<span style=\"color: blue;\">string</span>&gt;(c =&gt; c.Name);\n        <span style=\"color: blue;\">public</span> <span style=\"color: blue;\">string</span> Name\n        {\n            <span style=\"color: blue;\">get</span> { <span style=\"color: blue;\">return</span> GetProperty(NameProperty); }\n            <span style=\"color: blue;\">private</span> <span style=\"color: blue;\">set</span> { LoadProperty(NameProperty, value); }\n        }\n        <span style=\"color: blue;\">public</span> <span style=\"color: blue;\">static</span> <span style=\"color: blue;\">readonly</span> PropertyInfo&lt;NavItemList&gt; SubNavItemListProperty = RegisterProperty&lt;NavItemList&gt;(c =&gt; c.SubNavItemList, RelationshipTypes.Child | RelationshipTypes.LazyLoad);\n        <span style=\"color: blue;\">public</span> NavItemList SubNavItemList\n        {\n            <span style=\"color: blue;\">get</span>\n            {\n                <span style=\"color: blue;\">if</span> (!FieldManager.FieldExists(SubNavItemListProperty))\n                {\n                    DataPortal.BeginFetch&lt;NavItemListCreator&gt;(Id,(o,e) =&gt;\n                      {\n                          <span style=\"color: blue;\">if</span> (e.Error != <span style=\"color: blue;\">null</span>)\n                              <span style=\"color: blue;\">throw</span> e.Error;\n                          <span style=\"color: blue;\">else</span> \n                              SubNavItemList =e.Object.Result;\n\n                      });\n                    <span style=\"color: blue;\">return</span> <span style=\"color: blue;\">null</span>;\n                }\n                <span style=\"color: blue;\">return</span> GetProperty(SubNavItemListProperty);\n            }\n            <span style=\"color: blue;\">private</span> <span style=\"color: blue;\">set</span>\n            {\n                LoadProperty(SubNavItemListProperty, value);\n                OnPropertyChanged(SubNavItemListProperty);\n            }\n        }\n       \n        <span style=\"color: blue;\">#endregion</span>\n\n\n        <span style=\"color: blue;\">#region</span> Default Constructor\n\n        <span style=\"color: blue;\">private</span> NavItem() { }\n\n        <span style=\"color: blue;\">#endregion</span>\n\n        <span style=\"color: blue;\">#region</span> Synchronous Factory Methods\n\n        <span style=\"color: blue;\">internal</span> <span style=\"color: blue;\">static</span> NavItem Get(MES.Server .Entities .NavigationItem data)\n        {\n            <span style=\"color: blue;\">if</span> (data == <span style=\"color: blue;\">null</span>)\n                <span style=\"color: blue;\">return</span> <span style=\"color: blue;\">null</span>;\n\n            <span style=\"color: blue;\">return</span> DataPortal.FetchChild&lt;NavItem&gt;(data);\n        }\n        <span style=\"color: blue;\">#endregion</span> \n\n\n        <span style=\"color: blue;\">private</span> <span style=\"color: blue;\">void</span> Child_Fetch(MES.Server .Entities .NavigationItem  data)\n        {\n            LoadProperty(IdProperty, data.Id);\n           <span style=\"color: green;\">// LoadProperty(ParentIdProperty, data.ParentId);</span>\n            LoadProperty(NameProperty, data.Name);\n           <span style=\"color: green;\">// LoadProperty(TypeProperty, data.Type);</span>\n          <span style=\"color: green;\">//  LoadProperty(ViewNameProperty, data.ViewName);</span>\n          <span style=\"color: green;\">//  LoadProperty(BindingResourceKeyProperty, data.BindingResourceKey);</span>\n          <span style=\"color: green;\">//  LoadProperty(ModelProperty, data.Model);</span>\n        }\n\n    }\n}\n</pre>\n<pre><br /></pre>\n<pre>If I use code as below, it can triger the viewmodel.command</pre>\n<pre><pre><div style=\"color: black; background-color: white;\"><pre><span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">UserControl</span> <span style=\"color: red;\">x:Class</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">MES.Modules.Main.Navigation.NavigationListView</span><span style=\"color: black;\">\"</span>\n                    <span style=\"color: red;\">xmlns:ad</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">clr-namespace:AvalonDock;assembly=AvalonDock</span><span style=\"color: black;\">\"</span>\n                    <span style=\"color: red;\">Name</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">this</span><span style=\"color: black;\">\"</span>\n             <span style=\"color: red;\">xmlns</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">http://schemas.microsoft.com/winfx/2006/xaml/presentation</span><span style=\"color: black;\">\"</span>\n             <span style=\"color: red;\">xmlns:x</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">http://schemas.microsoft.com/winfx/2006/xaml</span><span style=\"color: black;\">\"</span>\n             <span style=\"color: red;\">xmlns:mc</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">http://schemas.openxmlformats.org/markup-compatibility/2006</span><span style=\"color: black;\">\"</span> \n             <span style=\"color: red;\">xmlns:extToolkit</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">clr-namespace:Microsoft.Windows.Controls;assembly=WPFToolkit.Extended</span><span style=\"color: black;\">\"</span> \n             <span style=\"color: red;\">xmlns:d</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">http://schemas.microsoft.com/expression/blend/2008</span><span style=\"color: black;\">\"</span> \n             <span style=\"color: red;\">mc:Ignorable</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">d</span><span style=\"color: black;\">\"</span> \n            \n             <span style=\"color: red;\">d:DesignHeight</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">300</span><span style=\"color: black;\">\"</span> <span style=\"color: red;\">d:DesignWidth</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">300</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">&gt;</span>\n    <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">UserControl.Resources</span><span style=\"color: blue;\">&gt;</span>\n        \n    <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">UserControl.Resources</span><span style=\"color: blue;\">&gt;</span>\n    \n    <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">Grid</span> <span style=\"color: red;\">x:Name</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">LayoutRoot</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">&gt;</span>\n        <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">Grid</span><span style=\"color: blue;\">&gt;</span>\n           <strong> <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">Button</span> <span style=\"color: red;\">Name</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">Button1</span><span style=\"color: black;\">\"</span> <span style=\"color: red;\">Content</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">Test</span><span style=\"color: black;\">\"</span>   \n                <span style=\"color: red;\">Command</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">{Binding Path=NavItemDoubleClickCommand}</span><span style=\"color: black;\">\"</span>          \n\n                <span style=\"color: red;\">CommandParameter</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">{Binding}</span><span style=\"color: black;\">\"</span> <span style=\"color: blue;\">&gt;</span>\n\n            <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">Button</span><span style=\"color: blue;\">&gt;</span></strong>\n\n\n\n            <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">extToolkit</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">BusyIndicator</span> <span style=\"color: red;\">IsBusy</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">{Binding Path=IsBusy}</span><span style=\"color: black;\">\"</span>  <span style=\"color: red;\">BusyContent</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">Downloading email...</span><span style=\"color: black;\">\"</span> <span style=\"color: blue;\">&gt;</span>\n\n            <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">extToolkit</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">BusyIndicator</span><span style=\"color: blue;\">&gt;</span>\n         \n         \n        <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">Grid</span><span style=\"color: blue;\">&gt;</span>\n\n    <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">Grid</span><span style=\"color: blue;\">&gt;</span>\n<span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">UserControl</span><span style=\"color: blue;\">&gt;</span>\n</pre>\n<pre><span style=\"color: blue;\"><br /></span></pre>\n<pre><span style=\"color: blue;\">but I use code as below, it cannot triger the command in viewmodel</span></pre>\n<pre><span style=\"color: blue;\"><div style=\"color: black; background-color: white;\"><pre><span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">Grid</span><span style=\"color: blue;\">&gt;</span>\n          <strong>  <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">Button</span> <span style=\"color: red;\">Name</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">Button1</span><span style=\"color: black;\">\"</span> <span style=\"color: red;\">Content</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">Test</span><span style=\"color: black;\">\"</span>   \n                <span style=\"color: red;\">Command</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">{Binding Path=NavItemDoubleClickCommand, RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl }}</span><span style=\"color: black;\">\"</span>          \n\n                <span style=\"color: red;\">CommandParameter</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">{Binding}</span><span style=\"color: black;\">\"</span> <span style=\"color: blue;\">&gt;</span>\n\n            <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">Button</span><span style=\"color: blue;\">&gt;</span></strong>\n\n            <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">extToolkit</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">BusyIndicator</span> <span style=\"color: red;\">IsBusy</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">{Binding Path=IsBusy}</span><span style=\"color: black;\">\"</span>  <span style=\"color: red;\">BusyContent</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">Downloading email...</span><span style=\"color: black;\">\"</span> <span style=\"color: blue;\">&gt;</span>\n\n            <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">extToolkit</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">BusyIndicator</span><span style=\"color: blue;\">&gt;</span>\n         \n         \n        <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">Grid</span><span style=\"color: blue;\">&gt;</span>\n</pre>\n</div>\n<br /></span></pre>\n</div>\nwhat's the error?</pre>\n<pre><br /></pre>\n</pre>\n</div>",
    "PostedDate": "2011-04-18T09:18:01.16-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "599852",
    "ThreadId": "254341",
    "Html": "<p>\r\n<div style=\"color: black; background-color: white;\">\r\n<pre><span style=\"color: blue;\">public</span> NavItemList SubNavItemList\r\n        {\r\n            <span style=\"color: blue;\">get</span>\r\n            {\r\n                <span style=\"color: blue;\">if</span> (!FieldManager.FieldExists(SubNavItemListProperty))\r\n                {\r\n                    DataPortal.BeginFetch&lt;NavItemListCreator&gt;(Id,(o,e) =&gt;\r\n                      {\r\n                          <span style=\"color: blue;\">if</span> (e.Error != <span style=\"color: blue;\">null</span>)\r\n                              <span style=\"color: blue;\">throw</span> e.Error;\r\n                          <span style=\"color: blue;\">else</span> \r\n                              SubNavItemList =e.Object.Result;\r\n\r\n                      });\r\n                   <span style=\"text-decoration: underline;\"><em> <strong><span style=\"color: blue;\">return</span> <span style=\"color: blue;\">null</span>;</strong></em></span>\r\n                }\r\n                <span style=\"color: blue;\">return</span> GetProperty(SubNavItemListProperty);\r\n            }\r\n</pre>\r\n<pre><br /></pre>\r\n<pre>Not that i have had a chance to play with CSLA much but that item I bolded and underlined and italicized wouldn't that be part of the problem?  If you return from this property every time it will be null...&nbsp;</pre>\r\n<pre>Assuming it is inside the logic.</pre>\r\n</div>\r\n</p>",
    "PostedDate": "2011-04-19T09:49:50.35-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]