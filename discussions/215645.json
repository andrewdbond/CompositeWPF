[
  {
    "Id": "454138",
    "ThreadId": "215645",
    "Html": "<p>Hi,</p>\r\n<p>I've tried create WPF application using Prism &amp; MEF, but when I create in Shell Window some region I'll get InvalidOperationException.</p>\r\n<p><strong>Shell Window</strong></p>\r\n<div style=\"color:black;background-color:white\">\r\n<pre><span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Window</span> <span style=\"color:red\">x:Class</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Shell.MainWindow</span><span style=\"color:black\">&quot;</span>\r\n        <span style=\"color:red\">xmlns</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">http://schemas.microsoft.com/winfx/2006/xaml/presentation</span><span style=\"color:black\">&quot;</span>\r\n        <span style=\"color:red\">xmlns:x</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">http://schemas.microsoft.com/winfx/2006/xaml</span><span style=\"color:black\">&quot;</span> \r\n        <span style=\"color:red\">xmlns:cal</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">clr-namespace:Microsoft.Practices.Composite.Presentation.Regions;assembly=Microsoft.Practices.Composite.Presentation</span><span style=\"color:black\">&quot;</span> \r\n        <span style=\"color:red\">Title</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Shell</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">Height</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">350</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">Width</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">525</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">&gt;</span>\r\n    <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Grid</span> <span style=\"color:blue\">&gt;</span>\r\n        <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">ContentControl</span> <span style=\"color:red\">cal:RegionManager.RegionName</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">CskModuleRegion</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">/&gt;</span>\r\n    <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">Grid</span><span style=\"color:blue\">&gt;</span>\r\n<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">Window</span><span style=\"color:blue\">&gt;</span>\r\n</pre>\r\n</div>\r\n<p><strong>Bootstrapper</strong></p>\r\n<div style=\"color:black;background-color:white\">\r\n<pre><span style=\"color:blue\">public</span> <span style=\"color:blue\">class</span> Bootstrapper : MefBootstrapper\r\n{\r\n    <span style=\"color:blue\">protected</span> <span style=\"color:blue\">override</span> <span style=\"color:blue\">void</span> InitializeShell()\r\n    {\r\n        <span style=\"color:blue\">base</span>.InitializeShell();\r\n        Application.Current.MainWindow = (MainWindow) <span style=\"color:blue\">this</span>.Shell;\r\n        Application.Current.MainWindow.Show();\r\n    }\r\n\r\n        <span style=\"color:gray\">///</span> <span style=\"color:gray\">&lt;summary&gt;</span>\r\n    <span style=\"color:gray\">///</span><span style=\"color:green\"> Configures the &lt;see cref=&quot;AggregateCatalog&quot;/&gt; used by MEF.</span>\r\n    <span style=\"color:gray\">///</span> <span style=\"color:gray\">&lt;/summary&gt;</span>\r\n    <span style=\"color:blue\">protected</span> <span style=\"color:blue\">override</span> <span style=\"color:blue\">void</span> ConfigureAggregateCatalog()\r\n    {\r\n            <span style=\"color:blue\">base</span>.ConfigureAggregateCatalog();\r\n\r\n            DirectoryCatalog catalog = <span style=\"color:blue\">new</span> DirectoryCatalog(<span style=\"color:#a31515\">&quot;Modules&quot;</span>);\r\n            <span style=\"color:blue\">this</span>.AggregateCatalog.Catalogs.Add(catalog);\r\n    }\r\n\r\n    <span style=\"color:gray\">///</span> <span style=\"color:gray\">&lt;summary&gt;</span>\r\n    <span style=\"color:gray\">///</span><span style=\"color:green\"> Configures the &lt;see cref=&quot;IModuleCatalog&quot;/&gt; used by Prism.</span>\r\n    <span style=\"color:gray\">///</span> <span style=\"color:gray\">&lt;/summary&gt;</span>\r\n    <span style=\"color:blue\">protected</span> <span style=\"color:blue\">override</span> <span style=\"color:blue\">void</span> CreateModuleCatalog()\r\n    {\r\n        <span style=\"color:green\">// Modules are referenced in the configuration</span>\r\n        <span style=\"color:blue\">this</span>.ModuleCatalog = <span style=\"color:blue\">new</span> ConfigurationModuleCatalog();\r\n    }\r\n\r\n    <span style=\"color:blue\">protected</span> <span style=\"color:blue\">override</span> DependencyObject CreateShell()\r\n    {\r\n        <span style=\"color:blue\">return</span> <span style=\"color:blue\">new</span> MainWindow();\r\n    }\r\n}\r\n</pre>\r\n</div>\r\n<p>And my module <strong>CskModule</strong>&nbsp;</p>\r\n<div style=\"color:black;background-color:white\">\r\n<pre>    [Module(ModuleName = <span style=\"color:#a31515\">&quot;CskModule&quot;</span>)]\r\n    <span style=\"color:blue\">public</span> <span style=\"color:blue\">class</span> CskModule : IModule\r\n    {\r\n        <span style=\"color:blue\">private</span> <span style=\"color:blue\">readonly</span> IRegionManager _regionManager;\r\n        <span style=\"color:blue\">private</span> <span style=\"color:blue\">readonly</span> IEventAggregator _eventAggregator;\r\n\r\n        <span style=\"color:blue\">public</span> CskModule(IRegionManager regionManager, IEventAggregator eventAggregator)\r\n        {\r\n            <span style=\"color:blue\">this</span>._regionManager = regionManager;\r\n            <span style=\"color:blue\">this</span>._eventAggregator = eventAggregator;\r\n        }\r\n\r\n        <span style=\"color:blue\">public</span> <span style=\"color:blue\">void</span> Initialize()\r\n        {\r\n            _regionManager.AddToRegion(<span style=\"color:#a31515\">&quot;CskModuleRegion&quot;</span>, <span style=\"color:blue\">new</span> CskDataView());\r\n        }\r\n    }\r\n</pre>\r\n</div>\r\n<p><strong>InvalidOperationException Detail</strong></p>\r\n<p>Exception occured in <strong>RegionManager.CreateRegion</strong> method, because&nbsp;locator.GetInstance&lt;<span style=\"color:#2b91af\">DelayedRegionCreationBehavior</span>&gt;() call&nbsp;&nbsp;<strong><span style=\"color:#2b91af\">MefServiceLocatorAdapter.</span>DoGetInstance</strong>&nbsp;method which return 2 same objects &quot;{Name = &quot;DelayedRegionCreationBehavior&quot; FullName = &quot;Microsoft.Practices.Composite.Presentation.Regions.Behaviors.DelayedRegionCreationBehavior&quot;}&quot;</p>\r\n<p>Can somebody know how to use MEF and Prism with RegionNames</p>\r\n<p>Thanks, Lukas</p>",
    "PostedDate": "2010-06-10T11:45:13.223-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "456723",
    "ThreadId": "215645",
    "Html": "<p>H lukas please see this thread http://compositewpf.codeplex.com/workitem/6858</p>\r\n<p>Juan Guillermo</p>\r\n<p>Colombia-Medellin</p>\r\n<p>&nbsp;</p>",
    "PostedDate": "2010-06-17T07:15:30.037-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]