[
  {
    "Id": "841350",
    "ThreadId": "357297",
    "Html": "\r\n<p><em>I have a viewmodel that implements <code>IConfirmNavigationRequest</code> and\r\n<a rel=\"nofollow\" href=\"http://msdn.microsoft.com/en-us/library/gg430861%28v=pandp.40%29.aspx#sec10\">\r\nI need to pass information</a> from this viewmodel to a navigation broker class that I have, which is not coupled to any specific views or viewmodels.</em></p>\r\n<p>Instead the navigation broker class has access to the <code>IRegion</code> of interest as well as to the\r\n<code>IRegionNavigationService</code>.</p>\r\n<h3>ViewModel Adding Parameters to Uri</h3>\r\n<pre><code><span>&nbsp; &nbsp; </span><span>public</span><span> </span><span>override</span><span> </span><span>void</span><span> </span><span>ConfirmNavigationRequest</span><span>(</span><span>NavigationContext</span><span> navigationContext</span><span>,</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>Action</span><span class=\"str\">&lt;bool&gt;</span><span> continuationCallback</span><span>)</span><span><br>&nbsp; &nbsp; </span><span>{</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; _verificationCount</span><span>&#43;&#43;;</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; navigationContext</span><span>.</span><span>Parameters</span><span>.</span><span>Add</span><span>(</span><span class=\"str\">&quot;Count&quot;</span><span>,</span><span> _verificationCount</span><span>.</span><span>ToString</span><span>());</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; continuationCallback</span><span>(</span><span>Verify</span><span>());</span><span><br>&nbsp; &nbsp; </span><span>}</span><span><br></span></code></pre>\r\n<h3>A Navigation Broker that Needs To Access the Passed Parameters</h3>\r\n<pre><code><span>&nbsp; &nbsp; </span><span>// Some method</span><span><br>&nbsp; &nbsp; _region</span><span>.</span><span>RequestNavigate</span><span>(</span><span>new</span><span> </span><span>Uri</span><span>(</span><span>_nextView</span><span>,</span><span> </span><span>UriKind</span><span>.</span><span>Relative</span><span>),</span><span> </span><span>NavigationCallback</span><span>);</span><span><br><br>&nbsp; &nbsp; </span><span>private</span><span> </span><span>void</span><span> </span><span>NavigationCallback</span><span>(</span><span>NavigationResult</span><span> navigationResult</span><span>)</span><span><br>&nbsp; &nbsp; </span><span>{</span><span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span>if</span><span> </span><span>(</span><span>navigationResult</span><span>.</span><span>Error</span><span> </span><span>==</span><span> </span><span>null</span><span>)</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span>{</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>if</span><span> </span><span>(</span><span>navigationResult</span><span>.</span><span>Result</span><span> </span><span>==</span><span> </span><span>true</span><span>)</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>{</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>// Need to evaluate the Count argument here</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>// int count = ...</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>// if (count &lt; 5)</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>QueueNextView</span><span>();</span><span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>}</span><span> </span><span>else</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>{</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>Debug</span><span>.</span><span>WriteLine</span><span>(</span><span class=\"str\">&quot;Navigation Cancelled&quot;</span><span>);</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>}</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span>}</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span>else</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span>{</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span>Debug</span><span>.</span><span>WriteLine</span><span>(</span><span class=\"str\">&quot;Navigation Error&quot;</span><span>);</span><span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span>}</span><span><br>&nbsp; &nbsp; </span><span>}</span><span><br></span></code></pre>\r\n<h3>How to Access Parameter Through Region or NavigationService, Outside ViewModel?</h3>\r\n<ul>\r\n<li>I cannot find a way to access <code>NavigationContext</code> through <code>NavigationService</code> or\r\n<code>Region</code>? </li><li>I also tried this <code>_region.NavigationService.Journal.CurrentEntry.Uri.OriginalString</code> but it did not show any query information, just the registered View string name\r\n</li></ul>\r\n",
    "PostedDate": "2012-05-27T00:36:41.73-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "841731",
    "ThreadId": "357297",
    "Html": "<p>Hi,</p>\r\n<p>Based on my understanding of your scenario you could access the passed parameters from the <strong>NavigationResult </strong>object in your <strong>NavigationCallback</strong> method, as the <strong>NavigationResult </strong>class defines properties that provide information about the navigation operation. Among these properties you could find the <strong>Context </strong>property which provides access to the <strong>NavigationContext </strong>and the parameters it contains.</p>\r\n<p>For example you could access your parameter like this:</p>\r\n<p>\r\n<div style=\"color: black; background-color: white;\">\r\n<pre>navigationResult.Context.Parameters[<span style=\"color: #a31515;\">\"Count\"</span>];\r\n</pre>\r\n</div>\r\nI hope you find this useful,</p>\r\n<p>Agustin Adami<a href=\"http://blogs.southworks.net/aadami\"><br /> http://blogs.southworks.net/aadami</a></p>",
    "PostedDate": "2012-05-28T10:20:58.71-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "842977",
    "ThreadId": "357297",
    "Html": "<p>That seems to be spot on! I'll try it, thanks!</p>",
    "PostedDate": "2012-05-31T02:31:23.047-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]