[
  {
    "Id": "726132",
    "ThreadId": "286367",
    "Html": "\r\n<p>I have my own SecurityService where I can check if current user has access to specific view.</p>\r\n<p>What I'm trying to achieve is when RegionManager.RequestNavigate called - I need some kind of hook that will check view specified against security service and then either cancel navigation or proceed with it.</p>\r\n<p>Can I somehow utilize INavigationAware? So far I can't see how I can do it..</p>\r\n<p>Is there any samples on how I can subclass RegionManager to do this?</p>\r\n",
    "PostedDate": "2012-01-16T19:48:52.067-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "726516",
    "ThreadId": "286367",
    "Html": "<p>I implemented something like this by overriding Prism's RegionNavigationContentLoader.CreateNewRegionItem() method. After executing the base class CreateNewRegionItem(), I have the override method check the user's rights using our security service. If the user doesn't have access, the code throws an ActivationException() and that causes the navigation request to fail.</p>\r\n<p>&nbsp;</p>",
    "PostedDate": "2012-01-17T09:18:16.213-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "726519",
    "ThreadId": "286367",
    "Html": "<p>Hi,</p>\n<p>Based on my understanding of your scenario, you might benefit from the <strong> IConfirmNavigationRequest </strong>interface. By implementing this interface on your view or view model class, it will allow you to confirm or cancel the navigation.</p>\n<p>You will find that this interface derives from the <strong>INavigationAware</strong> interface and adds the <strong>ConfirmNavigationRequest </strong>method, which provides two parameters: a reference to the current navigation context (which will be useful to retrieve parameters passed when navigating) and a callback method that you can call when you want the navigation  to continue.</p>\n<p>This way, I believe you could store a reference to the continuation callback so the application can call it after it finishes validating the navigation request, for example with your <strong>SecurityService</strong>.<br /> <br /> Also you might find the following discussion useful, where you can find more information and a sample application that implements the aforementioned fuctionality:</p>\n<ul>\n<li><a href=\"http://compositewpf.codeplex.com/discussions/270953\">How to defer navigation in PRISM</a> </li>\n</ul>\n<p>Additionally, you could find the following topics from the <a href=\"http://msdn.microsoft.com/en-us/library/gg430861%28v=pandp.40%29.aspx\">Navigation chapter</a> at MSDN helpful:</p>\n<ul>\n<li><a href=\"http://msdn.microsoft.com/en-us/library/gg430861%28v=pandp.40%29.aspx#sec12\">Confirming or Cancelling Navigation</a> </li>\n<li><a href=\"http://msdn.microsoft.com/en-us/library/gg430861%28v=pandp.40%29.aspx#sec10\">Passing Parameters During Navigation</a> </li>\n</ul>\n<p>I hope you find this handy,</p>\n<p>Agustin Adami<a href=\"http://blogs.southworks.net/aadami\"><br /> http://blogs.southworks.net/aadami</a>﻿</p>",
    "PostedDate": "2012-01-17T09:21:06.673-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "726567",
    "ThreadId": "286367",
    "Html": "<p>Yesterday after I posted message I came up with other way. What do you think? I have to call</p>\r\n<p>RequestSecuredNavigate instead of RequestNavigate but it does exactly what I wanted..</p>\r\n<p>&nbsp;</p>\r\n<p><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\"><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\"><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\"><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\">\r\n<p>public</p>\r\n</span></span></span>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-family: Consolas; font-size: x-small;\"><span style=\"font-family: Consolas; font-size: x-small;\">&nbsp;</span></span><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\"><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\"><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\">static</span></span></span><span style=\"font-family: Consolas; font-size: x-small;\"><span style=\"font-family: Consolas; font-size: x-small;\"> </span></span><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\"><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\"><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\">class</span></span></span><span style=\"font-family: Consolas; font-size: x-small;\"><span style=\"font-family: Consolas; font-size: x-small;\"> </span></span><span style=\"font-family: Consolas; color: #2b91af; font-size: x-small;\">\r\n<p><span style=\"font-family: Consolas; color: #2b91af; font-size: x-small;\">\r\n<p><span style=\"font-family: Consolas; color: #2b91af; font-size: x-small;\">RegionManagerExtensions</span></p>\r\n</span></p>\r\n</span></p>\r\n<p><span style=\"font-family: Consolas; font-size: x-small;\"><span style=\"font-family: Consolas; font-size: x-small;\">\r\n<p>{</p>\r\n<span style=\"font-family: Consolas; font-size: x-small;\">\r\n<p>&nbsp;</p>\r\n</span></span></span></p>\r\n<p><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\"><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\"><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\">public</span></span></span><span style=\"font-family: Consolas; font-size: x-small;\"><span style=\"font-family: Consolas; font-size: x-small;\"> </span></span><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\"><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\"><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\">static</span></span></span><span style=\"font-family: Consolas; font-size: x-small;\"><span style=\"font-family: Consolas; font-size: x-small;\"> </span></span><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\"><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\"><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\">void</span></span></span><span style=\"font-family: Consolas; font-size: x-small;\"><span style=\"font-family: Consolas; font-size: x-small;\"> RequestSecuredNavigate(</span></span><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\"><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\"><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\">this</span></span></span><span style=\"font-family: Consolas; font-size: x-small;\"><span style=\"font-family: Consolas; font-size: x-small;\"> </span></span><span style=\"font-family: Consolas; color: #2b91af; font-size: x-small;\"><span style=\"font-family: Consolas; color: #2b91af; font-size: x-small;\"><span style=\"font-family: Consolas; color: #2b91af; font-size: x-small;\">IRegionManager</span></span></span><span style=\"font-family: Consolas; font-size: x-small;\"><span style=\"font-family: Consolas; font-size: x-small;\"> regionManager, </span></span><span style=\"font-family: Consolas; color: #2b91af; font-size: x-small;\"><span style=\"font-family: Consolas; color: #2b91af; font-size: x-small;\"><span style=\"font-family: Consolas; color: #2b91af; font-size: x-small;\">ISecurityService</span></span></span><span style=\"font-family: Consolas; font-size: x-small;\"><span style=\"font-family: Consolas; font-size: x-small;\"> securityService, </span></span><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\"><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\"><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\">string</span></span></span><span style=\"font-family: Consolas; font-size: x-small;\"><span style=\"font-family: Consolas; font-size: x-small;\"> regionName, </span></span><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\"><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\"><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\">string</span></span></span><span style=\"font-family: Consolas; font-size: x-small;\">\r\n<p><span style=\"font-family: Consolas; font-size: x-small;\">source)\r\n<p>{</p>\r\n<span style=\"font-family: Consolas; font-size: x-small;\">\r\n<p>&nbsp;</p>\r\n</span></span></p>\r\n</span></p>\r\n<p><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\"><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\"><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\">if</span></span></span><span style=\"font-family: Consolas; font-size: x-small;\">\r\n<p><span style=\"font-family: Consolas; font-size: x-small;\">(securityService.IsUserInRole(source))\r\n<p>{</p>\r\n<p>regionManager.RequestNavigate(regionName, source);</p>\r\n<p>}</p>\r\n<span style=\"font-family: Consolas; font-size: x-small;\">\r\n<p>&nbsp;</p>\r\n</span></span></p>\r\n</span></p>\r\n<p><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\">\r\n<p><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\">\r\n<p><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\">else</span></p>\r\n</span></p>\r\n</span></p>\r\n<p><span style=\"font-family: Consolas; font-size: x-small;\"><span style=\"font-family: Consolas; font-size: x-small;\">\r\n<p>{</p>\r\n<span style=\"font-family: Consolas; font-size: x-small;\">\r\n<p>regionManager.RequestNavigate(</p>\r\n</span></span></span></p>\r\n<p><span style=\"font-family: Consolas; color: #2b91af; font-size: x-small;\"><span style=\"font-family: Consolas; color: #2b91af; font-size: x-small;\"><span style=\"font-family: Consolas; color: #2b91af; font-size: x-small;\">RegionNames</span></span></span><span style=\"font-family: Consolas; font-size: x-small;\"><span style=\"font-family: Consolas; font-size: x-small;\">.MainPopup, </span></span><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\"><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\"><span style=\"font-family: Consolas; color: #0000ff; font-size: x-small;\">typeof</span></span></span><span style=\"font-family: Consolas; font-size: x-small;\"><span style=\"font-family: Consolas; font-size: x-small;\">(</span></span><span style=\"font-family: Consolas; color: #2b91af; font-size: x-small;\"><span style=\"font-family: Consolas; color: #2b91af; font-size: x-small;\"><span style=\"font-family: Consolas; color: #2b91af; font-size: x-small;\">AccessDeniedView</span></span></span><span style=\"font-family: Consolas; font-size: x-small;\">\r\n<p><span style=\"font-family: Consolas; font-size: x-small;\">).Name);\r\n<p>}</p>\r\n<p>}</p>\r\n<p>}</p>\r\n</span></p>\r\n</span></p>",
    "PostedDate": "2012-01-17T10:15:25.95-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "727121",
    "ThreadId": "286367",
    "Html": "<p>Hi katit,</p>\r\n<p>Your approach seems to be an exellent choice, thanks for sharing it with the rest of the community.</p>\r\n<p>As a side note, take into account that the main difference with your approach is that when implementing <strong>IConfirmNavigationRequest&nbsp; </strong>you will be able to confirm the navigation request using an asynchronous interaction. However, this will deppend on your personal preferences and the requirements of your scenario.<br /><br />Thanks,</p>\r\n<p>Agustin Adami<a href=\"http://blogs.southworks.net/aadami\"><br /> http://blogs.southworks.net/aadami</a>﻿</p>",
    "PostedDate": "2012-01-18T08:34:45.477-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]