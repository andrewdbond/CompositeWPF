[
  {
    "Id": "287174",
    "ThreadId": "83527",
    "Html": "<p>Hi,</p>\r\n<p>&nbsp;</p>\r\n<p>Im having some issues with the regionManager, possible my own misunderstandings but anoying.</p>\r\n<p>I have a Shell view that creates a MainRegion (ContentControl), and a module that when intialized adds a view into the MainRegion that creates two new regions (both ContentControls).</p>\r\n<p>My problem is that within my module controller I want to know which views are loaded into each of the localised regions (being ListViewRegion and ItemViewRegion), but whenever I attempt to get anything from regionManager.Regions[] I get an exception.</p>\r\n<p>Here is a part of my module controller:</p>\r\n<p>&nbsp;</p>\r\n<div style=\"color:Black;background-color:White\">\r\n<pre> <span style=\"color:Blue\">private</span> <span style=\"color:Blue\">void</span> Navigate(<span style=\"color:Blue\">string</span> pValue)\r\n        {\r\n            log.Info(<span style=\"color:#A31515\">&quot;Unsubscribing from navigation events&quot;</span>);\r\n            UnsubscribeNavigationEvents();\r\n            \r\n            <span style=\"color:Green\">// Show the main tasks window, this should do some detection first to see what we</span>\r\n            <span style=\"color:Green\">// currently have in the MainRegion</span>\r\n            ShowMainTasksRegion();\r\n\r\n            GetActiveView(); //&lt;-- this always throws an exception\r\n\r\n            <span style=\"color:Blue\">switch</span> (pValue.ToUpper())\r\n            {\r\n                <span style=\"color:Blue\">case</span> <span style=\"color:#A31515\">&quot;TASKLIST&quot;</span>:\r\n                    log.Info(<span style=\"color:#A31515\">&quot;Registering the TaskListView with the ListViewRegion&quot;</span>);\r\n                    _regionManager.RegisterViewWithRegion(<span style=\"color:#A31515\">&quot;ListViewRegion&quot;</span>, () =&gt; _container.Resolve&lt;TasksListView&gt;());\r\n                    <span style=\"color:Blue\">break</span>;\r\n                <span style=\"color:Blue\">case</span> <span style=\"color:#A31515\">&quot;TASKADD&quot;</span>:\r\n                    log.Info(<span style=\"color:#A31515\">&quot;Registering the TaskItemView with the ItemViewRegion&quot;</span>);\r\n                    _regionManager.RegisterViewWithRegion(<span style=\"color:#A31515\">&quot;ItemViewRegion&quot;</span>, () =&gt; _container.Resolve&lt;TaskItemView&gt;());\r\n                    <span style=\"color:Blue\">break</span>;\r\n                <span style=\"color:Blue\">case</span> <span style=\"color:#A31515\">&quot;RULELIST&quot;</span>:\r\n                    log.Info(<span style=\"color:#A31515\">&quot;Registering the RuleListView with the ListViewRegion&quot;</span>);\r\n                    _regionManager.RegisterViewWithRegion(<span style=\"color:#A31515\">&quot;ListViewRegion&quot;</span>, () =&gt; _container.Resolve&lt;RulesListView&gt;());\r\n                    <span style=\"color:Blue\">break</span>;\r\n                <span style=\"color:Blue\">case</span> <span style=\"color:#A31515\">&quot;RULEADD&quot;</span>:\r\n                    log.Info(<span style=\"color:#A31515\">&quot;Registering the RuleItemView with the ItemViewRegion&quot;</span>);\r\n                    _regionManager.RegisterViewWithRegion(<span style=\"color:#A31515\">&quot;ItemViewRegion&quot;</span>, () =&gt; _container.Resolve&lt;RuleItemView&gt;());\r\n                    <span style=\"color:Blue\">break</span>;\r\n                <span style=\"color:Blue\">default</span>:\r\n                    <span style=\"color:Blue\">break</span>;\r\n            }\r\n\r\n            log.Info(<span style=\"color:#A31515\">&quot;Subscribing to navigation events&quot;</span>);\r\n            SubscribeNavigationEvents();\r\n        }\r\n</pre>\r\n</div>\r\n<p>&nbsp;</p>\r\n<div style=\"color:Black;background-color:White\">\r\n<pre>       <span style=\"color:Blue\">private</span> <span style=\"color:Blue\">string</span> GetActiveView()\r\n        {\r\n            IRegion detailsRegion = _regionManager.Regions[RegionNames.MainRegion];\r\n\r\n            <span style=\"color:Blue\">return</span> <span style=\"color:#A31515\">&quot;&quot;</span>;\r\n            \r\n        }\r\n</pre>\r\n</div>\r\n<p>Any pointers much appreciated. Mark</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>",
    "PostedDate": "2010-02-08T07:51:57.77-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "288503",
    "ThreadId": "83527",
    "Html": "<p id=996c5000-f8b9-012c-99c9-1231390c3851 style=\"margin-top:1em;margin-right:0px;margin-bottom:1em;margin-left:0px;text-align:justify;padding:0px\">Hi Mark,</p>\r\n<p id=996c5f30-f8b9-012c-99ca-1231390c3851 style=\"margin-top:1em;margin-right:0px;margin-bottom:1em;margin-left:0px;text-align:justify;padding:0px\">The way you are trying to access the Region appears to be the right one, so the issue probably lays somewhere else.</p>\r\n<p id=996c6e20-f8b9-012c-99cb-1231390c3851 style=\"margin-top:1em;margin-right:0px;margin-bottom:1em;margin-left:0px;text-align:justify;padding:0px\">One possible reason for this to happen could be if you are using&nbsp;<a style=\"padding:0px;margin:0px\" href=\"http://msdn.microsoft.com/en-us/library/dd458914.aspx\">Scoped Regions</a>&nbsp;and try to access a region that was created in another RegionManager. To check this you can debug your application and check if the&nbsp;<strong style=\"padding:0px;margin:0px\">RegionManager</strong>&nbsp;instance that is used in the&nbsp;<strong style=\"padding:0px;margin:0px\">GetActiveView</strong>&nbsp;method is the same as the one were the MainRegion was created (or simply check if the &ldquo;MainRegion&rdquo; is in the Region&rsquo;s collection of that Region Manager).</p>\r\n<p id=996c7df0-f8b9-012c-99cc-1231390c3851 style=\"margin-top:1em;margin-right:0px;margin-bottom:1em;margin-left:0px;text-align:justify;padding:0px\">If the above is not helpful, please provide a small sample application so we can look deeper into this issue.</p>\r\n<p id=996c8e10-f8b9-012c-99cd-1231390c3851 style=\"margin-top:1em;margin-right:0px;margin-bottom:1em;margin-left:0px;text-align:justify;padding:0px\">Please let me know if this helps.</p>\r\n<p id=996c9e20-f8b9-012c-99ce-1231390c3851 style=\"margin-top:1em;margin-right:0px;margin-bottom:1em;margin-left:0px;text-align:justify;padding:0px\">Damian Schenkelman&nbsp;<br style=\"padding:0px;margin:0px\"><a style=\"padding:0px;margin:0px\" href=\"http://blogs.southworks.net/dschenkelman\">http://blogs.southworks.net/dschenkelman</a></p>",
    "PostedDate": "2010-02-10T15:29:18.727-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "288632",
    "ThreadId": "83527",
    "Html": "<p>&nbsp;</p>\r\n<p>Hi Damien,</p>\r\n<p>Unfortunately I gave up on this attempt, after changing my ContentControl regions to ItemsControl regions I had better luck albeit with a bit more work, heres a example of how i'm getting the views now:</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<div style=\"color:Black;background-color:White\">\r\n<pre><span style=\"color:Blue\">switch</span> (pValue.ToUpper())\r\n            {\r\n                <span style=\"color:Blue\">case</span> <span style=\"color:#A31515\">&quot;TASKLIST&quot;</span>:\r\n                    log.Info(<span style=\"color:#A31515\">&quot;Registering the TaskListView with the ListViewRegion&quot;</span>);\r\n                    p_view = <span style=\"color:Blue\">this</span>._regionManager.Regions[<span style=\"color:#A31515\">&quot;ListViewRegion&quot;</span>].Views.FirstOrDefault(v =&gt; v.GetType() == <span style=\"color:Blue\">typeof</span>(RulesListView));\r\n                    <span style=\"color:Blue\">if</span> (p_view != <span style=\"color:Blue\">null</span>)\r\n                        <span style=\"color:Blue\">this</span>._regionManager.Regions[<span style=\"color:#A31515\">&quot;ListViewRegion&quot;</span>].Remove(p_view);\r\n                    view = <span style=\"color:Blue\">this</span>._regionManager.Regions[<span style=\"color:#A31515\">&quot;ListViewRegion&quot;</span>].Views.FirstOrDefault(v =&gt; v.GetType() == <span style=\"color:Blue\">typeof</span>(TasksListView));\r\n                    <span style=\"color:Blue\">if</span> (view == <span style=\"color:Blue\">null</span>)\r\n                    {\r\n                        view = <span style=\"color:Blue\">this</span>._container.Resolve&lt;TasksListView&gt;();\r\n                        <span style=\"color:Blue\">this</span>._regionManager.Regions[<span style=\"color:#A31515\">&quot;ListViewRegion&quot;</span>].Add(view);\r\n                    }\r\n                    <span style=\"color:Blue\">this</span>._regionManager.Regions[<span style=\"color:#A31515\">&quot;ListViewRegion&quot;</span>].Activate(view);\r\n                    <span style=\"color:Blue\">break</span>;\r\n</pre>\r\n</div>\r\n<p>As you can see I have to do a bit of swapping in and out, but at least I can get the regions and their associated views now.</p>\r\n<p>Thanks, Mark</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>",
    "PostedDate": "2010-02-11T00:12:56.59-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]