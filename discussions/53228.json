[
  {
    "Id": "179036",
    "ThreadId": "53228",
    "Html": "Hi,<br>\r\nI am trying to get used to the concept of modular application.<br>\r\nPerhaps somebody can give me some tips how to handle the following situation:<br>\r\n<br>\r\nI have a video module, which displays a list of movies, with three different views.<br>\r\nFor this purpose, I thought I take a Movie.class (model), a MovieViewModel.class and a ThumbView, SlimBarView... and so on...<br>\r\nThe small views are no problem, but in the details view, I want to be able to add a Toolbar. (e.g. from a rating module)<br>\r\n<br>\r\nSo, how is the right approach for this, using the regions manager. The movie details view is not visible at the beginning, just a list of 15 movies in thumbnail mode. Who, in this scenario, is responsible for adding the toolbars to each view, when switchting to details mode.<br>\r\n<br>\r\nMy current train of thought is using an event. DetailsViewEnabledEvent(ViewModelAsArg)<br>\r\nAnd the &quot;RatingModule&quot; would insert its toolbar in the DetailsView by getting ??a scoped region manager??<br>\r\n<br>\r\nMost of the examples deal with &quot;big regions&quot; like 1 Toolbar for the whole application. Which is nice, too, but leaves me a little bit confused for tiny bits, like a list of 100 movies (creating 100 viewModels, using 100 named regions - sounds strange)...<br>\r\n<br>\r\nChristian<br>\r\nTo make it more clear, here is a nice picture to get the idea...<br>\r\n<img alt=\"\" src=\"http://diplom.cruppert.de/images/forumposts/region_question.png\">\r\n",
    "PostedDate": "2009-04-14T07:35:53.613-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "179078",
    "ThreadId": "53228",
    "Html": "<p>Hi Christian!</p>\r\n<p>From the detailed scenario you described maybe modularity is not &quot;that&quot; issue.</p>\r\n<p>Here is how may I deal with this situation, since here you've multiple View States but not multiple views, specifically not multiple view models.</p>\r\n<p>In this scenario the view itself can be represented with &quot;just&quot; an ItemsControl and a ViewModel which holds a list of the 100 movies.</p>\r\n<p>It's your choice that are you lazy loading the movie details when a view state is first changed via a service or preload it with other movie data.</p>\r\n<p>It's not clear from you description is that you're showing the different views in the same place or at different part of your application.</p>\r\n<p>You can have a dedicated region within your view for toolbar which can contain anything, but I assume that you can't generalize here, because it's very dependent.</p>\r\n<p>What is the purpose of the toolbar?<br>\r\n1. Show associated data for the given movie? Also provide some interaction (like submit a rating)?<br>\r\n2. Show commands available for that movie? (Rent, Play, etc)<br>\r\n3. Mix of 1 and 2?</p>\r\n<p>For a rating scenario I'd make it part of the initial view model and maybe lazy loading the rating data via a service. This can be encapsulated into a RatingModule, but in this case not the view itself. You can put that into the RatingModule also, but in choose the lifetime for the Rating (or ToolbaR) related stuff wisely to save resources!</p>\r\n<p>So for your scenario I'd use different views but in form of DataTemplates.</p>\r\n<p>Regarding the RegionManager usage I'd have a Toolbar module, which listens to &quot;REGISTER_TOOLBAR_STUFF&quot; event so if any module loaded which like to register something to be shown in the toolbar, it must publish this event along with the attached &quot;metadata&quot; like icommand, displayname and other similar stuff.</p>\r\n<p>The Toolbar module can register it's view into the RegionManager.</p>\r\n<p>What do you think?</p>\r\n<p>Thanks,<br>\r\nAttila</p>\r\n",
    "PostedDate": "2009-04-14T08:45:51.667-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "179104",
    "ThreadId": "53228",
    "Html": "Thanks for your answer... The more I think about it, there more it takes form.<br>\r\nTo stress out, this is not a &quot;real project&quot;, so the requirements are very fuzzy.<br>\r\n<br>\r\nI want to be able to create the application in multiple steps. The toolbar, for example, is for &quot;anything which might come&quot;.<br>\r\nI will try to illustrate the szenario by using versions:<br>\r\n<br>\r\nVersion 0.1<br>\r\n<br>\r\nMOVIE-MODULE<br>\r\n- Show movies in List (Items Control, with DataTemplate)<br>\r\n- Show details view of Movie (found already some patterns)<br>\r\n- Empty toolbar, cant do anything...<br>\r\n<br>\r\nVersion 0.2<br>\r\n<br>\r\nMOVIE-MODULE<br>\r\n- No changes<br>\r\n<br>\r\nRATING-MODULE<br>\r\n- Big screen for overview of rated movies<br>\r\n- Toolbar inside movie details to rate single movie<br>\r\n<br>\r\nVersion.... and so on...<br>\r\nI know I might overstretch the modularity a little bit, but I want to hit limitations as early as possible, to figure out what is possible, and what isnt.<br>\r\nIn the given szenarion, the movie module would know nothing about the rating module, but the rating would depend on movies. Such things are nicely supported by PRISM.<br>\r\n<br>\r\nSo what I am basically trying to figure out, is how to &quot;prepare&quot; the movie module for extensions in the future. Perhaps with mockups at the moment, and then later replacing this functionality. And what I am still not quite sure about, is how to &quot;reserve&quot; this region in a good way.<br>\r\n<br>\r\nOk, I think this is a good question:<br>\r\n<br>\r\nIf I want to reserve a region inside a control for &quot;future use by other modules&quot;, do I use a simple named region?<br>\r\nBy this &quot;everybody&quot; could add his stuff without needing to know about the others...<br>\r\n<br>\r\nChris<br>\r\n<br>\r\nEDIT<br>\r\nOk, I created a new image to illustrate another question. In this szenario, how would the Toolbar module know when to create the controls for a movie. Would you hook up the &quot;ItemSelectedChangedEvent&quot; to some sort of self created EventRaising(PRISM, e.g.)... I found several models for this &quot;list - details&quot; szenario, but I am not sure how to include the Toolbar in this &quot;non existing views&quot;.. (the other 3 movies have potentially also toolbars, but I dont want to load them all if never needed.. Movie-module knows what it shows, so some Event seems to be the best way. Like I said, <strong>PleaseShowToolBarForMovieXYZNowEvent</strong>... )<br>\r\n<br>\r\n<br>\r\n<br>\r\n<img alt=\"\" src=\"http://diplom.cruppert.de/images/forumposts/region_question_2.png\">\r\n<br>\r\n<br>\r\nBy the way, if somebody reads this, take a look at this post, too:<br>\r\nhttp://www.codeplex.com/CompositeWPF/Thread/View.aspx?ThreadId=24804<br>\r\n<br>\r\nThe part about the RegionManager is interesting. I think I will try to &quot;attach my Rating Module&quot; there..<br>\r\nAt least I will take a closer look at the region manager. It gets invoked if a details view is opened, so it might be the right place to start..<br>\r\n",
    "PostedDate": "2009-04-14T09:39:04.827-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "179794",
    "ThreadId": "53228",
    "Html": "<p style=\"margin:0cm 0cm 0pt\"><span style=\"font-family:calibri\">Hi Chris,</span></p>\r\n<p style=\"margin:0cm 0cm 0pt\"><span style=\"color:#1f497d;font-family:calibri\"> </span></p>\r\n<p style=\"margin:0cm 0cm 0pt\"><span style=\"font-family:calibri\"><span style=\"color:#1f497d\">                </span>Are you using Prism-v1 or Prism-v2? Are you using WPF or Silverlight? I'll assume you are using WPF and Prism-v2.</span></p>\r\n<p style=\"margin:0cm 0cm 0pt\"><span style=\"color:#1f497d;font-family:calibri\"> </span></p>\r\n<p style=\"margin:0cm 0cm 0pt\"><span><span style=\"font-family:calibri\">I agree with Attila that for the scenario you described in your first post, the best way to show a model item (view) with different styles is using </span><a href=\"http://msdn.microsoft.com/en-us/library/system.windows.datatemplate.aspx\"><span style=\"font-family:calibri\">DataTemplates</span></a><span style=\"font-family:calibri\"> and maybe switching templates dynamically using </span><a href=\"http://msdn.microsoft.com/en-us/library/system.windows.trigger.aspx\"><span style=\"font-family:calibri\">triggers</span></a><span style=\"font-family:calibri\">. You might find these MSDN articles interesting: </span></span></p>\r\n<p style=\"margin:0cm 0cm 0pt 36pt\"><span style=\"font-family:symbol\">·<span style=\"font:7pt 'times new roman'\">         </span><a href=\"http://msdn.microsoft.com/en-us/library/ms742521.aspx\"><span style=\"font-family:calibri\">Data Templating Overview</span></a><span style=\"font-family:calibri\">.</span>\r\n<p style=\"margin:0cm 0cm 0pt 36pt\"><span style=\"font-family:symbol\">·<span style=\"font:7pt 'times new roman'\">         </span><a href=\"http://msdn.microsoft.com/en-us/library/ms745683.aspx#styling_triggers\"><span style=\"color:#0000ff;font-family:calibri\">Styling and Templating</span></a>\r\n<p style=\"margin:0cm 0cm 0pt\"><span style=\"font-family:calibri\"> </span></p>\r\n<p style=\"margin:0cm 0cm 0pt\"><span><span style=\"font-family:calibri\">Regarding the toolbar, I think the best way would be to define a new scoped region for each model element (Movies in your scenario). You can check how to do this in the </span><a href=\"http://msdn.microsoft.com/en-us/library/dd458914.aspx\"><span style=\"font-family:calibri\">How to: Show a View in a Scoped Region</span></a><span style=\"font-family:calibri\"> development activity from the documentation. <br>\r\nThat will solve the part of your question: &quot;If <i>I want to reserve a region inside a control for &quot;future use by other modules&quot;, do I use a simple named region?</i>&quot;. But the second part: &quot;<i>By this &quot;everybody&quot; could add his stuff without needing to know about the others...</i>&quot; is not that straight forward because you need 2 things:</span></span></p>\r\n<p style=\"margin:0cm 0cm 0pt 36pt\"><span><span style=\"font-family:calibri\">1.</span><span style=\"font:7pt 'times new roman'\">       </span></span><span style=\"font-family:calibri\">Get the Toolbar module to know <b>when</b> to create the controls for a movie</span></p>\r\n<p style=\"margin:0cm 0cm 0pt 36pt\"><span><span style=\"font-family:calibri\">2.</span><span style=\"font:7pt 'times new roman'\">       </span></span><span style=\"font-family:calibri\">Get the toolbar to know on <b>which</b> scoped region to add the controls.</span></p>\r\n<p style=\"margin:0cm 0cm 0pt\"><span style=\"font-family:calibri\"> </span></p>\r\n<p style=\"margin:0cm 0cm 0pt\"><span><span style=\"font-family:calibri\">For item 1, the best way is to use the </span><a href=\"http://msdn.microsoft.com/en-us/library/dd458915.aspx\"><span style=\"font-family:calibri\">EventAggegator</span></a><span style=\"font-family:calibri\">. This way your MovieModule and RatingModule can communicate using events in a decoupled way.  Your MovieModule will create events and publish them when  necessary (each time a movie is selected, changed, etc).The RatingModules subscribe to these events to receive a notification. For more detail on how to do this, you can check </span><a href=\"http://msdn.microsoft.com/en-us/library/dd458942.aspx\"><span style=\"font-family:calibri\">How to: Create and Publish Events</span></a><span style=\"font-family:calibri\"> and </span><a href=\"http://msdn.microsoft.com/en-us/library/dd458904.aspx\"><span style=\"font-family:calibri\">How to: Subscribe and Unsubscribe to Events</span></a><span style=\"font-family:calibri\">.</span></span></p>\r\n<p style=\"margin:0cm 0cm 0pt\"><span style=\"font-family:calibri\"> </span></p>\r\n<p style=\"margin:0cm 0cm 0pt\"><span><span style=\"font-family:calibri\">For item 2, I think the best way to keep modules decoupled is to pass the corresponding instance of the scoped RegionManager through the event Payload. This is also explained in the </span><a href=\"http://msdn.microsoft.com/en-us/library/dd458942.aspx\"><span style=\"font-family:calibri\">How to: Create and Publish Events</span></a><span style=\"font-family:calibri\"> topic in the Prism-v2 documentation. You will have to create a class similar to the following in a separate project:</span></span></p>\r\n<blockquote dir=ltr style=\"margin-right:0px\">\r\n<p style=\"margin:0cm 0cm 0pt;vertical-align:top;word-break:break-all;line-height:140%\"><span style=\"font-size:10pt;color:blue;line-height:140%;font-family:'courier new'\">public</span> <span style=\"font-size:10pt;color:blue;line-height:140%;font-family:'courier new'\">class</span><span style=\"font-size:10pt;color:black;line-height:140%;font-family:'courier new'\"> MovieSelectedEvent : CompositePresentationEvent&lt;IRegionManager&gt;</span></p>\r\n<p style=\"margin:0cm 0cm 0pt;vertical-align:top;word-break:break-all;line-height:140%\"><span style=\"font-size:10pt;color:black;line-height:140%;font-family:'courier new'\">{</span></p>\r\n<p style=\"margin:0cm 0cm 0pt;vertical-align:top;word-break:break-all;line-height:140%\"><span style=\"font-size:10pt;color:black;line-height:140%;font-family:'courier new'\">}</span></p>\r\n</blockquote>\r\n<p style=\"margin:0cm 0cm 0pt\"><span style=\"font-family:calibri\"> </span></p>\r\n<p style=\"margin:0cm 0cm 0pt\"><span><span style=\"font-family:calibri\">You can find an example of the EventAggregator being used this way in the </span><a href=\"http://msdn.microsoft.com/en-us/library/dd458918.aspx\"><span style=\"font-family:calibri\">Event Aggregation QuickStart</span></a><span style=\"font-family:calibri\">.</span></span></p>\r\n<p style=\"margin:0cm 0cm 0pt\"><span style=\"font-family:calibri\"> </span></p>\r\n<p style=\"margin:0cm 0cm 0pt\"><span style=\"font-family:calibri\">Hope this helps you find the best way to implement your solution! If you have any further questions or if I was not clear enough, please post again.</span></p>\r\n<p style=\"margin:0cm 0cm 0pt\"><span style=\"font-family:calibri\"> </span></p>\r\n<p style=\"margin:0cm 0cm 0pt\"><span style=\"font-family:calibri\">Matias Bonaventura</span></p>\r\n<p style=\"margin:0cm 0cm 0pt\"><a href=\"http://blogs.southworks.net/\"><span style=\"font-family:calibri\">http://blogs.southworks.net/matiasb</span></a></p>\r\n</span></p>\r\n</span></p>\r\n",
    "PostedDate": "2009-04-15T13:06:29.377-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]