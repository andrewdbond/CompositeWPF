[
  {
    "Id": "263049",
    "ThreadId": "76939",
    "Html": "<p>Hi,<br>&nbsp; I have a view which lists all product items in a list box and upon selection of which I want ot show a product edit window.&nbsp; I have wired the listbox's SelectionChanged Event to the view model.<br>I am able to capture the event in the viewmodel, but the argument (selectedProduct) is always null.<br>What am I doing wrong?</p>\r\n<p>The view is defined thus:</p>\r\n<div style=\"color:Black;background-color:White\">\r\n<pre><span style=\"color:Blue\">&lt;</span><span style=\"color:#A31515\">ListBox</span>\r\n          <span style=\"color:Red\">attachedcommand:CommandBehavior.TheCommandToRun</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">{Binding Path=SelectProductCommand}</span><span style=\"color:Black\">&quot;</span>\r\n          <span style=\"color:Red\">attachedcommand:CommandBehavior.CommandParameter</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">{Binding ElementName=lbxProduct, Path=SelectedItem}</span><span style=\"color:Black\">&quot;</span>\r\n          <span style=\"color:Red\">attachedcommand:CommandBehavior.RoutedEventName</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">SelectionChanged</span><span style=\"color:Black\">&quot;</span>  \r\n        \r\n            <span style=\"color:Red\">x:Name</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">lbxProduct</span><span style=\"color:Black\">&quot;</span> <span style=\"color:Red\">Grid.ColumnSpan</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">2</span><span style=\"color:Black\">&quot;</span> <span style=\"color:Red\">ScrollViewer.VerticalScrollBarVisibility</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">Visible</span><span style=\"color:Black\">&quot;</span>\r\n                 <span style=\"color:Red\">ItemsSource</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">{Binding Path=ProductList}</span><span style=\"color:Black\">&quot;</span> <span style=\"color:Red\">Margin</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">8,36,8,4</span><span style=\"color:Black\">&quot;</span> <span style=\"color:Red\">Grid.RowSpan</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">2</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">&gt;</span>\r\n            <span style=\"color:Blue\">&lt;</span><span style=\"color:#A31515\">ListBox.BorderBrush</span><span style=\"color:Blue\">&gt;</span>\r\n                <span style=\"color:Blue\">&lt;</span><span style=\"color:#A31515\">LinearGradientBrush</span> <span style=\"color:Red\">EndPoint</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">0.5,1</span><span style=\"color:Black\">&quot;</span> <span style=\"color:Red\">StartPoint</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">0.5,0</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">&gt;</span>\r\n                    <span style=\"color:Blue\">&lt;</span><span style=\"color:#A31515\">GradientStop</span> <span style=\"color:Red\">Color</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">#FFAEB9A3</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">/&gt;</span>\r\n                    <span style=\"color:Blue\">&lt;</span><span style=\"color:#A31515\">GradientStop</span> <span style=\"color:Red\">Color</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">#FF83A985</span><span style=\"color:Black\">&quot;</span> <span style=\"color:Red\">Offset</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">0.375</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">/&gt;</span>\r\n                    <span style=\"color:Blue\">&lt;</span><span style=\"color:#A31515\">GradientStop</span> <span style=\"color:Red\">Color</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">#FF719778</span><span style=\"color:Black\">&quot;</span> <span style=\"color:Red\">Offset</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">0.379</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">/&gt;</span>\r\n                    <span style=\"color:Blue\">&lt;</span><span style=\"color:#A31515\">GradientStop</span> <span style=\"color:Red\">Color</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">#FF61846E</span><span style=\"color:Black\">&quot;</span> <span style=\"color:Red\">Offset</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">1</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">/&gt;</span>\r\n                <span style=\"color:Blue\">&lt;/</span><span style=\"color:#A31515\">LinearGradientBrush</span><span style=\"color:Blue\">&gt;</span>\r\n            <span style=\"color:Blue\">&lt;/</span><span style=\"color:#A31515\">ListBox.BorderBrush</span><span style=\"color:Blue\">&gt;</span>\r\n        <span style=\"color:Blue\">&lt;/</span><span style=\"color:#A31515\">ListBox</span><span style=\"color:Blue\">&gt;</span>\r\n</pre>\r\n<pre>I have the corresponding ViewModel defined thus:</pre>\r\n<pre><div style=\"color:Black;background-color:White\"><pre> <span style=\"color:Blue\">public</span> <span style=\"color:Blue\">class</span> ProductCollectionViewModel : ViewModelBase\r\n    {\r\n        <span style=\"color:Blue\">private</span> ObservableCollection&lt;Product&gt; productList;\r\n        <span style=\"color:Blue\">public</span> ICommand SelectProductCommand { <span style=\"color:Blue\">get</span>; <span style=\"color:Blue\">set</span>; }\r\n        <span style=\"color:Blue\">public</span> EventHandler&lt;DataEventArgs&lt;Product&gt;&gt; ProductSelected = <span style=\"color:Blue\">delegate</span> {};\r\n        <span style=\"color:Blue\">private</span> IRegionManager regionManager;\r\n        <span style=\"color:Blue\">private</span> IUnityContainer container;\r\n        <span style=\"color:Blue\">private</span> IEventAggregator eventAggregator;\r\n        <span style=\"color:Blue\">public</span> ObservableCollection&lt;Product&gt; ProductList\r\n        {\r\n            <span style=\"color:Blue\">get</span> { <span style=\"color:Blue\">return</span> productList; }\r\n            <span style=\"color:Blue\">set</span> \r\n            {\r\n                <span style=\"color:Blue\">if</span> (productList != value)\r\n                {\r\n                    productList = value;\r\n                    OnPropertyChanged(<span style=\"color:Blue\">this</span>, <span style=\"color:#A31515\">&quot;ProductList&quot;</span>);\r\n                }\r\n            }\r\n        }\r\n        <span style=\"color:Blue\">public</span> ProductCollectionViewModel(IProductDataService dataService, IEventAggregator eventAggregator, IRegionManager regionManager, IUnityContainer container)\r\n            :<span style=\"color:Blue\">base</span>()\r\n        {\r\n            <span style=\"color:Blue\">this</span>.regionManager = regionManager;\r\n            <span style=\"color:Blue\">this</span>.container = container;\r\n            <span style=\"color:Blue\">this</span>.eventAggregator = eventAggregator;\r\n            <span style=\"color:Blue\">this</span>.SelectProductCommand = <span style=\"color:Blue\">new</span> DelegateCommand&lt;Product&gt;(<span style=\"color:Blue\">this</span>.SelectProduct);\r\n            List&lt;Product&gt; prodList = dataService.GetAllProducts();\r\n            productList = <span style=\"color:Blue\">new</span> ObservableCollection&lt;Product&gt;(prodList);\r\n        }\r\n\r\n        <span style=\"color:Blue\">private</span> <span style=\"color:Blue\">void</span> SelectProduct(Product selectedProduct)\r\n        {\r\n            IRegion mainRegion = regionManager.Regions[<span style=\"color:#A31515\">&quot;MainRegion&quot;</span>];\r\n            <span style=\"color:Blue\">var</span> wsView = mainRegion.GetView(<span style=\"color:#A31515\">&quot;ProductWorkspaceView&quot;</span>);\r\n            <span style=\"color:Blue\">if</span> (wsView == <span style=\"color:Blue\">null</span>)\r\n            {\r\n                wsView = container.Resolve&lt;IProductWorkspaceView&gt;();\r\n                mainRegion.Add(wsView, <span style=\"color:#A31515\">&quot;ProductWorkspaceView&quot;</span>);\r\n            }\r\n            ProductSelected(<span style=\"color:Blue\">this</span>, <span style=\"color:Blue\">new</span> DataEventArgs&lt;Product&gt;(selectedProduct));\r\n            mainRegion.Activate(wsView);\r\n        }\r\n    }\r\n\r\nthanks,</pre>\r\n<pre>Arun</pre>\r\n</div>\r\n</pre>\r\n</div>",
    "PostedDate": "2009-12-02T23:52:54.5-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]