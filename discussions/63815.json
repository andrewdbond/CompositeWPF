[
  {
    "Id": "217001",
    "ThreadId": "63815",
    "Html": "<p>Hello,</p>\r\n<p>I am trying to get a command working in a login screen that is displayed prior to displaying the Shell. Here are the various pieces:</p>\r\n<p>App.xaml.cs:</p>\r\n<p><span style=\"font-size:10pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:#2b91af\">Bootstrapper</span> bootstrapper = <span style=\"color:blue\">new</span> <span style=\"color:#2b91af\">Bootstrapper</span>();</span></p>\r\n<p><span style=\"font-size:10pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bootstrapper.Run();</span></p>\r\n<p><span style=\"font-size:10pt\">&nbsp;</span></p>\r\n<p><span style=\"font-size:10pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">var</span> view = <span style=\"color:blue\">new</span> <span style=\"color:#2b91af\">LogOnView</span>();</span></p>\r\n<p><span style=\"font-size:10pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">var</span> presenter = <span style=\"color:blue\">new</span> <span style=\"color:#2b91af\">LogOnPresenter</span>(view);</span></p>\r\n<p><span style=\"font-size:10pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:#2b91af\">Application</span>.Current.RootVisual = view; // Ask the user to log on</span></p>\r\n<p><span style=\"font-size:10pt\">Bootstrapper.cs:</span></p>\r\n<p><span style=\"font-size:10pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">protected</span> <span style=\"color:blue\">override</span> <span style=\"color:#2b91af\">DependencyObject</span> CreateShell()</span></p>\r\n<p><span style=\"font-size:10pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p>\r\n<p><span style=\"font-size:10pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; presenter = Container.Resolve&lt;<span style=\"color:#2b91af\">ShellPresenter</span>&gt;();</span></p>\r\n<p><span style=\"font-size:10pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:#2b91af\">IShellView</span> view = presenter.View;</span></p>\r\n<p><span style=\"font-size:10pt\">&nbsp;</span></p>\r\n<p><span style=\"font-size:10pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">return</span> view <span style=\"color:blue\">as</span> <span style=\"color:#2b91af\">DependencyObject</span>;</span></p>\r\n<p><span style=\"font-size:10pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>\r\n<p><span style=\"font-size:10pt\">&nbsp;</span></p>\r\n<p><span style=\"font-size:10pt\">LogOnPresenter.cs:</span></p>\r\n<p><span style=\"font-size:10pt\">&nbsp;</span></p>\r\n<p><span style=\"font-size:10pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">public</span> <span style=\"color:#2b91af\">DelegateCommand</span>&lt;<span style=\"color:blue\">object</span>&gt; LoginCommand { <span style=\"color:blue\">get</span>; <span style=\"color:blue\">private</span> <span style=\"color:blue\">set</span>; }</span></p>\r\n<p><span style=\"font-size:10pt\">&nbsp;</span></p>\r\n<p><span style=\"font-size:10pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">public</span> LogOnPresenter(<span style=\"color:#2b91af\">LogOnView</span> view)</span></p>\r\n<p><span style=\"font-size:10pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p>\r\n<p><span style=\"font-size:10pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">this</span>.View = view;</span></p>\r\n<p><span style=\"font-size:10pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; view.Model = <span style=\"color:blue\">this</span>;</span></p>\r\n<p><span style=\"font-size:10pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">this</span>.LoginCommand = <span style=\"color:blue\">new</span> <span style=\"color:#2b91af\">DelegateCommand</span>&lt;<span style=\"color:blue\">object</span>&gt;(</span></p>\r\n<p><span style=\"color:blue;font-size:10pt\">this</span><span style=\"font-size:10pt\">.Login, <span style=\"color:blue\">this</span>.CanLogin);</span></p>\r\n<p><span style=\"font-size:10pt\">&nbsp;</span></p>\r\n<p><span style=\"font-size:10pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>\r\n<p>LogOnView.xaml.cs:</p>\r\n<p><span style=\"font-size:10pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">public</span> <span style=\"color:#2b91af\">LogOnPresenter</span> Model</span></p>\r\n<p><span style=\"font-size:10pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p>\r\n<p><span style=\"font-size:10pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">get</span> { <span style=\"color:blue\">return</span> DataContext <span style=\"color:blue\">as</span> <span style=\"color:#2b91af\">LogOnPresenter</span>; }</span></p>\r\n<p><span style=\"font-size:10pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">set</span></span></p>\r\n<p><span style=\"font-size:10pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p>\r\n<p><span style=\"font-size:10pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DataContext = <span style=\"color:blue\">value</span>;</span></p>\r\n<p><span style=\"font-size:10pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>\r\n<p><span style=\"font-size:10pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>\r\n<p>LogOnView.xaml:</p>\r\n<p><span style=\"color:blue;font-size:10pt\">&lt;</span><span style=\"color:#a31515;font-size:10pt\">UserControl</span><span style=\"color:red;font-size:10pt\"> x</span><span style=\"color:blue;font-size:10pt\">:</span><span style=\"color:red;font-size:10pt\">Class</span><span style=\"color:blue;font-size:10pt\">=&quot;UITest.LogOnView&quot;</span></p>\r\n<p><span style=\"font-size:10pt\">&nbsp;&nbsp; <span style=\"color:red\">&nbsp;xmlns</span><span style=\"color:blue\">=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;</span> </span></p>\r\n<p><span style=\"font-size:10pt\">&nbsp;&nbsp; <span style=\"color:red\">&nbsp;xmlns</span><span style=\"color:blue\">:</span><span style=\"color:red\">x</span><span style=\"color:blue\">=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;</span> </span></p>\r\n<p><span style=\"font-size:10pt\">&nbsp;&nbsp; <span style=\"color:red\">&nbsp;xmlns</span><span style=\"color:blue\">:</span><span style=\"color:red\">cal</span><span style=\"color:blue\">=&quot;clr-namespace:Microsoft.Practices.Composite.Presentation.Commands;assembly=Microsoft.Practices.Composite.Presentation&quot;</span> </span></p>\r\n<p><span style=\"font-size:10pt\">&nbsp;&nbsp; <span style=\"color:red\">&nbsp;Width</span><span style=\"color:blue\">=&quot;400&quot;</span><span style=\"color:red\"> Height</span><span style=\"color:blue\">=&quot;300&quot;&gt;</span></span></p>\r\n<p><span style=\"color:#a31515;font-size:10pt\">&nbsp;&nbsp;&nbsp; </span><span style=\"color:blue;font-size:10pt\">&lt;</span><span style=\"color:#a31515;font-size:10pt\">Grid</span><span style=\"color:red;font-size:10pt\"> x</span><span style=\"color:blue;font-size:10pt\">:</span><span style=\"color:red;font-size:10pt\">Name</span><span style=\"color:blue;font-size:10pt\">=&quot;LayoutRoot&quot;</span><span style=\"color:red;font-size:10pt\"> Background</span><span style=\"color:blue;font-size:10pt\">=&quot;White&quot;&gt;</span></p>\r\n<p><span style=\"color:#a31515;font-size:10pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style=\"color:blue;font-size:10pt\">&lt;</span><span style=\"color:#a31515;font-size:10pt\">StackPanel</span><span style=\"color:blue;font-size:10pt\">&gt;</span></p>\r\n<p><span style=\"color:#a31515;font-size:10pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style=\"color:blue;font-size:10pt\">&lt;</span><span style=\"color:#a31515;font-size:10pt\">TextBlock</span><span style=\"color:red;font-size:10pt\"> Text</span><span style=\"color:blue;font-size:10pt\">=&quot;Please log in&quot;/&gt;</span></p>\r\n<p><span style=\"color:#a31515;font-size:10pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style=\"color:blue;font-size:10pt\">&lt;</span><span style=\"color:#a31515;font-size:10pt\">Button</span><span style=\"color:red;font-size:10pt\"> Content</span><span style=\"color:blue;font-size:10pt\">=&quot;Login&quot;</span><span style=\"color:red;font-size:10pt\"> </span></p>\r\n<p><span style=\"color:red;font-size:10pt\">cal</span><span style=\"color:blue;font-size:10pt\">:</span><span style=\"color:red;font-size:10pt\">Click.Command</span><span style=\"color:blue;font-size:10pt\">=&quot;{</span><span style=\"color:#a31515;font-size:10pt\">Binding</span><span style=\"color:red;font-size:10pt\"> LoginCommand</span><span style=\"color:blue;font-size:10pt\">}&quot;</span><span style=\"font-size:10pt\"> <span style=\"color:blue\">&nbsp;/&gt;</span></span></p>\r\n<p><span style=\"color:#a31515;font-size:10pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style=\"color:blue;font-size:10pt\">&lt;/</span><span style=\"color:#a31515;font-size:10pt\">StackPanel</span><span style=\"color:blue;font-size:10pt\">&gt;</span></p>\r\n<p><span style=\"color:#a31515;font-size:10pt\">&nbsp;&nbsp;&nbsp; </span><span style=\"color:blue;font-size:10pt\">&lt;/</span><span style=\"color:#a31515;font-size:10pt\">Grid</span><span style=\"color:blue;font-size:10pt\">&gt;</span></p>\r\n<p><span style=\"color:blue;font-size:10pt\">&lt;/</span><span style=\"color:#a31515;font-size:10pt\">UserControl</span><span style=\"color:blue;font-size:10pt\">&gt;</span></p>\r\n<p>&nbsp;</p>\r\n<p>I have verified that the data context is being set properly. The issue is that my LoginCommand code is not being called when I click on the button.</p>\r\n<p>Any ideas? Any suggestions for how to debug this?</p>\r\n<p>Sorry about the formatting. Pasting from Word does not work very well.</p>\r\n<p>Thank you,</p>\r\n<p>Rick</p>",
    "PostedDate": "2009-07-28T16:55:12.373-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "217009",
    "ThreadId": "63815",
    "Html": "<p>I don't see it here but I am assuming that the this.Login method conforms to the necessary method signature. One thing you should try is to move your setting of the View.Model to be the very last item in construction.</p>\r\n<p>I seem to remember needing to do this for the data binding to work correctly.</p>\r\n<p>As an FYI, my ViewModel (Presenter) base has the following:</p>\r\n<div style=\"color:Black;background-color:White\">\r\n<pre>        <span style=\"color:Blue\">public</span> ViewModelBase(TView view, IEventAggregator aggregator, IUnityContainer container)\r\n        {\r\n            View = view;\r\n            EventAggregator = aggregator;\r\n            Container = container;\r\n\r\n            ViewTitle = <span style=\"color:#A31515\">&quot;Unknown&quot;</span>;\r\n\r\n            InitializeEvents();\r\n\r\n            InitializeCommands();\r\n\r\n            InitializeData();\r\n        }\r\n\r\n</pre>\r\n</div>\r\n<p>From this you can see that I set the basic items in a particular order and the derived class is responsible for setting the Model = this. I think I have it so I can move that to the base also but it was not&nbsp;a priority yet.&nbsp;</p>",
    "PostedDate": "2009-07-28T17:44:40.14-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "217159",
    "ThreadId": "63815",
    "Html": "<p>Moving the assignment of the Model to last fixed the problem. I understand why but it seems to me that this is pretty stupid and a sign of a poor framework implementation. The order you set the Model should not break functionality. imho</p>\r\n<p>Thank you for the fix.</p>\r\n<p>Rick</p>",
    "PostedDate": "2009-07-29T06:03:40.25-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]