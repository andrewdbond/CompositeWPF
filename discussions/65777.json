[
  {
    "Id": "223797",
    "ThreadId": "65777",
    "Html": "<p>Hi i would like more explanations about when and where i'll launch my login window.</p>\r\n<p>When i do something like that (See code below) the shell doesn't display.</p>\r\n<div style=\"color:Black;background-color:White\">\r\n<pre>     <span style=\"color:Blue\">protected</span> <span style=\"color:Blue\">override</span> DependencyObject CreateShell()\r\n        {\r\n            \r\n            Connection.Connection con = <span style=\"color:Blue\">new</span> V2000Shell.Connection.Connection(proxy, app_Langue);\r\n            con.ShowDialog();\r\n            _currentUser = con.getCurrentUser();\r\n            <span style=\"color:Blue\">if</span> (_currentUser == <span style=\"color:Blue\">null</span>)\r\n            {\r\n                Environment.Exit(-1);\r\n                <span style=\"color:Blue\">return</span> <span style=\"color:Blue\">null</span>;\r\n            }\r\n            <span style=\"color:Blue\">else</span>\r\n            {\r\n                Shell shell = <span style=\"color:Blue\">new</span> Shell();\r\n                shell.Show();\r\n                <span style=\"color:Blue\">return</span> shell;\r\n            }\r\n        }\r\n</pre>\r\n</div>\r\n<p>But when i create the shell first like that (See code below) it is displays.</p>\r\n<div style=\"color:Black;background-color:White\">\r\n<pre>    <span style=\"color:Blue\">protected</span> <span style=\"color:Blue\">override</span> DependencyObject CreateShell()\r\n        {\r\n            Shell shell = <span style=\"color:Blue\">new</span> Shell();\r\n            Connection.Connection con = <span style=\"color:Blue\">new</span> V2000Shell.Connection.Connection(proxy, app_Langue);\r\n            con.ShowDialog();\r\n            _currentUser = con.getCurrentUser();\r\n            <span style=\"color:Blue\">if</span> (_currentUser == <span style=\"color:Blue\">null</span>)\r\n            {\r\n                Environment.Exit(-1);\r\n                <span style=\"color:Blue\">return</span> <span style=\"color:Blue\">null</span>;\r\n            }\r\n            <span style=\"color:Blue\">else</span>\r\n            {\r\n                shell.Show();\r\n                <span style=\"color:Blue\">return</span> shell;\r\n            }\r\n        }\r\n</pre>\r\n</div>\r\n<p>&nbsp;</p>\r\n<p>In the two scenari, _currentUser is not null.</p>\r\n<p>Thanks</p>",
    "PostedDate": "2009-08-15T02:09:01.92-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "224819",
    "ThreadId": "65777",
    "Html": "<p>Sorry - just realised my reply wasn't valid!!</p>",
    "PostedDate": "2009-08-18T02:04:04.17-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "225061",
    "ThreadId": "65777",
    "Html": "<p>Hi Blochaou,</p>\r\n<p>I have tried to reproduce your scenario, &nbsp;assigning different values to _currentUser with no success.&nbsp; With both approaches, if the _currentUser was not null, the Shell would show. If the second approach does work for you can use it. You could also try the following approach (if it works) to avoid instantiating the Shell unless it is necessary:</p>\r\n<p><span style=\"color:black;font-size:9.5pt\" lang=EN-US>&nbsp;&nbsp;&nbsp; </span><span style=\"color:blue;font-size:9.5pt\" lang=EN-US>protected</span><span style=\"color:black;font-size:9.5pt\" lang=EN-US> </span><span style=\"color:blue;font-size:9.5pt\" lang=EN-US>override</span><span style=\"color:black;font-size:9.5pt\" lang=EN-US> DependencyObject CreateShell()</span></p>\r\n<p><span style=\"color:black;font-size:9.5pt\" lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p>\r\n<p><span style=\"color:black;font-size:9.5pt\" lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Shell shell;</span></p>\r\n<p><span style=\"color:black;font-size:9.5pt\" lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Connection.Connection con = </span><span style=\"color:blue;font-size:9.5pt\" lang=EN-US>new</span><span style=\"color:black;font-size:9.5pt\" lang=EN-US> V2000Shell.Connection.Connection(proxy, app_Langue);</span></p>\r\n<p><span style=\"color:black;font-size:9.5pt\" lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style=\"color:black;font-size:9.5pt\">con.ShowDialog();</span></p>\r\n<p><span style=\"color:black;font-size:9.5pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _currentUser = con.getCurrentUser();</span></p>\r\n<p><span style=\"color:black;font-size:9.5pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style=\"color:blue;font-size:9.5pt\" lang=EN-US>if</span><span style=\"color:black;font-size:9.5pt\" lang=EN-US> (_currentUser == </span><span style=\"color:blue;font-size:9.5pt\" lang=EN-US>null</span><span style=\"color:black;font-size:9.5pt\" lang=EN-US>)</span></p>\r\n<p><span style=\"color:black;font-size:9.5pt\" lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p>\r\n<p><span style=\"color:black;font-size:9.5pt\" lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Environment.Exit(-1);</span></p>\r\n<p><span style=\"color:black;font-size:9.5pt\" lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style=\"color:blue;font-size:9.5pt\" lang=EN-US>return</span><span style=\"color:black;font-size:9.5pt\" lang=EN-US> </span><span style=\"color:blue;font-size:9.5pt\" lang=EN-US>null</span><span style=\"color:black;font-size:9.5pt\" lang=EN-US>;</span></p>\r\n<p><span style=\"color:black;font-size:9.5pt\" lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>\r\n<p><span style=\"color:black;font-size:9.5pt\" lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style=\"color:blue;font-size:9.5pt\" lang=EN-US>else</span></p>\r\n<p><span style=\"color:black;font-size:9.5pt\" lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p>\r\n<p><span style=\"color:black;font-size:9.5pt\" lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; shell = </span><span style=\"color:blue;font-size:9.5pt\" lang=EN-US>new</span><span style=\"color:black;font-size:9.5pt\" lang=EN-US> Shell();</span></p>\r\n<p><span style=\"color:black;font-size:9.5pt\" lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; shell.Show();</span></p>\r\n<p><span style=\"color:black;font-size:9.5pt\" lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style=\"color:blue;font-size:9.5pt\" lang=EN-US>return</span><span style=\"color:black;font-size:9.5pt\" lang=EN-US> shell;</span></p>\r\n<p><span style=\"color:black;font-size:9.5pt\" lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>\r\n<p><span style=\"color:black;font-size:9.5pt\" lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>\r\n<p>The following thread provides some more information about showing login dialogs before loading the application:</p>\r\n<ul>\r\n<li><a href=\"http://compositewpf.codeplex.com/Thread/View.aspx?ThreadId=58292\">Show login modal form before</a></li>\r\n</ul>\r\n<p>Please let me know if this helps.</p>\r\n<p>Damian Schenkelman<br><a href=\"http://blogs.southworks.net/dschenkelman\">http://blogs.southworks.net/dschenkelman</a></p>",
    "PostedDate": "2009-08-18T10:56:01.97-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]