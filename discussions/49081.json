[
  {
    "Id": "163962",
    "ThreadId": "49081",
    "Html": "If you use the PopupWrapper in silverlight and try to give it a view with anything that uses a popup internally (Combo box, Listbox, etc..) silverlight crashes. It looks like it's an issue with nested popups...<div><br></div><div>From what I'm reading, the basic solution is to insert the popup control into the visual tree (don't know what all that entails). I can't figure out either why it's not already being done (by the region manager, adapter, other, etc?), or where we need to change the silverlight PopupWrapper to accomplish this.<br></div><div><br></div><div>Here are some threads that talk about this issue. </div><div><p><a href=\"http://www.telerik.com/community/forums/silverlight/window/combobox-inside-dialog.aspx\">http://www.telerik.com/community/forums/silverlight/window/combobox-inside-dialog.aspx</a></p><p><a href=\"http://silverlight.net/forums/p/32622/180376.aspx\">http://silverlight.net/forums/p/32622/180376.aspx</a> </p><p>LOOKS LIKE THE WORKAROUND IS THIS: <span style=\"font-size:8.5pt;font-family:verdana, sans-serif\">LayoutRoot.Children.Add(mypopup) BUTHOW TO IMPLEMENT?</span></p><p><span style=\"font-family:'times new roman';font-size:16px\">Any thoughts? (asap if possible???)</span></p><p><span style=\"font-family:'times new roman';font-size:16px\">Thanks,<br>Jason Jarrett</span></p><p><span style=\"font-family:verdana;font-size:11px\"><br></span></p></div>",
    "PostedDate": "2009-03-03T10:10:59.967-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "163985",
    "ThreadId": "49081",
    "Html": "I've got a hack that seems to work for now... but I can almost bet there's a more elegant solution.<div><br></div><div>In the PopupWrapper constructor I call into a hack helper method where we pull a Grid out of the root visual (using a little helper) and I have to remove all popup controls out of the tree, and re-add the new popup when it shows up.</div><div><br></div><div>I hope someone can suggest a more elegant solution...</div><div><br></div><div><div><span style=\"white-space:pre\">\t\t</span>public PopupWrapper()</div><div><span style=\"white-space:pre\">\t\t</span>{</div><div><span style=\"white-space:pre\">\t\t\t</span>this.container = new ContentControl();</div><div><br></div><div><span style=\"white-space:pre\">\t\t\t</span>this.popUp = new Popup();</div><div><span style=\"white-space:pre\">\t\t\t</span>this.popUp.Child = this.container;</div><div><br></div><div><span style=\"white-space:pre\">\t\t\t</span>HackPopupIntoVisualTree();</div><div><span style=\"white-space:pre\">\t\t</span>}</div><div><br></div><div><br></div><div><span style=\"white-space:pre\">\t\t</span>/// &lt;summary&gt;</div><div><span style=\"white-space:pre\">\t\t</span>/// This is to support an issue where a popup cannot contain another popup.</div><div><span style=\"white-space:pre\">\t\t</span>/// So a view cannot contain anything like a combobox/listbox/etc without this workaround.</div><div><span style=\"white-space:pre\">\t\t</span>/// &lt;/summary&gt;</div><div><span style=\"white-space:pre\">\t\t</span>private void HackPopupIntoVisualTree()</div><div><span style=\"white-space:pre\">\t\t</span>{</div><div><span style=\"white-space:pre\">\t\t\t</span>var g = XamlExtensions.FindName((FrameworkElement)Application.Current.RootVisual, &quot;PopupGridContainer&quot;) as Grid;</div><div><br></div><div><span style=\"white-space:pre\">\t\t\t</span>Debug.Assert(g != null, &quot;The current shell does not have a &lt;Grid x:Name=\\&quot;PopupGridContainer\\&quot;&gt; defined. Cannot use the popup region adapter without this grid.&quot;);</div><div><br></div><div><span style=\"white-space:pre\">\t\t\t</span>var existingPopupsQuery = g.Children.Where(w =&gt; w.GetType() == typeof(Popup));</div><div><br></div><div><span style=\"white-space:pre\">\t\t\t</span>foreach (var item in existingPopupsQuery.ToArray())</div><div><span style=\"white-space:pre\">\t\t\t\t</span>g.Children.Remove(item);</div><div><br></div><div><span style=\"white-space:pre\">\t\t\t</span>Debug.Assert(existingPopupsQuery.Count() == 0);</div><div><br></div><div><span style=\"white-space:pre\">\t\t\t</span>g.Children.Insert(0, popUp);</div><div><span style=\"white-space:pre\">\t\t</span>}</div><div><br></div></div>",
    "PostedDate": "2009-03-03T10:58:35.45-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]