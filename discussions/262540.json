[
  {
    "Id": "631983",
    "ThreadId": "262540",
    "Html": "\r\n<p>Hi there,</p>\r\n<p>I've the Window shell and I've created a new window that is shown as a Dialog. This new window has its own region named &quot;WizardStepsRegion&quot; and I inject some views inside it.</p>\r\n<p>The first time I click the button that shows the Dialog it works as expected, but the second time I get the following exception:<br>\r\n<br>\r\nRegionCreationException:<br>\r\nAn exception occurred while creating a region with name 'WizardStepsRegion'. The exception was: System.InvalidOperationException: Specified element is already the logical child of another element. Disconnect it first.<br>\r\n<br>\r\nI don't understand why I get such exception because I'm creating a new RegionManager to add the regions of the Dialog and I get a new fresh instance every time I show the dialog.\r\n<br>\r\n<br>\r\nCan somebody explain me what's wrong please?<br>\r\n<br>\r\nHere's the code<br>\r\n<br>\r\n<strong>Wizard.xaml</strong><br>\r\n<br>\r\n</p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre><span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">DockPanel</span> <span style=\"color:red\">LastChildFill</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">True</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">&gt;</span> \r\n <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">StackPanel</span> <span style=\"color:red\">Orientation</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Horizontal</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">HorizontalAlignment</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Right</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">DockPanel.Dock</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Bottom</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">&gt;</span> \r\n  <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Button</span> <span style=\"color:red\">Content</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">_Previous</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">Margin</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">0, 0, 10, 0</span><span style=\"color:black\">&quot;</span> <span style=\"color:blue\">/&gt;</span> \r\n  <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Button</span> <span style=\"color:red\">Content</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">_Next</span><span style=\"color:black\">&quot;</span> <span style=\"color:blue\">/&gt;</span> \r\n <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">StackPanel</span><span style=\"color:blue\">&gt;</span> \r\n <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">ContentControl</span> <span style=\"color:red\">cal:RegionManager.RegionName</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">WizardStepsRegion</span><span style=\"color:black\">&quot;</span> <span style=\"color:blue\">/&gt;</span>\r\n<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">DockPanel</span><span style=\"color:blue\">&gt;</span>\r\n</pre>\r\n</div>\r\n<p><br>\r\n<strong>Wizard.xaml.cs</strong><br>\r\n<br>\r\n</p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre>[Export]\r\n[PartCreationPolicy(CreationPolicy.NonShared)]\r\n<span style=\"color:green\">//[RegionMemberLifetime(KeepAlive = false)]</span>\r\n<span style=\"color:blue\">public</span> <span style=\"color:blue\">partial</span> <span style=\"color:blue\">class</span> Wizard : Window\r\n{ \r\n  <span style=\"color:blue\">public</span> IRegionManager regionManager; \r\n  RegionManager regMan = <span style=\"color:blue\">new</span> RegionManager();\r\n\r\n  [ImportingConstructor] \r\n  <span style=\"color:blue\">public</span> Wizard(IRegionManager rm) \r\n  { \r\n    InitializeComponent(); \r\n    regionManager = rm; \r\n    RegionManager.SetRegionManager(<span style=\"color:blue\">this</span>, regMan); \r\n    regMan.RegisterViewWithRegion(<span style=\"color:#a31515\">&quot;WizardStepsRegion&quot;</span>, <span style=\"color:blue\">typeof</span>(Step1View)); \r\n  }\r\n\r\n  <span style=\"color:blue\">private</span> <span style=\"color:blue\">void</span> Window_Closing(<span style=\"color:blue\">object</span> sender, System.ComponentModel.CancelEventArgs e) \r\n  {\r\n    <span style=\"color:blue\">foreach</span> (<span style=\"color:blue\">object</span> v <span style=\"color:blue\">in</span> regMan.Regions[<span style=\"color:#a31515\">&quot;WizardStepsRegion&quot;</span>].Views)\r\n    {\r\n      regMan.Regions[<span style=\"color:#a31515\">&quot;WizardStepsRegion&quot;</span>].Remove(v); \r\n    } \r\n  }\r\n</pre>\r\n</div>\r\n<p></p>\r\n<p>&nbsp;</p>\r\n<p><strong>Here's the code that create and show the dialog</strong></p>\r\n<p><span></span></p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre>Wizard wizard = (Wizard)ServiceLocator.Current.GetInstance(<span style=\"color:blue\">typeof</span>(Wizard));\r\nwizard.ShowDialog();\r\n\r\n\r\n</pre>\r\n</div>\r\n<p>Thank you</p>\r\n",
    "PostedDate": "2011-06-23T10:27:59.09-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "632042",
    "ThreadId": "262540",
    "Html": "<p>Hi,</p>\r\n<p>It would be helpful if you could provide us with a repro sample application, so that we can help you find the cause for the issue you're experiencing.</p>\r\n<p>Thanks,</p>\r\n<p>Guido Leandro Maliandi<br /> <a href=\"http://blogs.southworks.net/gmaliandi\">http://blogs.southworks.net/gmaliandi</a></p>",
    "PostedDate": "2011-06-23T11:56:26.717-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]