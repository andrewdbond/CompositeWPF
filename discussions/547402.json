[
  {
    "Id": "1252356",
    "ThreadId": "547402",
    "Html": "Hi!\r<br />\n<br />\nI'm having problems with my application after upgrading from 4.1 to 5.0.\r<br />\n<br />\nCode that worked with PRISM 4.1 is as follows:<br />\n<pre><code>            // Build query parameters\n            NavigationParameters query = new NavigationParameters(); // UriQuery previously\n            query.Add(&quot;createRegionManagerScope&quot;, &quot;true&quot;);\n            query.Add(&quot;title&quot;, TitleText);\n            query.Add(&quot;dashboardID&quot;, DashboardID.ToString());\n\n            // Navigate to DashboardTabView with a title for the Tab item\n            this.regionManager.Regions[RegionNames.TabRegion].RequestNavigate(\n                new Uri(&quot;EDM_ContractWaterFlowExtensionTabView&quot; + query.ToString(), UriKind.Relative),\n                (result) =&gt;\n                {\n                    // Parameters for view\n                    NavigationParameters viewParams = new NavigationParameters();\n                    // Current control instance ID\n                    viewParams.Add(&quot;ControlInstanceID&quot;, ControlInstance.Id.ToString());\n\n                    // Get scoped region manager and use it to navigate to sub view\n                    var myRegionManager = result.ExtractRegionManager();\n                    myRegionManager.RequestNavigate(RegionNames.TabContentRegion,\n                        new Uri(&quot;EDM_ContractWaterFlowSiteListView&quot; + viewParams.ToString(), UriKind.Relative)\n                        );\n                });</code></pre>\n\nBut after upgrading to 5.0 I get following exception when requesting navigation to view in a region that already has one view (tab). This TabRegion is TabControl (which at this point already has one view with TabContentRegion) and I try to create another Tab with scoped region manager when navigating to the view EDM_ContractWaterFlowExtensionTabView.\r<br />\n<br />\nAn exception of type 'Microsoft.Practices.Prism.Regions.UpdateRegionsException' occurred in Microsoft.Practices.Prism.Composition.dll but was not handled in user code\r<br />\n<br />\nAdditional information: An exception occurred while trying to create region objects. \r<br />\n<br />\nInnerException: Region with the given name is already registered: <strong>TabContentRegion</strong>\r<br />\n<br />\n<strong>Changes that I have done are only changing UriQuery to NavigationParameters.</strong>\r<br />\nSo adding first tab (view) works but when adding second one I get the exception.\r<br />\n<br />\nViewModel of the view that I try to navigate to is as follows:<br />\n<pre><code>    [Export(typeof(EDM_ContractWaterFlowExtensionTabViewModel)), PartCreationPolicy(CreationPolicy.NonShared)]\n    public class EDM_ContractWaterFlowExtensionTabViewModel : DashboardTabViewModelBase\n    {\n    // ...\n    }</code></pre>\n\nDashboardTabViewModelBase (<strong>NotificationObject changed to BindableBase</strong>):<br />\n<pre><code>    [Export(typeof(DashboardTabViewModelBase)), PartCreationPolicy(CreationPolicy.NonShared)]\n    public abstract class DashboardTabViewModelBase : BindableBase, INavigationAware, IRegionManagerAware\n    {\n    // ...\n    }</code></pre>\n\nBr,\r<br />\n<br />\nKalle<br />\n",
    "PostedDate": "2014-06-03T05:43:44.977-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1253500",
    "ThreadId": "547402",
    "Html": "Hi Kalle,\r<br />\n<br />\nI believe the issue you are having is related to the scoped region manager and that the same is not being created so all the regions are being registered in the same region manager, causing the issue you are describing. \r<br />\n<br />\nIt seems you are using the approach described <a href=\"http://blogs.southworks.net/aadami/2011/11/30/prism-region-navigation-and-scoped-regions/\" rel=\"nofollow\">here</a> and that might not work anymore in PRISM 5.\r<br />\n<br />\nCould you please provide a small sample reproducing the issue so we can take a further look to it?\r<br />\n<br />\nThanks,\r<br />\nEz.\r<br />\n<a href=\"http://blogs.southworks.net\" rel=\"nofollow\">http://blogs.southworks.net</a><br />\n",
    "PostedDate": "2014-06-05T14:46:06.577-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1253657",
    "ThreadId": "547402",
    "Html": "Hi!\r<br />\n<br />\nThanks for the reply. You are correct, I am using approach that you mentioned with RegionManagerAwareBehavior. I'm now proceeding with my development using older branch that is still using Prism 4.1 but it would be nice to be able to use 5.0 at some point. I try to come up with some sample that can be used to reproduce this issue. There seems to have one guy with similar problems asking help on that scoped region thread you mentioned so good to know that I'm not the only one with this problem.\r<br />\n<br />\nIRegionNavigationService interface that is used in CustomRegionNavigationService in this approach has INavigateAsync interface that has method RequestNavigate and at least that one got new NavigationParameters parameter in 5.0 and I don't have correct implementation for it... although I'm not sure if that should be the problem because parameters can (to my knowledge) be also passed to the navigation request like before with older version (as part of the Uri).\r<br />\n<br />\nBr,\r<br />\n<br />\nKalle<br />\n",
    "PostedDate": "2014-06-06T03:59:05.547-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]