[
  {
    "Id": "955694",
    "ThreadId": "406678",
    "Html": "\r\n<p>We have a strange behavior since Microsoft published the patch KB2783534 via the windows update on the December 11, 2012.</p>\r\n<p>Our included font *.otf is not showing anymore. I have a controls library project with FontFamily Style definition as follows:</p>\r\n<p>&lt;FontFamily x:Key=&quot;FontFamilyTheSerifBW6SemiBold&quot;&gt;/ControlsLib;component/Fonts/TheSerifB-W6SemiBold.otf#TheSerifB W6 SemiBold&lt;/FontFamily&gt;</p>\r\n<p>I use this style in different projects as a StaticResource. My solution is built with PRISM and MefBootstrapping. So the styles are merged in the main solution's App.xaml. The modules (with the reference to the Style) will only get on runtime the Style definition\r\n of the FontFamily).</p>\r\n<p>Up to now it was working properly. But with the new patch installed, the font is not visibible anymore.</p>\r\n<p>I isolated the program down to Region usage. When I use the Font Lib within a module, the font is not shown anymore, when I load the module in my shell.</p>\r\n<p>Does anyone has an idea how to solve that?</p>\r\n<p>thanks a lot.</p>\r\n<p>kind regards</p>\r\n<p>dave</p>\r\n",
    "PostedDate": "2012-12-13T09:38:07.703-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "955782",
    "ThreadId": "406678",
    "Html": "\r\n<p>Hi Dave,</p>\r\n<p>As explained in the following article, this update seems to change how the <strong>\r\nOpenType Font (OTF)</strong> driver works, which could explain why your font is not working after the update:</p>\r\n<ul>\r\n<li><a href=\"http://technet.microsoft.com/en-us/security/bulletin/ms12-078\">Microsoft Security Bulletin MS12-078 - Critical</a>\r\n</li></ul>\r\n<p>As a starting point, I believe it could be useful to check the following points, to know how this is affecting your applications:</p>\r\n<ul>\r\n<li>Does this happens only in the modules? </li><li>Is this issue also present when using this font in a <strong>Silverlight-</strong>only application, without\r\n<strong>Prism</strong>? </li><li>If you change the <strong>OTF </strong>font with a different one, does this behavior persists?\r\n</li></ul>\r\n<p>Regards,</p>\r\n<p>Damian Cherubini<br>\r\n<a href=\"http://blogs.southworks.net/dcherubini\">http://blogs.southworks.net/dcherubini</a></p>\r\n<ul>\r\n</ul>\r\n",
    "PostedDate": "2012-12-13T13:04:07.047-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "956007",
    "ThreadId": "406678",
    "Html": "\r\n<p>Thanks for your comments. I isolated the Problem down to the module usage. Without PRISM and Moddules the OTF Font is working without any Problem.</p>\r\n<p>Kind regards dave</p>\r\n",
    "PostedDate": "2012-12-14T02:28:28.407-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "956207",
    "ThreadId": "406678",
    "Html": "\r\n<p>Hi Dave,</p>\r\n<p>We tried to reproduce the behavior you are mentioning by creating a small <strong>\r\nPrism</strong>, <strong>Silverlight </strong>application based on the descriptions you made. In our case we used a Windows 7 environment with the aforementioned updates. In it we defined a static resource\r\n<strong>FontFamily </strong>containing an <strong>OTF </strong>file resource from a referenced project like you mentioned, and merged this resource in the main\r\n<strong>App.xaml</strong> file so it could be consumed by other modules. So far we could use this resource in different modules at run time without finding any problems.</p>\r\n<p>Based on this, I believe that perhaps the problem could be related to the custom\r\n<strong>OTF </strong>font you are using. Have you tried if this behavior persists when using a different font or different font types?</p>\r\n<p>Regards,</p>\r\n<p>Agustin Adami<a href=\"http://blogs.southworks.net/aadami\"><br>\r\nhttp://blogs.southworks.net/aadami</a></p>\r\n",
    "PostedDate": "2012-12-14T09:45:00.827-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "956781",
    "ThreadId": "406678",
    "Html": "\r\n<p>Ok, that sound promising :) I hope it is still possible to use the OTF font as expected before the update. But can you please try one more thing?</p>\r\n<p>The kind of usage in my project (where the OTF resource is not working):</p>\r\n<p>Projects:</p>\r\n<ul>\r\n<li>FontLib -&gt; Silverlight Class Library\r\n<ul>\r\n<li>&nbsp;&lt;FontFamily x:Key=&quot;FontFamilyTheSansBW9Black&quot;&gt;/FontLib;component/Fonts/TheSansB-W9Black.otf#TheSansB W9 Black&lt;/FontFamily&gt;\r\n</li></ul>\r\n</li><li>NotificationControls -&gt; Silverlight Class Library\r\n<ul>\r\n<li>MyNotification UserControl\r\n<ul>\r\n<li>&lt;TextBlock Text=&quot;My Text...&quot; FontSize=&quot;30&quot; FontFamily=&quot;{StaticResource FontFamilyTheSansBW9Black}&quot;&gt;&lt;/TextBlock&gt;\r\n</li></ul>\r\n</li></ul>\r\n</li><li>MyModule -&gt; Silverlight Class Library\r\n<ul>\r\n<li>MyModule UserControl with following content:\r\n<ul>\r\n<li>&nbsp;&lt;Grid x:Name=&quot;LayoutRoot&quot; Background=&quot;White&quot;&gt; &lt;notificationControls:MyNotification/&gt; &nbsp;&lt;/Grid&gt;\r\n</li></ul>\r\n</li></ul>\r\n</li><li>TestFontApplication -&gt; Silverlight Application Library\r\n<ul>\r\n<li>App.xaml: </li></ul>\r\n</li></ul>\r\n<div style=\"color:black; background-color:white\">\r\n<pre> <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Application.Resources</span><span style=\"color:blue\">&gt;</span>\n        <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">ResourceDictionary</span><span style=\"color:blue\">&gt;</span>\n            <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">ResourceDictionary.MergedDictionaries</span><span style=\"color:blue\">&gt;</span>\n                <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">ResourceDictionary</span> <span style=\"color:red\">Source</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">/FontLib;component/FontStyles.xaml</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">&gt;</span><span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">ResourceDictionary</span><span style=\"color:blue\">&gt;</span>               \n            <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">ResourceDictionary.MergedDictionaries</span><span style=\"color:blue\">&gt;</span>\n        <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">ResourceDictionary</span><span style=\"color:blue\">&gt;</span>\n    <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">Application.Resources</span><span style=\"color:blue\">&gt;</span></pre>\r\n<pre><span style=\"color:blue\"><br></span></pre>\r\n</div>\r\n<p>I use the NotificationControls as a Content Provider for my Notifications. There I use the specific StaticResource of the FontLib.</p>\r\n<p>This NotificationControls Lib I use in the MyModule Library. And the MyModule Library is used via ModuleExport in the TestFontApplication.</p>\r\n<p>&nbsp;</p>\r\n<p>Is the OTF Font still visible when you set up your project as described above? Thank you mery much for your help.</p>\r\n<p>Kind regards</p>\r\n<p>Dave</p>\r\n",
    "PostedDate": "2012-12-16T23:50:05.173-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "956970",
    "ThreadId": "406678",
    "Html": "\r\n<p>Hi Dave,</p>\r\n<p>This scenario was very similar to the one I used to run the tests before. I made some minor changes based on your new descriptions and the font is still visible. This time I also run the sample in a\r\n<strong>Windows 8</strong> installation.</p>\r\n<p>I uploaded the sample to my <a href=\"https://skydrive.live.com/?cid=7890102B5B8BC928&id=7890102B5B8BC928!103\">\r\nSkydrive account</a> under the name &quot;<strong>Silverlight&OTFStaticResource</strong>&quot;. Note that I didn't upload any\r\n<strong>OTF </strong>files within it, hence in order to run the sample it will require adding them to the\r\n<strong>ClassLibrary1 </strong>project in the solution and redefine the file names in the\r\n<strong>ResourceDictionary </strong>(<strong>Styles2.xaml</strong> file).</p>\r\n<p>On the other hand, If this behavior persists with your specific font, perhaps as a possible approach you could try converting the font to other format.</p>\r\n<p>Best Regards,</p>\r\n<p>Agustin Adami<a href=\"http://blogs.southworks.net/aadami\"><br>\r\nhttp://blogs.southworks.net/aadami</a></p>\r\n",
    "PostedDate": "2012-12-17T06:28:15.327-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "958201",
    "ThreadId": "406678",
    "Html": "\r\n<p>hey</p>\r\n<p>Thank you for your effort. I tried it out and it is working. But one thing to my solution is different.</p>\r\n<p>Can you try one more thing please?</p>\r\n<p>Can you add the MyUserControl as a UserControl in your HelloWorldModule? Thats how I am using the Notification Lib. Within other modules... Is it still working? (On my side, it doesn't compile, I get a runtime error... but I think my Visual Studio behaves\r\n a little strange lately :)</p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre><span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">StackPanel</span><span style=\"color:blue\">&gt;</span>\r\n        <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">TextBlock</span> <span style=\"color:red\">Text</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Module Text</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">FontFamily</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">{StaticResource FontFamilyCustom}</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">Foreground</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Green</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">HorizontalAlignment</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Center</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">VerticalAlignment</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Center</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">FontSize</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">24</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">&gt;</span><span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">TextBlock</span><span style=\"color:blue\">&gt;</span>\r\n        <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">Button</span> <span style=\"color:red\">Click</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Button_Click</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">&gt;</span>Load remote module<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">Button</span><span style=\"color:blue\">&gt;</span>        \r\n        <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">controls2</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">MyUserControl</span><span style=\"color:blue\">&gt;</span><span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">controls2</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">MyUserControl</span><span style=\"color:blue\">&gt;</span>\r\n<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">StackPanel</span><span style=\"color:blue\">&gt;</span>\r\n</pre>\r\n</div>\r\n<p>Kind Regards</p>\r\n<p>Dave</p>\r\n",
    "PostedDate": "2012-12-19T01:16:04.97-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "958711",
    "ThreadId": "406678",
    "Html": "\r\n<p>Hi Dave,</p>\r\n<p>I took Agustin's sample and modified it to include the <strong>MyUserControl </strong>\r\ncontrol in the <strong>HelloWorldView </strong>as you mentioned. I could make it work correctly after performing the following additions to the sample:</p>\r\n<ul>\r\n<li>First, in the <strong>HelloWorldModule </strong>add a reference the <strong>MyControls\r\n</strong>project. </li><li>Second, you need to work around a known limitation that appears when in a <strong>\r\nPrism/Silverlight</strong> application, inside a <strong>Module </strong>(e.g. <strong>\r\nHelloWorldModule</strong>,) you include a control for another assembly (e.g. <strong>\r\nMyControls</strong>) only in XAML, without using this assembly in the <strong>Module</strong>'s code. For some reason, it seems that in such cases, the assembly containing the control is not loaded, causing run-time exceptions. In order order to workaround\r\n this, you can do one of the following approaches:\r\n<ul>\r\n<li>Use the assembly containing the control in the <strong>HelloWorldModule</strong>'s code. For example, you could create an instance of\r\n<strong>MyControls</strong>' <strong>Class1 </strong>in the <strong>HelloWorldView</strong>'s\r\n<strong>Constructor </strong>and discard it. Like this, <strong>Silverlight </strong>\r\nwill know that it should load the <strong>MyControls</strong>' assembly when loading the\r\n<strong>HelloWorldModule</strong>. </li><li>Add a reference to the <strong>MyControls </strong>project in the <strong>Shell\r\n</strong>project (e.g. <strong>HelloWorld.Silverlight</strong>.) Like this, the <strong>\r\nMyControls</strong>' assembly will be loaded at start-up, avoiding run-time exceptions when loading the\r\n<strong>HelloWorldModule</strong>. </li></ul>\r\n</li></ul>\r\n<p>After performing the aforementioned changes, the <strong>HelloWorldModule </strong>\r\nloaded an the fonts showed correctly. Please let us know if this works in your environment too.</p>\r\n<p>Note that the aforementioned known limitation is not related to font files but to XAML controls defined in referenced assemblies and its been known long before the\r\n<strong>Windows </strong>update. So in my opinion, it's highly unprovable that this limitation is related to you original issue.</p>\r\n<p>As a side note, users have reported problems about <strong>OTF </strong>fonts being rendered incorrectly in several applications (for example\r\n<strong>PowerPoint</strong>) after applying the update, as mentioned in <strong>Known Issues</strong> section of the following article (which forms part of the\r\n<a href=\"http://technet.microsoft.com/en-us/security/bulletin/ms12-078\">Microsoft Security Bulletin MS12 - 078</a>.) According to this,\r\n<strong>Microsoft </strong>seems to be investing this issue:</p>\r\n<ul>\r\n<li><a href=\"http://support.microsoft.com/kb/2753842\">MS12-078: Description of the security update for the Windows OpenType Compact Font Format (CFF) driver: December 11, 2012</a>\r\n</li></ul>\r\n<p>I hope you find this useful,</p>\r\n<p>Damian Cherubini<br>\r\n<a href=\"http://blogs.southworks.net/dcherubini\">http://blogs.southworks.net/dcherubini</a></p>\r\n<ul>\r\n</ul>\r\n",
    "PostedDate": "2012-12-19T13:23:20.63-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "960140",
    "ThreadId": "406678",
    "Html": "\r\n<p>Hey Damian</p>\r\n<p>Thank you very much for this profound answer. I will check and give Feedback ASAP.</p>\r\n<p>Kind regards Dave</p>\r\n",
    "PostedDate": "2012-12-20T00:34:59.063-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]