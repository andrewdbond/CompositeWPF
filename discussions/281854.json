[
  {
    "Id": "707574",
    "ThreadId": "281854",
    "Html": "<p>I am upgrading from composite application block to prism 4.0. My custom region adapters are not working. They are not getting added to the region manager. I have added the code snippet below. Any help greatly appreciated.</p>\n<p>Thanks!</p>\n<p>&nbsp;</p>\n<div style=\"background-color: white; color: black;\">\n<pre><span style=\"color: blue;\">protected</span> <span style=\"color: blue;\">override</span> RegionAdapterMappings ConfigureRegionAdapterMappings()\r\n      {\r\n         RegionAdapterMappings mappings = <span style=\"color: blue;\">base</span>.ConfigureRegionAdapterMappings();\r\n         mappings.RegisterMapping(<span style=\"color: blue;\">typeof</span>(Ribbon), <span style=\"color: blue;\">new</span> RibbonRegionAdapter());\r\n\r\n         <span style=\"color: blue;\">return</span> mappings;\r\n      }\r\n</pre>\n</div>\n<p>&nbsp;</p>\n<div style=\"background-color: white; color: black;\">\n<pre>   <span style=\"color: blue;\">public</span> <span style=\"color: blue;\">sealed</span> <span style=\"color: blue;\">class</span> RibbonRegionAdapter : IRegionAdapter\r\n   {\r\n      <span style=\"color: blue;\">#region</span> Fields\r\n      <span style=\"color: blue;\">private</span> Ribbon _ribbon;\r\n      <span style=\"color: blue;\">#endregion</span>\r\n      \r\n      <span style=\"color: blue;\">#region</span> IRegionAdapter Members\r\n      <span style=\"color: gray;\">///</span> <span style=\"color: gray;\">&lt;summary&gt;</span>\r\n      <span style=\"color: gray;\">///</span><span style=\"color: green;\"> Adapts a &lt;see cref=\"Ribbon\"/&gt; and binds it to a new &lt;see cref=\"IRegion\"/&gt;.</span>\r\n      <span style=\"color: gray;\">///</span> <span style=\"color: gray;\">&lt;/summary&gt;</span>\r\n      <span style=\"color: gray;\">///</span> <span style=\"color: gray;\">&lt;param name=\"regionTarget\"&gt;</span><span style=\"color: green;\">The &lt;see cref=\"Ribbon\"/&gt; to adapt&lt;/param&gt;</span>\r\n      <span style=\"color: gray;\">///</span> <span style=\"color: gray;\">&lt;param name=\"regionName\"&gt;</span><span style=\"color: gray;\">&lt;/param&gt;</span>\r\n      <span style=\"color: gray;\">///</span> <span style=\"color: gray;\">&lt;returns&gt;</span><span style=\"color: green;\">The new &lt;see cref=\"IRegion\"/&gt; that the &lt;paramref name=\"regionTarget\"/&gt;is bound to.&lt;/returns&gt;</span>\r\n      <span style=\"color: blue;\">public</span> IRegion Initialize(<span style=\"color: blue;\">object</span> regionTarget, <span style=\"color: blue;\">string</span> regionName)\r\n      {\r\n         _ribbon = regionTarget <span style=\"color: blue;\">as</span> Ribbon;\r\n         IRegion region = <span style=\"color: blue;\">null</span>;\r\n         <span style=\"color: blue;\">if</span> (_ribbon != <span style=\"color: blue;\">null</span>)\r\n         {\r\n            region = CreateRegion();\r\n            region.Name = regionName;\r\n            region.Views.CollectionChanged += Views_CollectionChanged;\r\n         }\r\n         <span style=\"color: blue;\">return</span> region;\r\n      }\r\n\r\n      <span style=\"color: blue;\">void</span> Views_CollectionChanged(<span style=\"color: blue;\">object</span> sender, NotifyCollectionChangedEventArgs e)\r\n      {\r\n         <span style=\"color: blue;\">if</span> (e.Action == NotifyCollectionChangedAction.Add)\r\n         {\r\n            _ribbon.Tabs.AddRange(e.NewItems.Cast&lt;Tab&gt;().ToArray());\r\n         }\r\n\r\n      }\r\n\r\n      <span style=\"color: blue;\">#endregion</span>\r\n      <span style=\"color: gray;\">///</span> <span style=\"color: gray;\">&lt;summary&gt;</span>\r\n      <span style=\"color: gray;\">///</span><span style=\"color: green;\"> Creates a new instance of &lt;see cref=\"SingleActiveRegion\"/&gt;.</span>\r\n      <span style=\"color: gray;\">///</span> <span style=\"color: gray;\">&lt;/summary&gt;</span>\r\n      <span style=\"color: gray;\">///</span> <span style=\"color: gray;\">&lt;returns&gt;</span><span style=\"color: green;\">A new instance of &lt;see cref=\"SingleActiveRegion\"/&gt;.&lt;/returns&gt;</span>\r\n      <span style=\"color: blue;\">public</span> IRegion CreateRegion()\r\n      {\r\n         <span style=\"color: blue;\">return</span> <span style=\"color: blue;\">new</span> SingleActiveRegion();\r\n      }\r\n\r\n\r\n   }\r\n<div style=\"color: black; background-color: white;\"><pre>XAML code:</pre>\n<pre> <span style=\"color: green;\">&lt;!-- Ribbon --&gt;</span>\r\n      &lt;ribbon:Ribbon x:Uid=\"ribbon:Ribbon_1\"\r\n                     cal:RegionManager.RegionName=\"{x:Static common:RegionNames.RibbonRegion}\"\r\n                     Grid.Row=\"0\"\r\n                     IsMinimized=\"True\"&gt;\r\n\r\n         &lt;ribbon:Ribbon.ApplicationMenu&gt;\r\n            &lt;ribbon:ApplicationMenu x:Uid=\"ribbon:ApplicationMenu_1\" \r\n                                    cal:RegionManager.RegionName=\"{x:Static common:RegionNames.ApplicationMenuRegion}\" \r\n                                    Width=\"125\"/&gt;\r\n         &lt;/ribbon:Ribbon.ApplicationMenu&gt;\r\n\r\n      <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">ribbon</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">Ribbon</span><span style=\"color: blue;\">&gt;</span>\r\n</pre>\n</div>\n</pre>\n</div>",
    "PostedDate": "2011-12-05T07:43:42.193-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "707676",
    "ThreadId": "281854",
    "Html": "<p>Hi,</p>\n<p>Based on my understanding, it might be possible that this adapter is not working properly anymore due to the differences in the Prism 4 version. For example, this adapter implements the interface <strong>IRegionAdapter</strong> directly, however, in Prism v4, most region adapters inherit from the <strong>RegionAdapterBase&lt;T&gt;</strong> class (which implements the <strong>IRegionAdapter </strong>interface).</p>\n<p>As far as I know, regions adapters for ribbon controls are not supported in Prism v4 as out of the box. However, you might find some code examples of ribbon region adapters for Prism v4 in third party sites that could be useful to achieve the requirements of your scenario.</p>\n<p>Regards,</p>\n<p>Damian Cherubini<br /> <a href=\"http://blogs.southworks.net/dcherubini\">http://blogs.southworks.net/dcherubini</a></p>",
    "PostedDate": "2011-12-05T10:51:23.897-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "707701",
    "ThreadId": "281854",
    "Html": "<p>Thanks Damian,</p>\r\n<p>I am experiencing the same problem even with StatusBar region adapters. And this adapter derives from <span style=\"font-family: Consolas; color: #2b91af; font-size: x-small;\"><span style=\"font-family: Consolas; color: #2b91af; font-size: x-small;\"><span style=\"font-family: Consolas; color: #2b91af; font-size: x-small;\"><span style=\"font-family: Consolas; color: #2b91af; font-size: x-small;\">RegionAdapterBase</span></span></span></span><span style=\"font-family: Consolas; font-size: x-small;\"><span style=\"font-family: Consolas; font-size: x-small;\">&lt;</span></span><span style=\"font-family: Consolas; color: #2b91af; font-size: x-small;\"><span style=\"font-family: Consolas; color: #2b91af; font-size: x-small;\"><span style=\"font-family: Consolas; color: #2b91af; font-size: x-small;\">StatusBar</span></span></span><span style=\"font-family: Consolas; font-size: x-small;\"><span style=\"font-family: Consolas; font-size: x-small;\">&gt;.</span></span></p>",
    "PostedDate": "2011-12-05T11:30:32.3-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "707710",
    "ThreadId": "281854",
    "Html": "<p>Hi,</p>\r\n<p>It would be useful if you could provide us with a repro-sample application portraying the problems that you are mentioning, so we can help you find a possible solution for them (you could upload the repro-sample application, for example, to <a href=\"https://skydrive.live.com/\">Skydrive</a>)</p>\r\n<p>Regards,</p>\r\n<p>Damian Cherubini<br /> <a href=\"http://blogs.southworks.net/dcherubini\">http://blogs.southworks.net/dcherubini</a></p>",
    "PostedDate": "2011-12-05T11:44:37.857-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "707758",
    "ThreadId": "281854",
    "Html": "<p>sorry i do not have a sample app, but i can post all the necessary code.</p>\r\n<div style=\"color: black; background-color: white;\">\r\n<pre><span style=\"color: #000000;\"><strong>XAML code,</strong></span></pre>\r\n<pre><span style=\"color: green;\">&lt;!-- Status Bar --&gt;</span>\r\n      &lt;StatusBar x:Uid=\"StatusBar_1\" \r\n                 cal:RegionManager.RegionName=\"{x:Static common:RegionNames.DashboardStatusBarRegion}\"\r\n                 Style=\"{StaticResource normalStatusBarStyle}\"\r\n                 Height=\"23\"\r\n                 Grid.Row=\"3\" /&gt;\r\n<strong>In the Bootstrapper</strong>,</pre>\r\n<pre><div style=\"color: black; background-color: white;\"><pre><span style=\"color: blue;\">protected</span> <span style=\"color: blue;\">override</span> RegionAdapterMappings ConfigureRegionAdapterMappings()\r\n      {\r\n         RegionAdapterMappings mappings = <span style=\"color: blue;\">base</span>.ConfigureRegionAdapterMappings();\r\n         mappings.RegisterMapping(<span style=\"color: blue;\">typeof</span>(StatusBar), <span style=\"color: blue;\">new</span> StatusBarRegionAdapter(<span style=\"color: blue;\">null</span>));\r\n\r\n         <span style=\"color: blue;\">return</span> mappings;\r\n      }\r\n</pre>\r\n<pre><strong>The adapter,</strong></pre>\r\n<pre><div style=\"color: black; background-color: white;\"><pre><span style=\"color: gray;\">///</span> <span style=\"color: gray;\">&lt;summary&gt;</span>\r\n   <span style=\"color: gray;\">///</span><span style=\"color: green;\"> Adapter that support status bar</span>\r\n   <span style=\"color: gray;\">///</span> <span style=\"color: gray;\">&lt;/summary&gt;</span>\r\n   <span style=\"color: blue;\">public</span> <span style=\"color: blue;\">sealed</span> <span style=\"color: blue;\">class</span> StatusBarRegionAdapter : RegionAdapterBase&lt;StatusBar&gt;\r\n   {\r\n      <span style=\"color: gray;\">///</span> <span style=\"color: gray;\">&lt;summary&gt;</span>\r\n      <span style=\"color: gray;\">///</span><span style=\"color: green;\"> </span>\r\n      <span style=\"color: gray;\">///</span> <span style=\"color: gray;\">&lt;/summary&gt;</span>\r\n      <span style=\"color: gray;\">///</span> <span style=\"color: gray;\">&lt;param name=\"regionBehaviorFactory\"&gt;</span><span style=\"color: gray;\">&lt;/param&gt;</span>\r\n      <span style=\"color: blue;\">public</span> StatusBarRegionAdapter(IRegionBehaviorFactory regionBehaviorFactory)\r\n         :<span style=\"color: blue;\">base</span>(regionBehaviorFactory)\r\n      {\r\n      }\r\n\r\n      <span style=\"color: gray;\">///</span> <span style=\"color: gray;\">&lt;summary&gt;</span>\r\n      <span style=\"color: gray;\">///</span><span style=\"color: green;\"> Adapts a &lt;see cref=\"StatusBar\"/&gt; to a new &lt;see cref=\"Region\"/&gt; </span>\r\n      <span style=\"color: gray;\">///</span> <span style=\"color: gray;\">&lt;/summary&gt;</span>\r\n      <span style=\"color: gray;\">///</span> <span style=\"color: gray;\">&lt;param name=\"region\"&gt;</span><span style=\"color: gray;\">&lt;/param&gt;</span>\r\n      <span style=\"color: gray;\">///</span> <span style=\"color: gray;\">&lt;param name=\"regionTarget\"&gt;</span><span style=\"color: gray;\">&lt;/param&gt;</span>\r\n      <span style=\"color: blue;\">protected</span> <span style=\"color: blue;\">override</span> <span style=\"color: blue;\">void</span> Adapt(IRegion region, StatusBar regionTarget)\r\n      {\r\n         <span style=\"color: blue;\">if</span> (regionTarget.ItemsSource != <span style=\"color: blue;\">null</span>)\r\n         {\r\n            <span style=\"color: blue;\">throw</span> <span style=\"color: blue;\">new</span> InvalidOperationException(<span style=\"color: #a31515;\">\"StatusBar already has content\"</span>);\r\n         }\r\n         region.Views.CollectionChanged += <span style=\"color: blue;\">delegate</span>\r\n         {\r\n\r\n            Object statusBar = region.Views.FirstOrDefault() <span style=\"color: blue;\">as</span> Object;\r\n            regionTarget.Items.Add(statusBar);\r\n         };\r\n         \r\n      }\r\n      <span style=\"color: gray;\">///</span> <span style=\"color: gray;\">&lt;summary&gt;</span>\r\n      <span style=\"color: gray;\">///</span><span style=\"color: green;\"> Creates a new instance of &lt;see cref=\"SingleActiveRegion\"/&gt;</span>\r\n      <span style=\"color: gray;\">///</span> <span style=\"color: gray;\">&lt;/summary&gt;</span>\r\n      <span style=\"color: gray;\">///</span> <span style=\"color: gray;\">&lt;returns&gt;</span><span style=\"color: gray;\">&lt;/returns&gt;</span>\r\n      <span style=\"color: blue;\">protected</span> <span style=\"color: blue;\">override</span> IRegion CreateRegion()\r\n      {\r\n         <span style=\"color: blue;\">return</span> <span style=\"color: blue;\">new</span> SingleActiveRegion();\r\n      }\r\n   }\r\n\r\n</pre>\r\n</div>\r\n</pre>\r\n<pre><div style=\"color: black; background-color: white;\">I do not have a IRegionBehaviorFactory, i am just passing null when creating a new instance of the adapter. What am i missing here?</div></pre>\r\n</div>\r\n</pre>\r\n</div>",
    "PostedDate": "2011-12-05T13:12:12.4-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "707788",
    "ThreadId": "281854",
    "Html": "<p>Hi Damian,</p>\n<p>I managed to write a sample app. Here's the link,</p>\n<p><a href=\"https://skydrive.live.com/redir.aspx?cid=8c93dcbd9fcd8db1&amp;resid=8C93DCBD9FCD8DB1!119&amp;parid=8C93DCBD9FCD8DB1!117\">https://skydrive.live.com/redir.aspx?cid=8c93dcbd9fcd8db1&amp;resid=8C93DCBD9FCD8DB1!119&amp;parid=8C93DCBD9FCD8DB1!117</a></p>\n<p>If you run the app and add a breakpoint in the dashboardmodule's constructor, you'll see that the region for status bar is present in the regionmanager.</p>\n<p>&nbsp;</p>\n<p>Thanks!&nbsp;</p>",
    "PostedDate": "2011-12-05T13:57:59.307-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "708212",
    "ThreadId": "281854",
    "Html": "<p>Hi,</p>\r\n<p>You could try retrieving the instance of your <strong>StatusBarRegionAdapter </strong>in the <strong>ConfigureRegionAdapterMappings </strong>method of your <strong>SampleBootstrapper</strong>, using the container, this way the dependencies will be resolved automatically (e.g the <strong>IRegionBehaviorFactory </strong>which is needed by the <strong>RegionAdapterBase</strong> Class constructor). An example of this could be like in the following code snippet:<br /><br />\r\n<div style=\"color: black; background-color: white;\">\r\n<pre><span style=\"color: blue;\">protected</span> <span style=\"color: blue;\">override</span> RegionAdapterMappings ConfigureRegionAdapterMappings()\r\n      {\r\n          RegionAdapterMappings mappings = <span style=\"color: blue;\">base</span>.ConfigureRegionAdapterMappings();\r\n          mappings.RegisterMapping(<span style=\"color: blue;\">typeof</span>(StatusBar), <span style=\"color: blue;\">this</span>.Container.Resolve&lt;StatusBarRegionAdapter&gt;());\r\n\r\n          <span style=\"color: blue;\">return</span> mappings;\r\n      }\r\n</pre>\r\n</div>\r\n</p>\r\n<p>&nbsp;<br />I tried this modification in your proposed sample, and your region <em>\"DashboardStatusBarRegion\"</em> was added to the <strong>RegionManager</strong>.<br /><br />I hope you find this helpful</p>\r\n<p>Agustin Adami<a href=\"http://blogs.southworks.net/aadami\"><br /> http://blogs.southworks.net/aadami</a>﻿</p>",
    "PostedDate": "2011-12-06T09:09:36.44-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "708289",
    "ThreadId": "281854",
    "Html": "<p>Hi Agustin,</p>\r\n<p>That helped, thanks a lot. I have got all my regions working except for the ApplicationMenu region in the ribbon. I am using an Actipro ribbon. The ApplicationMenu region is not being adde dto the region manager.&nbsp;I have updated my sample. Can you please let me know if i am missing something?</p>\r\n<p>I have posted my sample in the link below,</p>\r\n<p><a href=\"https://skydrive.live.com/redir.aspx?cid=8c93dcbd9fcd8db1&amp;resid=8C93DCBD9FCD8DB1!120&amp;parid=8C93DCBD9FCD8DB1!117\">https://skydrive.live.com/redir.aspx?cid=8c93dcbd9fcd8db1&amp;resid=8C93DCBD9FCD8DB1!120&amp;parid=8C93DCBD9FCD8DB1!117</a></p>\r\n<p>&nbsp;</p>",
    "PostedDate": "2011-12-06T10:29:39.28-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "708941",
    "ThreadId": "281854",
    "Html": "<p>Hi,</p>\r\n<p>We tried to reproduced the error you mentioned using the <a href=\"http://www.microsoft.com/download/en/details.aspx?id=11877\">Microsoft Ribbon for WPF</a> and the region was registered correctly in the <strong>RegionManager</strong>.</p>\r\n<p>As this actipro ribbon control is a third party control and therefore, it might introduce some implementation differences, you might find better support in its official forums: <a href=\"http://www.actiprosoftware.com/support/forums/default.aspx\">actipro Support Forums</a>.</p>\r\n<p>Also, as mentioned before, take into account that regions adapters for ribbon controls are not supported in Prism v4 out of the box. You can find an existing <a href=\"http://compositewpf.codeplex.com/workitem/7063\">work item</a> created about this subject.</p>\r\n<p>On the other hand the Prism Library provides three region adapters out-of-the-box that can be used as a reference.</p>\r\n<p>You can find more information about this in the following chapters of the Prism documentation at MSDN:</p>\r\n<ul>\r\n<li><a href=\"http://msdn.microsoft.com/en-us/library/ff921098%28v=PandP.40%29.aspx#sec15\">Chapter 7: Composing the User Interface, Region Adapter</a> </li>\r\n<li><a href=\"http://msdn.microsoft.com/en-us/library/gg430866%28v=PandP.40%29.aspx#sec25\">Appendix E: Extending Prism, Region Adapters</a></li>\r\n</ul>\r\n<p>Thanks,</p>\r\n<p>Agustin Adami<a href=\"http://blogs.southworks.net/aadami\"><br /> http://blogs.southworks.net/aadami</a>﻿</p>\r\n<ul>\r\n</ul>",
    "PostedDate": "2011-12-07T11:05:14.95-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]