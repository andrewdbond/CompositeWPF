[
  {
    "Id": "846653",
    "ThreadId": "358887",
    "Html": "\r\n<p><strong>In my shell defined the region( use DevExprss Control)</strong></p>\r\n<p>&nbsp;</p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre><span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">dxd</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">DockLayoutManager</span> <span style=\"color:red\">x:Name</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">DemoDockContainer</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">Grid.Row</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">1</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">FloatingMode</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Desktop</span><span style=\"color:black\">&quot;</span>  <span style=\"color:red\">MDIMergeStyle</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Never</span><span style=\"color:black\">&quot;</span> <span style=\"color:blue\">&gt;</span>\n                    <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">dxd</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">LayoutGroup</span> <span style=\"color:red\">Name</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Root</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">DestroyOnClosingChildren</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">False</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">&gt;</span>\n                        <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">dxd</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">LayoutPanel</span> <span style=\"color:red\">x:Name</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">panelToolbox</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">Caption</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">����</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">ItemWidth</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">200</span><span style=\"color:black\">&quot;</span>  <span style=\"color:blue\">&gt;</span>\n                            <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">dxn</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">NavBarControl</span> <span style=\"color:blue\">&gt;</span>\n                                <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">dxn</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">NavBarControl.View</span> <span style=\"color:blue\">&gt;</span>\n                                    <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">dxn</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">NavigationPaneView</span> <span style=\"color:red\">IsExpandButtonVisible</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">False</span><span style=\"color:black\">&quot;</span>                                                            \n                                                            <span style=\"color:red\">dxn:ScrollingSettings.ScrollMode</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">ScrollBar</span><span style=\"color:black\">&quot;</span> <span style=\"color:blue\">/&gt;</span>\n                                <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">dxn</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">NavBarControl.View</span><span style=\"color:blue\">&gt;</span>\n                                <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">dxn</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">NavBarControl.Groups</span> <span style=\"color:blue\">&gt;</span>\n                                    <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">dxn</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">NavBarGroup</span> <span style=\"color:red\">Header</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">���˵�</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">DisplaySource</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Content</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">&gt;</span>\n                                        <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">dxn</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">NavBarGroup.Content</span> <span style=\"color:blue\">&gt;</span>\n                                            <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">ContentControl</span> <span style=\"color:red\">Name</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">MainMenuContentControl</span><span style=\"color:black\">&quot;</span>  <strong><span style=\"color:red\">prism:RegionManager.RegionName</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">{x:Static inf:RegionNames.MainMenuRegion}</span><span style=\"color:black\">&quot;</span></strong><span style=\"color:blue\">/&gt;</span>\n                                        <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">dxn</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">NavBarGroup.Content</span><span style=\"color:blue\">&gt;</span>\n\n                                    <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">dxn</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">NavBarGroup</span><span style=\"color:blue\">&gt;</span>\n                                    <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">dxn</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">NavBarGroup</span> <span style=\"color:red\">Header</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">�ҵ���Ϣ</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">&gt;</span>\n\n                                    <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">dxn</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">NavBarGroup</span><span style=\"color:blue\">&gt;</span>\n                                <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">dxn</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">NavBarControl.Groups</span><span style=\"color:blue\">&gt;</span>\n                            <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">dxn</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">NavBarControl</span><span style=\"color:blue\">&gt;</span>\n                        <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">dxd</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">LayoutPanel</span><span style=\"color:blue\">&gt;</span>\n                        <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">dxd</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">LayoutGroup</span> <span style=\"color:red\">Orientation</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Vertical</span><span style=\"color:black\">&quot;</span> <span style=\"color:blue\">&gt;</span>\n                            <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">dxd</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">DocumentGroup</span> <span style=\"color:red\">MDIStyle</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">Tabbed</span><span style=\"color:black\">&quot;</span> \n                                    <span style=\"color:red\">prism:RegionManager.RegionName</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">{x:Static inf:RegionNames.DocumentRegion}</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">&gt;</span>\n                            <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">dxd</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">DocumentGroup</span><span style=\"color:blue\">&gt;</span>\n                            <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">dxd</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">TabbedGroup</span> <span style=\"color:red\">ItemHeight</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">0.3*</span><span style=\"color:black\">&quot;</span> <span style=\"color:red\">DestroyOnClosingChildren</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">False</span><span style=\"color:black\">&quot;</span>  <span style=\"color:red\">prism:RegionManager.RegionName</span><span style=\"color:blue\">=</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">{x:Static inf:RegionNames.TabRegion}</span><span style=\"color:black\">&quot;</span><span style=\"color:blue\">&gt;</span>\n                                \n                            <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">dxd</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">TabbedGroup</span><span style=\"color:blue\">&gt;</span>\n                        <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">dxd</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">LayoutGroup</span><span style=\"color:blue\">&gt;</span>\n                    \n                    <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">dxd</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">LayoutGroup</span><span style=\"color:blue\">&gt;</span>\n                <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">dxd</span><span style=\"color:blue\">:</span><span style=\"color:#a31515\">DockLayoutManager</span><span style=\"color:blue\">&gt;</span>\n</pre>\r\n</div>\r\n<p>&nbsp;</p>\r\n<p><strong>And in module:</strong></p>\r\n<p>&nbsp;</p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre> [ModuleExport(<span style=\"color:blue\">typeof</span>(Module))]\n    <span style=\"color:blue\">public</span> <span style=\"color:blue\">class</span> Module:MesModule \n    {\n     \n        [ImportingConstructor]\n        <span style=\"color:blue\">public</span> Module(IRegionManager regionManager,\n            IEventAggregator eventAggregator) :\n            <span style=\"color:blue\">base</span>(regionManager, eventAggregator)\n        {\n        }\n                     \n\n        <span style=\"color:blue\">protected</span> <span style=\"color:blue\">override</span> <span style=\"color:blue\">void</span> RegisterViews()\n        {\n            <span style=\"color:blue\">base</span>.RegisterViews();\n          \n            ServiceLoader.RegisterService&lt;INavMainMenuView,INavMainMenuViewModel&gt;(<span style=\"color:#a31515\">&quot;MainMenu&quot;</span>);          \n           <strong><span style=\"color:#0000ff\"> ServiceLoader.LoadService(&quot;MainMenu&quot;,RegionNames.MainMenuRegion);</span></strong>\n        }\n               \n    }\n</pre>\r\n</div>\r\n<p>&nbsp;</p>\r\n<p><strong>In ServiceLoader:</strong></p>\r\n<p>&nbsp;</p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre>  <span style=\"color:blue\">public</span> <span style=\"color:blue\">void</span> LoadService(<span style=\"color:blue\">string</span> mesService, <span style=\"color:blue\">string</span> regionName, <span style=\"color:blue\">object</span> parameter)\n        {\n            <span style=\"color:blue\">if</span> (<span style=\"color:blue\">string</span>.IsNullOrEmpty(regionName))\n            {\n                regionName = RegionNames.DocumentRegion;\n            }\n            ServiceDefinition serviceDefinition = services[mesService];\n            <span style=\"color:blue\">if</span> (!regionManager.ActivateViewIfExists(regionName, serviceDefinition.ViewInterfaceType))\n            {\n                regionManager.DeactivateViews(regionName);\n                <span style=\"color:blue\">var</span> viewModel = (IMesViewModel)ServiceLocator.Current.GetInstance(serviceDefinition.ViewModelInterfaceType);\n                <span style=\"color:blue\">var</span> view = (IMesView)ServiceLocator.Current.GetInstance(serviceDefinition.ViewInterfaceType);\n                regionManager.AddViewToRegion(regionName, view);\n          \n                view.DataContext = viewModel;\n                regionManager.ActivateViewIfExists(regionName, serviceDefinition.ViewInterfaceType);\n                <span style=\"color:blue\">if</span> (parameter == <span style=\"color:blue\">null</span>)\n                {\n                    viewModel.Initialize();\n                }\n                <span style=\"color:blue\">else</span>\n                {\n                   <span style=\"color:green\">// viewModel.Initialize(parameter);</span>\n                }\n\n            }\n        }\n</pre>\r\n</div>\r\n<p>&nbsp;</p>\r\n<p><strong>In RegionManagerExtension:</strong></p>\r\n<p>&nbsp;</p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre>  <span style=\"color:blue\">public</span> <span style=\"color:blue\">static</span> <span style=\"color:blue\">object</span> GetView(<span style=\"color:blue\">this</span> IRegionManager regionManager, <span style=\"color:blue\">string</span> regionName, Type interfaceForView)\n        {\n            <span style=\"color:blue\">object</span> view = <span style=\"color:blue\">null</span>;\n            regionManager.Regions[regionName].Views.ToList()\n               .ForEach(aView =&gt;\n               {\n                   <span style=\"color:blue\">if</span> (interfaceForView.IsAssignableFrom(aView.GetType()))\n                   {\n                       view = aView;\n                   }\n               }\n               );\n            <span style=\"color:blue\">return</span> view;\n        }\n\n        <span style=\"color:blue\">public</span> <span style=\"color:blue\">static</span> <span style=\"color:blue\">bool</span> ActivateViewIfExists(<span style=\"color:blue\">this</span> IRegionManager regionManager, <span style=\"color:blue\">string</span> regionName, Type viewType)\n        {\n            <span style=\"color:blue\">bool</span> returnValue = <span style=\"color:blue\">false</span>;\n            IMesView existingView = regionManager.GetView(regionName, viewType) <span style=\"color:blue\">as</span> IMesView;\n            <span style=\"color:blue\">if</span> (existingView != <span style=\"color:blue\">null</span>)\n            {\n                returnValue = <span style=\"color:blue\">true</span>;\n                regionManager.ActivateSingleView(regionName, existingView);\n            }\n            <span style=\"color:blue\">return</span> returnValue;\n        }\n</pre>\r\n</div>\r\n<p>&nbsp;</p>\r\n<p>when run the code &nbsp;will throw exception:The region manager does not contain the MainMenuRegion region.</p>\r\n<p>I search the discussions, found &nbsp;if change the code in module(mark blue) as below:</p>\r\n<p>&nbsp;</p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre> RegionManager.RegisterViewWithRegion(RegionNames.MainMenuRegion, <span style=\"color:blue\">typeof</span>(INavMainMenuView));\n</pre>\r\n</div>\r\n<p>&nbsp;</p>\r\n<p>will run correctly.&nbsp;</p>\r\n<p>my problem is: is there are methods to still use the loaderService to Load the View?</p>\r\n",
    "PostedDate": "2012-06-08T09:00:00.947-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "846701",
    "ThreadId": "358887",
    "Html": "<p>Hi,</p>\r\n<p>Based on my understanding, I believe your problem seems to be very similar to the one described in the following <strong>DevExpress </strong>ticket, where an issue regarding <strong>Regions </strong>and <strong>DevExpress controls</strong> is reported:</p>\r\n<ul>\r\n<li><a href=\"http://www.devexpress.com/Support/Center/p/Q350752.aspx\">DockWindowManager and Prism regions support</a></li>\r\n</ul>\r\n<p>In the aforementioned ticket you can find a sample application containing a custom implementation of the <strong>RegionManagerRegistrationBehavior </strong>created by the <strong>DevExpress Team</strong> that you might find useful to solve this problem.</p>\r\n<p>Regards,</p>\r\n<p>Damian Cherubini<br /> <a href=\"http://blogs.southworks.net/dcherubini\">http://blogs.southworks.net/dcherubini</a></p>",
    "PostedDate": "2012-06-08T10:41:50.71-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]