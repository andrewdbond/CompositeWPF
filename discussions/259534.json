[
  {
    "Id": "620344",
    "ThreadId": "259534",
    "Html": "<p>Hi!,&nbsp;<br /> I have a code that shows a LoginPage ([<a title=\"Login dialog in PRISM + WPF\" href=\"http://compositewpf.codeplex.com/discussions/258937\" target=\"_blank\">Login dialog in Prism + WPF</a>])<br /> When my code removes the loginPageView (on LoginPageViewModel) seems that &nbsp;the eventAggregator loses the original event and other subscribers will not see the event.</p>\n<p>This is my LoginViewModel code:</p>\n<p><span title=\"Paste this into a wiki page to link to this discussion\">&nbsp;</span></p>\n<div style=\"color: black; background-color: white;\">\n<pre><span style=\"color: blue;\">public</span> LoginViewModel(IUnityContainer container, IEventAggregator eventAggregator)\n{\n\t<span style=\"color: green;\">// ... some code here ... </span>\n\t<span style=\"color: blue;\">this</span>._eventAggregator.GetEvent&lt;LoginSuccessEvent&gt;().Subscribe(<span style=\"color: blue;\">this</span>.LoginSuccessful);\n}\n\n<span style=\"color: blue;\">public</span> <span style=\"color: blue;\">void</span> LoginSuccessful(<span style=\"color: blue;\">object</span> payload)\n{\n\t<span style=\"color: blue;\">var</span> loginView = <span style=\"color: blue;\">this</span>._container.Resolve&lt;MyDesktopApp.Modules.Security.Views.LoginView&gt;();\n\t<span style=\"color: blue;\">if</span> (loginView != <span style=\"color: blue;\">null</span>)\n\t{\n\t\t<span style=\"color: blue;\">this</span>._coreServices.RegionManager.Regions[RegionNames.PopupRegion].Remove(loginView);\n\t}            \n}\n</pre>\n</div>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<div><span title=\"Paste this into a wiki page to link to this discussion\">...and this is a sample module waiting for a \"LoginSuccessEvent\":</span></div>\n<div>\n<pre><span style=\"color: blue;\">public</span> ModuleSample(IUnityContainer container, IEventAggregator eventAggregator)\n{\n\t<span style=\"color: blue;\">this</span>._eventAggregator = eventAggregator;\n\t\n\t<span style=\"color: green;\">//... some code here ...</span>\n\t\n\t<span style=\"color: blue;\">this</span>._eventAggregator.GetEvent&lt;LoginSuccessEvent&gt;().Subscribe(<span style=\"color: blue;\">this</span>.LoadViews);\n}\n\n<span style=\"color: blue;\">void</span> LoadViews(<span style=\"color: blue;\">object</span> payload)\n{\n\t<span style=\"color: blue;\">var</span> sampleView = <span style=\"color: blue;\">this</span>._container.Resolve&lt;SampleListView&gt;();\n\t<span style=\"color: blue;\">this</span>._regionManager.RegisterViewWithRegion(RegionNames.MainRegion, () =&gt; sampleView);\n\t<span style=\"color: blue;\">this</span>._regionManager.Regions[RegionNames.MainRegion].Activate(sampleView);\n}\n</pre>\n</div>\n<div><span title=\"Haz clic para obtener otras posibles traducciones\">If I publish</span>&nbsp;<span title=\"Haz clic para obtener otras posibles traducciones\">the</span>&nbsp;<span title=\"Haz clic para obtener otras posibles traducciones\">event</span>&nbsp;<span title=\"Haz clic para obtener otras posibles traducciones\">again</span><span title=\"Haz clic para obtener otras posibles traducciones\">,</span>&nbsp;<span title=\"Haz clic para obtener otras posibles traducciones\">the</span>&nbsp;<span title=\"Haz clic para obtener otras posibles traducciones\">modules</span>&nbsp;<span title=\"Haz clic para obtener otras posibles traducciones\">work</span>&nbsp;<span title=\"Haz clic para obtener otras posibles traducciones\">well</span>&nbsp;<span title=\"Haz clic para obtener otras posibles traducciones\">...</span>&nbsp;<span title=\"Haz clic para obtener otras posibles traducciones\">any</span>&nbsp;<span title=\"Haz clic para obtener otras posibles traducciones\">idea</span>&nbsp;<span title=\"Haz clic para obtener otras posibles traducciones\">about  this</span>&nbsp;<span title=\"Haz clic para obtener otras posibles traducciones\">behavior</span><span title=\"Haz clic para obtener otras posibles traducciones\">?</span><br /> <span title=\"Haz clic para obtener otras posibles traducciones\">perhaps</span>&nbsp;<span title=\"Haz clic para obtener otras posibles traducciones\">my code</span>&nbsp;<span title=\"Haz clic para obtener otras posibles traducciones\">is</span>&nbsp;<span title=\"Haz clic para obtener otras posibles traducciones\">wrong</span><span title=\"Haz clic para obtener otras posibles traducciones\">?</span></div>",
    "PostedDate": "2011-05-30T08:58:27.87-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "620419",
    "ThreadId": "259534",
    "Html": "<p>Hi Jose,</p>\r\n<p>Based on my understanding of your scenario, one thing you could try, which might help you solve this issue, would be to subscribe to the event with a <strong>keepSubscriberReferenceAlive</strong> option set to <strong>true</strong> to force a strongly-held subscription. By doing this the event instance keeps a strong reference to the subscriber instance, avoiding it to get garbage collected.</p>\r\n<p>You should also make sure that, at the moment the event is published, the module that subscribed to that event had already been loaded. That is to say, this could be cause by a timing issue.</p>\r\n<p>If the aforementioned suggestions don&rsquo;t help you, you could provide us with a repro sample, so that we can help you further.</p>\r\n<p>You can read more about Event Aggregation concepts <a href=\"http://msdn.microsoft.com/en-us/library/ff921122(PandP.40).aspx#sec8\">here</a>.</p>\r\n<p>Thanks,</p>\r\n<p>Miguel Bronzovic<br /><a href=\"http://blogs.southworks.net/mbronzovic\">http://blogs.southworks.net/mbronzovic</a></p>\r\n<p>&nbsp;</p>",
    "PostedDate": "2011-05-30T12:49:07.843-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "620599",
    "ThreadId": "259534",
    "Html": "<p>Hi Miguel,</p>\r\n<p><span class=\"hps\" title=\"Haz clic para obtener otras posibles traducciones\">I set</span>&nbsp;<span class=\"hps\" title=\"Haz clic para obtener otras posibles traducciones\">the</span>&nbsp;<span class=\"hps\" title=\"Haz clic para obtener otras posibles traducciones\">parameter&nbsp;</span><em><strong><span class=\"hps\" title=\"Haz clic para obtener otras posibles traducciones\">keepsubscriberReferenceAlive</span></strong></em>&nbsp;<span class=\"hps\" title=\"Haz clic para obtener otras posibles traducciones\">in</span>&nbsp;<span class=\"hps\" title=\"Haz clic para obtener otras posibles traducciones\">each</span>&nbsp;<span class=\"hps\" title=\"Haz clic para obtener otras posibles traducciones\">subscription</span>&nbsp;<span class=\"hps\" title=\"Haz clic para obtener otras posibles traducciones\">to the event&nbsp;</span><em><span style=\"font-family: Consolas, 'Courier New', Courier, monospace; white-space: pre;\">LoginSuccessEvent </span></em><span title=\"Haz clic para obtener otras posibles traducciones\">and</span>&nbsp;<span class=\"hps\" title=\"Haz clic para obtener otras posibles traducciones\">now</span>&nbsp;<span class=\"hps\" title=\"Haz clic para obtener otras posibles traducciones\">the</span>&nbsp;<span class=\"hps\" title=\"Haz clic para obtener otras posibles traducciones\">code</span>&nbsp;<span class=\"hps\" title=\"Haz clic para obtener otras posibles traducciones\">works</span>&nbsp;perfect<span title=\"Haz clic para obtener otras posibles traducciones\">.<br /></span><span class=\"hps\" title=\"Haz clic para obtener otras posibles traducciones\">&nbsp;</span></p>\r\n<p><span class=\"hps\" title=\"Haz clic para obtener otras posibles traducciones\">I think</span>&nbsp;<span class=\"hps\" title=\"Haz clic para obtener otras posibles traducciones\">I need to</span>&nbsp;<span class=\"hps\" title=\"Haz clic para obtener otras posibles traducciones\">learn</span>&nbsp;<span class=\"hps\" title=\"Haz clic para obtener otras posibles traducciones\">more about the</span>&nbsp;<span class=\"hps\" title=\"Haz clic para obtener otras posibles traducciones\">use</span>&nbsp;<span class=\"hps\" title=\"Haz clic para obtener otras posibles traducciones\">of events</span><span title=\"Haz clic para obtener otras posibles traducciones\">.&nbsp;<span class=\"hps\" title=\"Haz clic para obtener otras posibles traducciones\">I'll</span>&nbsp;<span class=\"hps\" title=\"Haz clic para obtener otras posibles traducciones\">re-read</span>&nbsp;<span class=\"hps\" title=\"Haz clic para obtener otras posibles traducciones\">the</span>&nbsp;<span class=\"hps\" title=\"Haz clic para obtener otras posibles traducciones\">documentation.</span></span></p>\r\n<p><span title=\"Haz clic para obtener otras posibles traducciones\"><span class=\"hps\" title=\"Haz clic para obtener otras posibles traducciones\">Thank you very much</span>&nbsp;<span class=\"hps\" title=\"Haz clic para obtener otras posibles traducciones\">for</span>&nbsp;<span class=\"hps\" title=\"Haz clic para obtener otras posibles traducciones\">answering</span>&nbsp;<span class=\"hps\" title=\"Haz clic para obtener otras posibles traducciones\">my question</span><span title=\"Haz clic para obtener otras posibles traducciones\">.</span></span></p>\r\n<p>&nbsp;</p>\r\n<p>Regards,<br />Jose</p>",
    "PostedDate": "2011-05-31T01:03:11.767-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]