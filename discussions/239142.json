[
  {
    "Id": "538855",
    "ThreadId": "239142",
    "Html": "\r\n<p>hi guys,</p>\r\n<p>I&acute;m having problems with the RegionMamberLifeTime. I am&nbsp;using Navigation Service to acess my views, and my view implements the INavigationAware.</p>\r\n<p>When i go to the View 1, it loads&nbsp;some data and how in the Grid, when i go to the View 2, my app do the same thing and show another kind of data.</p>\r\n<p>The problem is, when i go back to my View 1, before i load the data, its shows the old that, an them load the new data and show.</p>\r\n<p>The problem is that the views are not &quot;Destroyed&quot; when i nevigate to another view, what i am doing wrong?</p>\r\n<p>Thats my view Code:</p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre>  [Export(<span style=\"color:#a31515\">&quot;AcoesGrid&quot;</span>)]\r\n    [PartCreationPolicy(CreationPolicy.NonShared)]\r\n    [RegionMemberLifetime(KeepAlive = <span style=\"color:blue\">false</span>)]\r\n    <span style=\"color:blue\">public</span> <span style=\"color:blue\">partial</span> <span style=\"color:blue\">class</span> AcoesGrid : UserControl, INavigationAware\r\n    {\r\n\r\n     .....\r\n\r\n       <span style=\"color:blue\">#region</span> INavigationAware Members\r\n\r\n        <span style=\"color:blue\">public</span> <span style=\"color:blue\">bool</span> IsNavigationTarget(NavigationContext navigationContext)\r\n        {\r\n            <span style=\"color:blue\">return</span> <span style=\"color:blue\">true</span>;\r\n        }\r\n\r\n        <span style=\"color:blue\">public</span> <span style=\"color:blue\">void</span> OnNavigatedFrom(NavigationContext navigationContext)\r\n        {\r\n            ViewModel = <span style=\"color:blue\">null</span>;\r\n            <span style=\"color:blue\">var</span> regionManager = ServiceLocator.Current.GetInstance&lt;IRegionManager&gt;();\r\n            <span style=\"color:blue\">var</span> mainRegion = regionManager.Regions[RegionNames.MainContentRegion];\r\n            mainRegion.Deactivate(<span style=\"color:blue\">this</span>);\r\n        }\r\n\r\n        <span style=\"color:blue\">public</span> <span style=\"color:blue\">void</span> OnNavigatedTo(NavigationContext navigationContext)\r\n        {\r\n            ViewModel.LoadData();\r\n        }\r\n\r\n        <span style=\"color:blue\">#endregion</span>\r\n    }\r\n</pre>\r\n</div>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n",
    "PostedDate": "2010-12-21T10:32:22.487-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "539263",
    "ThreadId": "239142",
    "Html": "\r\n<p>Could you be more clear about the issue by providing more information like</p>\r\n<ul>\r\n<li>what kind of region you are using </li><li>Is your views not getting recreated&nbsp;each time you navigate to it? </li></ul>\r\n<p>Also from above why do you want to use a ServiceLocator to get the RegionManager? You can inject into your views constructor like this</p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre><span style=\"color:blue\">private</span> readOnly IRegionManager _regionManager;\r\n\r\n[ImportingConstructor]\r\n<span style=\"color:blue\">public</span> AcoesGrid(IRegionManager regionManager)\r\n{\r\n   _regionManager = regionManager;\r\n}\r\n\r\n</pre>\r\n</div>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n",
    "PostedDate": "2010-12-22T03:19:32.423-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "539283",
    "ThreadId": "239142",
    "Html": "\r\n<p>hi, thx for reply</p>\r\n<p>1 - what kind of region you are using</p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre> &lt;!--Region3: Main content --&gt;\r\n                                &lt;Border x:Name=<span style=\"color:#a31515\">&quot;ContentBorder&quot;</span> Style=<span style=\"color:#a31515\">&quot;{StaticResource ContentBorderStyle}&quot;</span> Background=<span style=\"color:#a31515\">&quot;White&quot;</span> MinHeight=<span style=\"color:#a31515\">&quot;200&quot;</span>&gt;\r\n                                    &lt;ContentControl regions:RegionManager.RegionName=<span style=\"color:#a31515\">&quot;MainContentRegion&quot;</span> HorizontalContentAlignment=<span style=\"color:#a31515\">&quot;Stretch&quot;</span> VerticalContentAlignment=<span style=\"color:#a31515\">&quot;Stretch&quot;</span> /&gt;\r\n                                &lt;/Border&gt;<br>\r\n<div style=\"color:black; background-color:white\"><pre>        <span style=\"color:green\">// Navigation menu Action</span>\r\n        <span style=\"color:blue\">private</span> <span style=\"color:blue\">void</span> AgMenuAcoes_Click(<span style=\"color:blue\">object</span> sender, EventArgs e)\r\n        {\r\n            RegionManager.RequestNavigate(RegionNames.MainContentRegion, <span style=\"color:blue\">new</span> Uri(<span style=\"color:#a31515\">&quot;AcoesGrid&quot;</span>, UriKind.Relative), (callback) =&gt; { });\r\n        }\r\n</pre>\r\n<pre>2- Is your views not getting recreated&nbsp;each time you navigate to it?</pre>\r\n<pre>   No, i put a Breakpoint on the constructor, and its not recreating the views.</pre>\r\n<pre>3 - I ll will change the ServiceLocator later.</pre>\r\n<pre>Any other information?</pre>\r\n</div>\r\n</pre>\r\n</div>\r\n",
    "PostedDate": "2010-12-22T03:53:20.05-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "539307",
    "ThreadId": "239142",
    "Html": "\r\n<div><span style=\"font-family:Arial; color:#000080; font-size:x-small\">Looks like you are trying to navigate to the same view when a view is already loaded. Just in case could check what you see in the ActiveViews collection of the regionmanager when you navigate\r\n away?<br>\r\n</span></div>\r\n<p>&nbsp;</p>\r\n<div>\r\n<hr size=\"2\">\r\n<span style=\"font-family:Tahoma; font-size:x-small\"><strong>From</strong>: lucianotcorreia &lt;notifications@codeplex.com&gt;\r\n<br>\r\n<strong>To</strong>: Shivshankar, Ganesh (IT/IN) <br>\r\n<strong>Sent</strong>: Wed Dec 22 17:23:32 2010<br>\r\n<strong>Subject</strong>: Re: Problems with RegionMemberLifetime [CompositeWPF:239142]\r\n<br>\r\n</span></div>\r\n<p>From: lucianotcorreia</p>\r\n<div id=\"x_x_x_ThreadNotificationPostBody\">\r\n<p>hi, thx for reply</p>\r\n<p>1 - what kind of region you are using</p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre> &lt;!--Region3: Main content --&gt;\r\n                                &lt;Border x:Name=<span style=\"color:#a31515\">&quot;ContentBorder&quot;</span> Style=<span style=\"color:#a31515\">&quot;{StaticResource ContentBorderStyle}&quot;</span> Background=<span style=\"color:#a31515\">&quot;White&quot;</span> MinHeight=<span style=\"color:#a31515\">&quot;200&quot;</span>&gt;\r\n                                    &lt;ContentControl regions:RegionManager.RegionName=<span style=\"color:#a31515\">&quot;MainContentRegion&quot;</span> HorizontalContentAlignment=<span style=\"color:#a31515\">&quot;Stretch&quot;</span> VerticalContentAlignment=<span style=\"color:#a31515\">&quot;Stretch&quot;</span> /&gt;\r\n                                &lt;/Border&gt;<br>\r\n<div style=\"color:black; background-color:white\"><pre>        <span style=\"color:green\">// Navigation menu Action</span>\r\n        <span style=\"color:blue\">private</span> <span style=\"color:blue\">void</span> AgMenuAcoes_Click(<span style=\"color:blue\">object</span> sender, EventArgs e)\r\n        {\r\n            RegionManager.RequestNavigate(RegionNames.MainContentRegion, <span style=\"color:blue\">new</span> Uri(<span style=\"color:#a31515\">&quot;AcoesGrid&quot;</span>, UriKind.Relative), (callback) =&gt; { });\r\n        }\r\n</pre>\r\n<pre>2- Is your views not getting recreated each time you navigate to it?</pre>\r\n<pre>   No, i put a Breakpoint on the constructor, and its not recreating the views.</pre>\r\n<pre>3 - I ll will change the ServiceLocator later.</pre>\r\n<pre>Any other information?</pre>\r\n</div>\r\n</pre>\r\n</div>\r\n</div>\r\n",
    "PostedDate": "2010-12-22T04:37:21.223-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "539330",
    "ThreadId": "239142",
    "Html": "\r\n<p>I think&nbsp;you didnt understand the problem....</p>\r\n<p>when i put&nbsp;&nbsp;[RegionMemberLifetime(KeepAlive = <span style=\"color:blue\">\r\nfalse</span>)] in a view, its supose to destroy the view when i navigate to another view.</p>\r\n<p>When i go to the View1 and them navigate to the View2, the view 1&nbsp;need to&nbsp;be destroyed, and if i go back to the View1, it need to be recreated. Thats the problem. The view are no destroyed when i navigate to another view.</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n",
    "PostedDate": "2010-12-22T05:26:36.523-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "539334",
    "ThreadId": "239142",
    "Html": "\r\n<div><span style=\"font-family:Arial; color:#000080; font-size:x-small\">You are right. When we set keepalive as false it deactivates and removes the view from the region. What you are doing in the onnavigatedfrom is actually not needed I guess.\r\n<br>\r\n<br>\r\nI have similar setup but it works for me. I'm sure there something very trivial. Can you post your code and send me a link. I'll have a look at it on my end as well.\r\n</span></div>\r\n<p>&nbsp;</p>\r\n<div>\r\n<hr size=\"2\">\r\n<span style=\"font-family:Tahoma; font-size:x-small\"><strong>From</strong>: lucianotcorreia &lt;notifications@codeplex.com&gt;\r\n<br>\r\n<strong>To</strong>: Shivshankar, Ganesh (IT/IN) <br>\r\n<strong>Sent</strong>: Wed Dec 22 18:56:40 2010<br>\r\n<strong>Subject</strong>: Re: Problems with RegionMemberLifetime [CompositeWPF:239142]\r\n<br>\r\n</span></div>\r\n<p>From: lucianotcorreia</p>\r\n<div id=\"x_x_x_ThreadNotificationPostBody\">\r\n<p>I think i didnt understand the problem....</p>\r\n<p>when i put [RegionMemberLifetime(KeepAlive = <span style=\"color:blue\">false</span>)] in a view, its supose to destroy the view when i navigate to another view.</p>\r\n<p>When i go to the View1 and them navigate to the View2, the view 1 need to be destroyed, and if i go back to the View1, it need to be recreated. Thats the problem. The view are no destroyed when i navigate to another view.</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</div>\r\n",
    "PostedDate": "2010-12-22T05:32:00.32-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "539341",
    "ThreadId": "239142",
    "Html": "\r\n<p>My aap its a kind of big, and acess data from 3 or 4 wcf Services, i think i cant provide a working sample, but the main code i have posted.</p>\r\n<p>And about the code in the OnNavigatedFrom, i think i dont need that too, but i just try that because its not working.</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n",
    "PostedDate": "2010-12-22T05:55:29.233-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "539344",
    "ThreadId": "239142",
    "Html": "\r\n<div><span style=\"font-family:Arial; color:#000080; font-size:x-small\">What I would do is just comment out the bits calling your services and look at it step by step.\r\n<br>\r\n</span></div>\r\n<p>&nbsp;</p>\r\n<div>\r\n<hr size=\"2\">\r\n<span style=\"font-family:Tahoma; font-size:x-small\"><strong>From</strong>: lucianotcorreia &lt;notifications@codeplex.com&gt;\r\n<br>\r\n<strong>To</strong>: Shivshankar, Ganesh (IT/IN) <br>\r\n<strong>Sent</strong>: Wed Dec 22 19:25:40 2010<br>\r\n<strong>Subject</strong>: Re: Problems with RegionMemberLifetime [CompositeWPF:239142]\r\n<br>\r\n</span></div>\r\n<p>From: lucianotcorreia</p>\r\n<div id=\"x_x_x_ThreadNotificationPostBody\">\r\n<p>My aap its a kind of big, and acess data from 3 or 4 wcf Services, i think i cant provide a working sample, but the main code i have posted.</p>\r\n<p>And about the code in the OnNavigatedFrom, i think i dont need that too, but i just try that because its not working.</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</div>\r\n",
    "PostedDate": "2010-12-22T06:02:00.457-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "539349",
    "ThreadId": "239142",
    "Html": "\r\n<p>i will post my view and view models code:</p>\r\n<p>I think its a prism bug, because its very simples,</p>\r\n<p>1 -&nbsp;my view model:</p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre><span style=\"color:blue\">namespace</span> Art.Solution.Module.Shared.ViewModels\r\n{\r\n    [Export]\r\n    [PartCreationPolicy(CreationPolicy.Shared)]\r\n    [RegionMemberLifetime(KeepAlive = <span style=\"color:blue\">false</span>)]\r\n    <span style=\"color:blue\">public</span> <span style=\"color:blue\">class</span> AcoesViewModel : ViewModelBase&lt;Acao&gt;\r\n    {\r\n        <span style=\"color:blue\">private</span> HeaderGridControl _headerGrid;\r\n\r\n        [ImportingConstructor]\r\n        <span style=\"color:blue\">public</span> AcoesViewModel(IDataService dataService, IRegionManager regionManager)\r\n            : <span style=\"color:blue\">base</span>(dataService, regionManager)\r\n        {\r\n\r\n            <span style=\"color:blue\">this</span>.ScreenDescriptionSingular = <span style=\"color:#a31515\">&quot;A&ccedil;&atilde;o&quot;</span>;\r\n            <span style=\"color:blue\">this</span>.ScreenDescriptionPlural = <span style=\"color:#a31515\">&quot;A&ccedil;&otilde;es&quot;</span>;\r\n            <span style=\"color:blue\">this</span>.EditViewName = <span style=\"color:#a31515\">&quot;AcoesEdit&quot;</span>;\r\n\r\n            InitializePermissions(<span style=\"color:#a31515\">&quot;Acoes&quot;</span>);\r\n        }\r\n\r\n        <span style=\"color:blue\">public</span> HeaderGridControl GetHeaderGrid()\r\n        {\r\n            <span style=\"color:blue\">if</span> (_headerGrid != <span style=\"color:blue\">null</span>)\r\n            {\r\n                _headerGrid = <span style=\"color:blue\">null</span>;\r\n            }\r\n\r\n            _headerGrid = <span style=\"color:blue\">new</span> HeaderGridControl();\r\n            _headerGrid.Initialize(<span style=\"color:blue\">this</span>, AddCommand, EditCommand, DeleteCommand, <span style=\"color:blue\">new</span> List&lt;<span style=\"color:blue\">string</span>&gt;() { <span style=\"color:#a31515\">&quot;Descri&ccedil;&atilde;o&quot;</span> }, SearchCommand, ClearSearchCommand);\r\n\r\n            <span style=\"color:blue\">return</span> _headerGrid;\r\n        }\r\n\r\n        <span style=\"color:blue\">public</span> <span style=\"color:blue\">override</span> <span style=\"color:blue\">void</span> AddEntity(Acao entity)\r\n        {\r\n            entity.SetEntityDefaults(Helpers.Instance.LoginInfoInstance.GetAuthenticatedUser().UsuarioId,\r\n                Convert.ToInt32(WebContext.Current.User.EmpresaId));\r\n\r\n            _dataService.Context.Acaos.Add(entity);\r\n        }\r\n\r\n        <span style=\"color:blue\">public</span> <span style=\"color:blue\">override</span> <span style=\"color:blue\">void</span> DeleteEntity(Acao entity)\r\n        {\r\n            <span style=\"color:blue\">if</span> (entity.CanDeleteFixo())\r\n            {\r\n                _dataService.Context.Acaos.Remove(entity);\r\n            }\r\n        }\r\n\r\n        <span style=\"color:blue\">public</span> <span style=\"color:blue\">override</span> EntityQuery&lt;Acao&gt; OrderBy(System.ServiceModel.DomainServices.Client.EntityQuery&lt;Acao&gt; query, <span style=\"color:blue\">bool</span> isFirst, <span style=\"color:blue\">string</span> propertyName, <span style=\"color:blue\">bool</span> <span style=\"color:blue\">descending</span>)\r\n        {\r\n            Expression&lt;Func&lt;Acao, <span style=\"color:blue\">object</span>&gt;&gt; sortExpression;\r\n\r\n            <span style=\"color:blue\">switch</span> (propertyName)\r\n            {\r\n                <span style=\"color:blue\">case</span> <span style=\"color:#a31515\">&quot;Descri&ccedil;&atilde;o&quot;</span>:\r\n                    sortExpression = Acao =&gt; Acao.Descricao;\r\n                    <span style=\"color:blue\">break</span>;\r\n                <span style=\"color:blue\">default</span>:\r\n                    sortExpression = Acao =&gt; Acao.Descricao;\r\n                    <span style=\"color:blue\">break</span>;\r\n            }\r\n\r\n            <span style=\"color:blue\">if</span> (isFirst)\r\n            {\r\n                <span style=\"color:blue\">if</span> (<span style=\"color:blue\">descending</span>)\r\n                    <span style=\"color:blue\">return</span> query.OrderByDescending(sortExpression);\r\n                <span style=\"color:blue\">return</span> query.OrderBy(sortExpression);\r\n            }\r\n            <span style=\"color:blue\">else</span>\r\n            {\r\n                <span style=\"color:blue\">if</span> (!<span style=\"color:blue\">descending</span>)\r\n                    <span style=\"color:blue\">return</span> query.ThenByDescending(sortExpression);\r\n                <span style=\"color:blue\">return</span> query.ThenBy(sortExpression);\r\n            }\r\n        }\r\n\r\n        <span style=\"color:blue\">public</span> <span style=\"color:blue\">override</span> Expression&lt;Func&lt;Acao, <span style=\"color:blue\">bool</span>&gt;&gt; BuildWhere(<span style=\"color:blue\">string</span> textFilterField, <span style=\"color:blue\">string</span> textFilter)\r\n        {\r\n            Expression&lt;Func&lt;Acao, <span style=\"color:blue\">bool</span>&gt;&gt; whereExpression;\r\n\r\n            <span style=\"color:blue\">switch</span> (textFilterField)\r\n            {\r\n                <span style=\"color:blue\">case</span> <span style=\"color:#a31515\">&quot;Descri&ccedil;&atilde;o&quot;</span>:\r\n                    whereExpression = Acao =&gt; Acao.Descricao.Contains(textFilter);\r\n                    <span style=\"color:blue\">break</span>;\r\n                <span style=\"color:blue\">default</span>:\r\n                    whereExpression = Acao =&gt; Acao.Descricao.Contains(textFilter);\r\n                    <span style=\"color:blue\">break</span>;\r\n            }\r\n\r\n            <span style=\"color:blue\">return</span> whereExpression;\r\n        }\r\n\r\n        <span style=\"color:blue\">public</span> <span style=\"color:blue\">override</span> <span style=\"color:blue\">void</span> LoadData()\r\n        {\r\n            IsLoading = <span style=\"color:blue\">true</span>;\r\n\r\n            <span style=\"color:blue\">var</span> query = _dataService.Context.GetAcoesQuery();\r\n\r\n            <span style=\"color:blue\">if</span> (!<span style=\"color:blue\">string</span>.IsNullOrEmpty(TextFilter))\r\n            {\r\n                query = query.Where(BuildWhere(TextFilterField, TextFilter));\r\n            }\r\n\r\n            <span style=\"color:blue\">if</span> (Entities.SortDescriptions.Any())\r\n            {\r\n                <span style=\"color:blue\">bool</span> isFirst = <span style=\"color:blue\">true</span>;\r\n                <span style=\"color:blue\">foreach</span> (SortDescription sd <span style=\"color:blue\">in</span> Entities.SortDescriptions)\r\n                {\r\n                    query = OrderBy(query, isFirst, sd.PropertyName, sd.Direction == ListSortDirection.Descending);\r\n                    isFirst = <span style=\"color:blue\">false</span>;\r\n                }\r\n            }\r\n            <span style=\"color:blue\">else</span>\r\n            {\r\n                query = query.OrderBy(Acao =&gt; Acao.Descricao);\r\n            }\r\n\r\n            <span style=\"color:blue\">if</span> (PageSize &gt; 0)\r\n            {\r\n                query = query.Skip(PageSize * Entities.PageIndex);\r\n                query = query.Take(PageSize);\r\n            }\r\n\r\n            <span style=\"color:blue\">if</span> (_entitiesView.PageSize &gt; 0)\r\n            {\r\n                query = query.Skip(_entitiesView.PageSize * _entitiesView.PageIndex);\r\n                query = query.Take(_entitiesView.PageSize);\r\n            }\r\n\r\n            query.IncludeTotalCount = <span style=\"color:blue\">true</span>;\r\n\r\n            _dataService.Context.Load(query,\r\n                                     (AcoesLoadOpe) =&gt;\r\n                                     {\r\n                                         <span style=\"color:blue\">if</span> (AcoesLoadOpe.HasError)\r\n                                         {\r\n                                             <span style=\"color:green\">// Todo: Mostrar erro numa tela padr&atilde;o</span>\r\n                                             MessageBox.Show(AcoesLoadOpe.Error.ToString());\r\n                                             <span style=\"color:blue\">return</span>;\r\n                                         }\r\n\r\n                                         _entities.Clear();\r\n                                         <span style=\"color:blue\">foreach</span> (<span style=\"color:blue\">var</span> entity <span style=\"color:blue\">in</span> AcoesLoadOpe.Entities)\r\n                                         {\r\n                                             _entities.Add(entity);\r\n                                         }\r\n\r\n                                         _entitiesView.MoveCurrentToFirst();\r\n\r\n                                         _entitiesView.TotalItemCount = AcoesLoadOpe.TotalEntityCount;\r\n                                         _entitiesView.ItemCount = AcoesLoadOpe.TotalEntityCount;\r\n\r\n                                         IsLoading = <span style=\"color:blue\">false</span>;\r\n                                     }, <span style=\"color:blue\">null</span>);\r\n        }\r\n\r\n        <span style=\"color:blue\">public</span> <span style=\"color:blue\">override</span> <span style=\"color:blue\">void</span> AddCommand(<span style=\"color:blue\">object</span> sender, EventArgs e)\r\n        {\r\n            IsNew = <span style=\"color:blue\">true</span>;\r\n            CurrentItem = <span style=\"color:blue\">null</span>;\r\n            CurrentItem = <span style=\"color:blue\">new</span> Acao();\r\n            ShowEditWindow(<span style=\"color:blue\">typeof</span>(IAcoesEditWindow), EditViewName);\r\n        }\r\n\r\n        <span style=\"color:blue\">public</span> <span style=\"color:blue\">override</span> <span style=\"color:blue\">void</span> EditCommand(<span style=\"color:blue\">object</span> sender, EventArgs e)\r\n        {\r\n            IsNew = <span style=\"color:blue\">false</span>;\r\n            CurrentItem = SelectedEntity;\r\n\r\n            ShowEditWindow(<span style=\"color:blue\">typeof</span>(IAcoesEditWindow), EditViewName);\r\n        }\r\n\r\n        <span style=\"color:blue\">public</span> <span style=\"color:blue\">override</span> <span style=\"color:blue\">void</span> DeleteCommand(<span style=\"color:blue\">object</span> sender, EventArgs e)\r\n        {\r\n            MessageBoxDialog.Show(<span style=\"color:#a31515\">&quot;Deseja realmente excluir o item selecionado?&quot;</span>,\r\n                <span style=\"color:#a31515\">&quot;Excluir item&quot;</span>,\r\n                MessageBoxDialogButtons.YesNo,\r\n                MessageBoxDialogIcons.Confirm,\r\n                (s, a) =&gt;\r\n                {\r\n                    IsLoading = <span style=\"color:blue\">true</span>;\r\n                    MessageBoxDialog messageBox = (s <span style=\"color:blue\">as</span> MessageBoxDialog);\r\n                    <span style=\"color:blue\">if</span> (messageBox != <span style=\"color:blue\">null</span>)\r\n                    {\r\n                        <span style=\"color:blue\">if</span> (messageBox.MBResult == MessageBoxResult.Yes)\r\n                        {\r\n                            DeleteEntity(SelectedEntity);\r\n                            SubmitChanges();\r\n                            Entities.Remove(SelectedEntity);\r\n                        }\r\n                        <span style=\"color:blue\">else</span>\r\n                        {\r\n                            IsLoading = <span style=\"color:blue\">false</span>;\r\n                        }\r\n                    }\r\n                });\r\n        }\r\n\r\n        <span style=\"color:blue\">public</span> <span style=\"color:blue\">override</span> <span style=\"color:blue\">void</span> SearchCommand(<span style=\"color:blue\">object</span> sender, EventArgs e)\r\n        {\r\n            TextFilterField = _headerGrid.FieldsSearchComboBox.SelectedItem.ToString();\r\n            TextFilter = _headerGrid.SearchTextBox.Text;\r\n        }\r\n\r\n        <span style=\"color:blue\">public</span> <span style=\"color:blue\">override</span> <span style=\"color:blue\">void</span> ClearSearchCommand(<span style=\"color:blue\">object</span> sender, EventArgs e)\r\n        {\r\n            TextFilter = <span style=\"color:blue\">string</span>.Empty;\r\n        }\r\n\r\n        <span style=\"color:blue\">public</span> <span style=\"color:blue\">override</span> <span style=\"color:blue\">void</span> SaveCommand()\r\n        {\r\n            IsLoading = <span style=\"color:blue\">true</span>;\r\n\r\n            <span style=\"color:blue\">if</span> (IsNew)\r\n            {\r\n                AddEntity(CurrentItem);\r\n            }\r\n\r\n            Entities.AddNewItem(CurrentItem);\r\n            SelectedEntity = CurrentItem;\r\n            SubmitChanges();\r\n\r\n            CloseEditWindow(EditViewName);\r\n        }\r\n\r\n        <span style=\"color:blue\">public</span> <span style=\"color:blue\">override</span> <span style=\"color:blue\">void</span> CancelCommand()\r\n        {\r\n            CloseEditWindow(EditViewName);\r\n            RejectChanges();\r\n        }\r\n    }\r\n}\r\n</pre>\r\n</div>\r\n<p>2 - My View</p>\r\n<p><span style=\"color:blue\">namespace</span> Art.Solution.Module.Shared.Views.Grid<br>\r\n{<br>\r\n&nbsp;&nbsp;&nbsp; [Export(<span style=\"color:#a31515\">&quot;AcoesGrid&quot;</span>)]<br>\r\n&nbsp;&nbsp;&nbsp; [PartCreationPolicy(CreationPolicy.NonShared)]<br>\r\n&nbsp;&nbsp;&nbsp; [RegionMemberLifetime(KeepAlive = <span style=\"color:blue\">false</span>)]<br>\r\n&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">public</span> <span style=\"color:blue\">\r\npartial</span> <span style=\"color:blue\">class</span> AcoesGrid : UserControl, INavigationAware<br>\r\n&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">public</span> AcoesGrid()<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; InitializeComponent();<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">\r\nthis</span>.Loaded &#43;= (s, args) =&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; HeaderPanel.Children.Clear();<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; HeaderPanel.Children.Add(ViewModel.GetHeaderGrid());<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>\r\n<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [Import]<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">public</span> AcoesViewModel ViewModel<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">\r\nget</span><br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n<span style=\"color:blue\">return</span> (AcoesViewModel)<span style=\"color:blue\">this</span>.DataContext;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">\r\nset</span><br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DataContext = value;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>\r\n<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">private</span>\r\n<span style=\"color:blue\">void</span> DataGridDoubleClick(<span style=\"color:blue\">object</span> sender, MouseButtonEventArgs e)<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">\r\nif</span> (ViewModel.CanUpdate)<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ViewModel.EditCommand(sender, EventArgs.Empty);<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">\r\nelse</span><br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MessageBoxDialog.Show(Helpers.Messages.NO_UPDATE_PERMISSION,\r\n<span style=\"color:blue\">string</span>.Format(<span style=\"color:#a31515\">&quot;Art Solution | {0}&quot;</span>,\r\n<span style=\"color:blue\">this</span>.ViewModel.ScreenDescriptionPlural), MessageBoxDialogButtons.OK, MessageBoxDialogIcons.Warning,\r\n<span style=\"color:blue\">null</span>);<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>\r\n<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">#region</span> INavigationAware Members<br>\r\n<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">public</span>\r\n<span style=\"color:blue\">bool</span> IsNavigationTarget(NavigationContext navigationContext)<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">\r\nreturn</span> <span style=\"color:blue\">true</span>;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>\r\n<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">public</span>\r\n<span style=\"color:blue\">void</span> OnNavigatedFrom(NavigationContext navigationContext)<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DataContext = <span style=\"color:blue\">\r\nnull</span>;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ViewModel = <span style=\"color:blue\">\r\nnull</span>;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">\r\nvar</span> regionManager = ServiceLocator.Current.GetInstance&lt;IRegionManager&gt;();<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">\r\nvar</span> mainRegion = regionManager.Regions[RegionNames.MainContentRegion];<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mainRegion.Deactivate(<span style=\"color:blue\">this</span>);<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>\r\n<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">public</span>\r\n<span style=\"color:blue\">void</span> OnNavigatedTo(NavigationContext navigationContext)<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ViewModel.LoadData();<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>\r\n<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">#endregion</span><br>\r\n&nbsp;&nbsp;&nbsp; }<br>\r\n}</p>\r\n<p>&nbsp;</p>\r\n",
    "PostedDate": "2010-12-22T06:27:10.573-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "539361",
    "ThreadId": "239142",
    "Html": "\r\n<div><span style=\"font-family:Arial; color:#000080; font-size:x-small\">One thing I noticed is you have keepalive on both the viewmodel and view. Try keeping it in viewmodel only.\r\n</span></div>\r\n",
    "PostedDate": "2010-12-22T06:59:50.493-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "539392",
    "ThreadId": "239142",
    "Html": "\r\n<p>Any luck? Did you resolve it? <a href=\"http://cid-0b3d61b7a214f81a.office.live.com/self.aspx/.Documents/MefPrism.rar\" target=\"_blank\">\r\nHere</a> is a sample project making use of the prism navigation framework and it toggles betwee 2 views. Hope this gives you some lead.</p>\r\n<p>Here whenever you navigate away/to a module it will log the events. Note the created messages in red. It gets logged everytime you navigate to a view from elsewhere.</p>\r\n<p>Cheers!</p>\r\n",
    "PostedDate": "2010-12-22T08:06:59.917-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "539432",
    "ThreadId": "239142",
    "Html": "\r\n<p>I keepalive only the view model and it didnt work,</p>\r\n<p>so i Keepalive only the view, and now i have a new problem.</p>\r\n<p>I set a breakpoint in the view constructor, when i navegate to the view, its fire the breakpoint, all the time i navigate to the view.</p>\r\n<p>Apparentily it was working, but when i removed the breakpoint, and run the application, when i navigate to the view he fire the constructor (so its recreating the view)</p>\r\n<p>but on the screen i sse the data before the &quot;LoadData&quot; event, so, re is passsing again in the constructor but the view is alredy there in the region. I realy dont know what to test now.</p>\r\n",
    "PostedDate": "2010-12-22T09:14:06.02-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "539454",
    "ThreadId": "239142",
    "Html": "\r\n<p>Found the problem:</p>\r\n<p>The view Model cant be</p>\r\n<pre style=\"font-family:consolas\">[<span style=\"color:#2b91af\">PartCreationPolicy</span>(<span style=\"color:#2b91af\">CreationPolicy</span>.Shared)]</pre>\r\n<pre style=\"font-family:consolas\">it need to be </pre>\r\n<pre style=\"font-family:consolas\">[<span style=\"color:#2b91af\">PartCreationPolicy</span>(<span style=\"color:#2b91af\">CreationPolicy</span>.NonShared)]</pre>\r\n<pre style=\"font-family:consolas\">All working now</pre>\r\n<pre style=\"font-family:consolas\"><br></pre>\r\n<pre style=\"font-family:consolas\"><br></pre>\r\n<p>&nbsp;</p>\r\n",
    "PostedDate": "2010-12-22T10:02:42.78-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "539461",
    "ThreadId": "239142",
    "Html": "\r\n<p>Hi Luciano,</p>\r\n<p>I'm glad that you've found the solution to your issue. Thank you for sharing your findings with the rest of the community, since other users might benefit from reading this. Also, thank you Ganesh for your help in troubleshooting the issue.</p>\r\n<p>Guido Leandro Maliandi<br>\r\n<a href=\"http://blogs.southworks.net/gmaliandi\">http://blogs.southworks.net/gmaliandi</a></p>\r\n",
    "PostedDate": "2010-12-22T10:10:34.123-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "539722",
    "ThreadId": "239142",
    "Html": "\r\n<p>Hi Luciano,</p>\r\n<p>Told you it might be a very trivial issue. Good that it got resolved now.</p>\r\n",
    "PostedDate": "2010-12-22T20:40:01.853-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]