[
  {
    "Id": "108934",
    "ThreadId": "32869",
    "Html": "<br>\r\nHi: I want my Modules to have an external configuration file with some sections for Unity.&nbsp; It seems that System.Configuration is not really setup to do this in the sense that obviously I&quot;m not trying to add sections or additional container element&nbsp;configuration the traditional way&nbsp;through&nbsp;union of settings&nbsp;into app.exe.config.&nbsp; <br>\r\n<br>\r\nWhen I use System.Configuration to read a module.config file separate from the app.config and produce a UnityContainerElement the result is as expected; e.g. the UnityContainerElement is created with the type elements and other configuration that I am expecting.&nbsp; Everything looks as 'normal' as I can judge not having knowledge of all the details.&nbsp; The type elements with the mapping and system.type information looks correct.<br>\r\n<br>\r\nThen I make a child container from the passed in Container and configure it using the UnityContainerElement.<br>\r\n<span style=\"font-size:13px\">\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px;color:#2b91af\">IUnityContainer</span><span style=\"font-size:13px\"> childContainer = Container.CreateChildContainer();\r\n<p>&nbsp;</p>\r\n<p>containerElement.Configure(childContainer);</p>\r\n</span></p>\r\n<br>\r\nHowever none of the types loaded into the child container can be resolved for some reason ???<br>\r\n<span style=\"font-size:13px;color:#0000ff\"><span style=\"font-size:13px;color:#0000ff\">\r\n<p>bool</p>\r\n</span>\r\n<p><span style=\"font-size:13px\"> b = </span><span style=\"font-size:13px;color:#2b91af\">UnityContainerHelper</span><span style=\"font-size:13px\">.IsTypeRegistered( <span style=\"font-size:13px\">childContainer </span>, typeof( </span><span style=\"font-size:13px;color:#2b91af\">IMenuBarMgr ) </span><span style=\"font-size:13px\">)();<br>\r\n<br>\r\nI was just wondering if this makes sense.&nbsp; Should I even be trying to 'merge' external configuration like this into child containers ?&nbsp; I know that I can't seem to get the types out even though looking in the debugger the configuration has been fread from the config file and all the type mappings are loaded into the&nbsp;<span style=\"font-size:13px\">Microsoft.Practices.Unity.Configuration.</span>UnityContainerElement .<br>\r\n<br>\r\n------------------------------<br>\r\n<span style=\"font-size:13px;color:#2b91af\">\r\n<p>&nbsp;</p>\r\n<p>ExeConfigurationFileMap</p>\r\n</span>\r\n<p><span style=\"font-size:13px\"> fileMap = </span><span style=\"font-size:13px;color:#0000ff\">new</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">ExeConfigurationFileMap</span><span style=\"font-size:13px\">();\r\n<p>&nbsp;</p>\r\n<p>fileMap.ExeConfigFilename = moduleFilePath;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#2b91af\">Configuration</span><span style=\"font-size:13px\"> moduleConfig = </span><span style=\"font-size:13px;color:#2b91af\">ConfigurationManager</span><span style=\"font-size:13px\">.OpenMappedExeConfiguration(fileMap, </span><span style=\"font-size:13px;color:#2b91af\">ConfigurationUserLevel</span><span style=\"font-size:13px\">.None);\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#2b91af\">UnityConfigurationSection</span><span style=\"font-size:13px\"> section = (</span><span style=\"font-size:13px;color:#2b91af\">UnityConfigurationSection</span><span style=\"font-size:13px\">)moduleConfig.GetSection(</span><span style=\"font-size:13px;color:#a31515\">&quot;unity&quot;</span><span style=\"font-size:13px\">);\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#2b91af\">UnityContainerElement</span><span style=\"font-size:13px\"> containerElement = section.Containers[</span><span style=\"font-size:13px;color:#a31515\">&quot;AppModuleContainer&quot;</span><span style=\"font-size:13px\">];\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#2b91af\">IUnityContainer</span><span style=\"font-size:13px\"> childContainer = _Container.CreateChildContainer();\r\n<p>&nbsp;</p>\r\n<p>containerElement.Configure(childContainer);</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p></p>\r\n</span></p>\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px\"><br>\r\nJust wondering ?&nbsp; I&quot;m fairly new to the CAG and this is my first shot at dynamically loading modules.&nbsp; I wanted the modules to use a DI Container and I did not want to 'share' the app.exe.config file with the modules.&nbsp; I wanted them to have their own external configuration for the DI Container.<br>\r\n<br>\r\nthanks in advance<br>\r\nmarkb@iship.com<br>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n",
    "PostedDate": "2008-08-04T10:49:44.353-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "108989",
    "ThreadId": "32869",
    "Html": "<span style=\"font-size:13px\">As ctavares noted in the Unity forum, <a href=\"http://www.codeplex.com/unity/Thread/View.aspx?ThreadId=32677\">Newbie: How to get unity to look in specific directory</a>, you can load external config files.&nbsp;&nbsp; I created you a working demo in&nbsp;the latest drop of my ShellApp and provided documentation references and places to get more code examples <a href=\"http://www.global-webnet.net/BlogEngine/post/2008/08/04/CompositeWPF-using-Module-configuration-files-for-resolving-types.aspx\">HERE</a>. </span>\r\n",
    "PostedDate": "2008-08-04T17:53:01.78-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "108992",
    "ThreadId": "32869",
    "Html": "<p>S-W-E-E-T </p>\r\n<p>&nbsp;</p>\r\n<p>thanks</p>\r\n<p>mark</p>\r\n<p>I'll try it out tonight...</p>\r\n",
    "PostedDate": "2008-08-04T18:27:26.697-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]