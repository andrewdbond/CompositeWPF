[
  {
    "Id": "672636",
    "ThreadId": "272810",
    "Html": "\r\n<pre style=\"font-family:Consolas; background:white; color:black; font-size:13px\">Hi all</pre>\r\n<pre style=\"font-family:Consolas; background:white; color:black; font-size:13px\">Looking for some help please.  I'm going around in circles at the moment.  I'm trying to inject an eventaggregator into a viewmodel and am getting the error below.</pre>\r\n<pre style=\"font-family:Consolas; background:white; color:black; font-size:13px\">An exception has occurred while trying to add a view to region 'WorkRegion'. <br>&nbsp;&nbsp;&nbsp; - The most likely causing exception was was: 'System.InvalidOperationException: The current type, Microsoft.Practices.Prism.Events.IEventAggregator, is an interface and cannot be constructed. Are you missing a type mapping?<br>&nbsp;&nbsp; at Microsoft.Practices.ObjectBuilder2.DynamicMethodConstructorStrategy.ThrowForAttemptingToConstructInterface(IBuilderContext context)<br>&nbsp;&nbsp; at BuildUp_Microsoft.Practices.Prism.Events.IEventAggregator(IBuilderContext )<br>&nbsp;&nbsp; at Microsoft.Practices.ObjectBuilder2.DynamicMethodBuildPlan.BuildUp(IBuilderContext context)<br>&nbsp;&nbsp; at Microsoft.Practices.ObjectBuilder2.BuildPlanStrategy.PreBuildUp(IBuilderContext context)<br>&nbsp;&nbsp; at Microsoft.Practices.ObjectBuilder2.StrategyChain.ExecuteBuildUp(IBuilderContext context)'.<br>&nbsp;&nbsp;&nbsp; But also check the InnerExceptions for more detail or call .GetRootException().</pre>\r\n<pre style=\"font-family:Consolas; background:white; color:black; font-size:13px\">My bootstrapper is as follows:</pre>\r\n<pre style=\"font-family:Consolas; background:white; color:black; font-size:13px\"><pre style=\"font-family:Consolas; background:white; color:black; font-size:13px\"><span style=\"color:blue\">public</span>&nbsp;<span style=\"color:blue\">class</span>&nbsp;<span style=\"color:#2b91af\">Bootstrapper</span>&nbsp;:&nbsp;<span style=\"color:#2b91af\">UnityBootstrapper</span>\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:blue\">protected</span>&nbsp;<span style=\"color:blue\">override</span>&nbsp;<span style=\"color:#2b91af\">DependencyObject</span>&nbsp;CreateShell()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#2b91af\">Shell</span>&nbsp;shell&nbsp;=&nbsp;Container.Resolve&lt;<span style=\"color:#2b91af\">Shell</span>&gt;();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#2b91af\">Application</span>.Current.RootVisual&nbsp;=&nbsp;shell;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:blue\">return</span>&nbsp;shell;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:blue\">protected</span>&nbsp;<span style=\"color:blue\">override</span>&nbsp;Microsoft.Practices.Composite.Modularity.<span style=\"color:#2b91af\">IModuleCatalog</span>&nbsp;GetModuleCatalog()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:blue\">return</span>&nbsp;<span style=\"color:blue\">new</span>&nbsp;<span style=\"color:#2b91af\">ModuleCatalog</span>()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.AddModule(<span style=\"color:blue\">typeof</span>(RouteInfoModule.<span style=\"color:#2b91af\">ViewRouteInfoModule</span>));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:blue\">protected</span>&nbsp;<span style=\"color:blue\">override</span>&nbsp;<span style=\"color:blue\">void</span>&nbsp;ConfigureContainer()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:blue\">base</span>.ConfigureContainer();</pre>\r\n<pre style=\"font-family:Consolas; background:white; color:black; font-size:13px\">\t//Not sure if i need to register this below, but either way it still won't work\t\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#2b91af\">IEventAggregator</span>&nbsp;eventAggregator&nbsp;=&nbsp;<span style=\"color:blue\">new</span>&nbsp;<span style=\"color:#2b91af\">EventAggregator</span>();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Container.RegisterInstance&lt;<span style=\"color:#2b91af\">IEventAggregator</span>&gt;(eventAggregator);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre>\r\n<pre style=\"font-family:Consolas; background:white; color:black; font-size:13px\">My module is as follows:</pre>\r\n<pre style=\"font-family:Consolas; background:white; color:black; font-size:13px\">\t<pre style=\"font-family:Consolas; background:white; color:black; font-size:13px\"><span style=\"color:blue\">public</span>&nbsp;<span style=\"color:blue\">class</span>&nbsp;<span style=\"color:#2b91af\">ViewRouteInfoModule</span>&nbsp;:&nbsp;<span style=\"color:#2b91af\">IModule</span>\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:blue\">public</span>&nbsp;<span style=\"color:#2b91af\">IUnityContainer</span>&nbsp;_container&nbsp;{&nbsp;<span style=\"color:blue\">get</span>;&nbsp;<span style=\"color:blue\">set</span>;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:blue\">public</span>&nbsp;<span style=\"color:#2b91af\">IRegionManager</span>&nbsp;_regionManager&nbsp;{&nbsp;<span style=\"color:blue\">get</span>;&nbsp;<span style=\"color:blue\">set</span>;&nbsp;}\r\n \r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:blue\">public</span>&nbsp;ViewRouteInfoModule(<span style=\"color:#2b91af\">IUnityContainer</span>&nbsp;container,&nbsp;<span style=\"color:#2b91af\">IRegionManager</span>&nbsp;regionManager)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_container&nbsp;=&nbsp;container;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_regionManager&nbsp;=&nbsp;regionManager;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n \r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:blue\">public</span>&nbsp;<span style=\"color:blue\">void</span>&nbsp;Initialize()\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_regionManager.RegisterViewWithRegion(<span style=\"color:#a31515\">&quot;MainRegion&quot;</span>,&nbsp;<span style=\"color:blue\">typeof</span>(<span style=\"color:#2b91af\">RouteInfo</span>));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_regionManager.RegisterViewWithRegion(<span style=\"color:#a31515\">&quot;WorkRegion&quot;</span>,&nbsp;<span style=\"color:blue\">typeof</span>(<span style=\"color:#2b91af\">ScheduledWork</span>));&nbsp;&nbsp;&lt;- this is where the error occurs as viewmodel expects eventaggregator&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre>\r\n<pre style=\"font-family:Consolas; background:white; color:black; font-size:13px\">ViewModel as follows(cut):</pre>\r\n<pre style=\"font-family:Consolas; background:white; color:black; font-size:13px\"><pre style=\"font-family:Consolas; background:white; color:black; font-size:13px\"><span style=\"color:blue\">public</span>&nbsp;ScheduledWorkViewModel(<span style=\"color:#2b91af\">IEventAggregator</span>&nbsp;eventAggregator)\r\n\t\t{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n\t\t\t<span style=\"color:blue\">try</span>\r\n\t\t\t{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_eventAggregator&nbsp;=&nbsp;eventAggregator;</pre>\r\n<pre style=\"font-family:Consolas; background:white; color:black; font-size:13px\">I've been looking at this for a while and have tried various examples without success.  Please let me know if i need to supply more info.</pre>\r\n<pre style=\"font-family:Consolas; background:white; color:black; font-size:13px\">Thanks</pre>\r\n<pre style=\"font-family:Consolas; background:white; color:black; font-size:13px\">Paul</pre>\r\n</pre>\r\n</pre>\r\n</pre>\r\n",
    "PostedDate": "2011-09-16T03:29:13.373-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "672737",
    "ThreadId": "272810",
    "Html": "<p>Hi,</p>\r\n<p>Even though the exception you're mentioning does imply that you don't have the <strong>Event Aggregator</strong> registered in the container, this is one of the services registered into the container by default in the <strong>ConfigureContainer </strong>method of the <strong>UnityBootstrapper</strong>. Therefore, there's no need to register it again when overriding that method from your bootstrapper.<br />So far, we couldn&rsquo;t find anything wrong within the code snippets that you posted. Hence, it would be helpful if you could provide us with a repro sample application that portrays that problem, so we can help you find the cause and a possible workaround for your issue.</p>\r\n<p>Regards,</p>\r\n<p>Agustin Adami<a href=\"http://blogs.southworks.net/aadami\"><br /> http://blogs.southworks.net/aadami</a></p>",
    "PostedDate": "2011-09-16T07:33:16.3-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "672796",
    "ThreadId": "272810",
    "Html": "<p>Hi Agustin</p>\r\n<p>Thanks for the quick response.&nbsp; I didn't think i had to have the event aggregator registered but had tried everything else.&nbsp; I'm coming to the conclusion that it must have something to do with the dll's that i have registered.&nbsp;</p>\r\n<p>Can you tell me which dll's i should be using for my silverlight app with prism.&nbsp; I see references to Microsoft.Practices.Composite dll's, is this correct?</p>\r\n<p>Thanks</p>\r\n<p>Paul</p>",
    "PostedDate": "2011-09-16T09:02:46.59-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "672819",
    "ThreadId": "272810",
    "Html": "<p>Hi,</p>\r\n<p>Based on my understanding of your scenario, you should reference the <strong>Microsoft.Practices.Prism</strong> assembly which is the one provided in <strong>Prism v4</strong>. If you don&acute;t find it in the Global Assembly Cache try running the <strong>RegisterPrismBinaries.bat</strong> file within Prism v4. This will register Prism v4 assemblies in the Global Assembly Cache. Note that the <strong>Microsoft.Practices.Composite</strong> is present in <strong>Prism v2</strong>, not in v4.﻿</p>\r\n<p>I hope you find this useful.</p>\r\n<p>Agustin Adami<a href=\"http://blogs.southworks.net/aadami\"><br /> http://blogs.southworks.net/aadami</a></p>",
    "PostedDate": "2011-09-16T09:44:53.82-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "673108",
    "ThreadId": "272810",
    "Html": "<p><strong>RegisterPrismBinaries.bat </strong>does not put Prism in the GAC.&nbsp; It only adds registry entries so that Visual Studio will list the Prism and Unity assemblies in the Add References dialog.</p>\r\n<p>Karl</p>",
    "PostedDate": "2011-09-17T07:46:48.007-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "673514",
    "ThreadId": "272810",
    "Html": "<p>Thanks all</p>",
    "PostedDate": "2011-09-19T00:51:45.757-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "673645",
    "ThreadId": "272810",
    "Html": "<p>Karl,</p>\n<p>Thank you very much for the correction. I am sorry for the confusion generated with this.</p>\n<p>Regards. ﻿</p>\n<p>Agustin Adami<a href=\"http://blogs.southworks.net/aadami\"><br /> http://blogs.southworks.net/aadami</a></p>",
    "PostedDate": "2011-09-19T06:10:57.593-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]